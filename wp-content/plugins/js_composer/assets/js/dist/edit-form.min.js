if(_.isUndefined(window.vc))var vc={atts:{}};if(function(a){var b=Backbone.View.extend({events:{},$lg_offset_placeholder_value:!1,$lg_size_placeholder_value:!1,initialize:function(){_.bindAll(this,"setLgPlaceholders")},render:function(){return this},save:function(){var b=[];return this.$el.find(".vc_column_offset_field").each(function(){var c=a(this);c.is(":checkbox:checked")?b.push(c.attr("name")):c.is("select")&&""!==c.val()&&b.push(c.val())}),b},setLgPlaceholders:function(){var a=this.$lg_offset_placeholder_value.val().replace(/[^\d]/g,"");this.$lg_size.find("option:first").text(VcI8nColumnOffsetParam.inherit_default),this.$lg_offset.find("option:first").text(a?VcI8nColumnOffsetParam.inherit+a:"")}});vc.atts.column_offset={parse:function(a){var b=this.content().find("input.wpb_vc_param_value."+a.param_name),c=b.data("vcColumnOffset"),d=c.save();return d.join(" ")},init:function(c,d){a('[data-column-offset="true"]',d).each(function(){var c=a(this),d=c.find(".wpb_vc_param_value");d.data("vcColumnOffset",new b({el:c}).render())})}}}(window.jQuery),_.isUndefined(window.vc))var vc={atts:{}};if(function(a){function b(){var a={bg_color:"background-color",padding:"padding",margin_bottom:"margin-bottom",bg_image:"background-image"},b=vc.edit_element_block_view.model.get("params"),c=_.reduce(a,function(a,c,d){var e=b[d];return _.isUndefined(e)||!e.length?a:("bg_image"===d&&(e="url("+e+")"),a+c+": "+e+";")},"",this);return c?".tmp_class{"+c+"}":""}function c(b,c){function e(d){if(!window.vc||!window.vc.active_panel)return!1;var e,f;e=_.map(d,function(a){return a.attributes}),b.reset(e),f=_.map(b.models,function(a){return a.attributes});var g=vc.template(a("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom));c._css_editor.$el.find(".vc_background-image .vc_image").html(g(f[0])),a(".media-modal").removeClass("processing-media")}var f;f=[],a(".media-modal").addClass("processing-media"),b.each(function(a){f.push(a.get("id"))}),d(f,e)}function d(b,c){a.ajax({dataType:"json",type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:b,vc_inline:!0,_vcnonce:window.vcAdminNonce}}).done(function(b){var d,e,f,g;if("function"==typeof c){for(d=[],f=[],g=0;g<b.data.ids.length;g++)e=wp.media.model.Attachment.get(b.data.ids[g]),f.push(e.fetch()),d.push(e);a.when.apply(a,f).done(function(){c(d)})}}).fail(function(b){a(".media-modal-close").click(),window.vc&&window.vc.active_panel&&window.i18nLocale&&window.i18nLocale.error_while_saving_image_filtered&&vc.active_panel.showMessage(window.i18nLocale.error_while_saving_image_filtered,"error"),window.console&&window.console.error&&window.console.error(b)}).always(function(){a(".media-modal").removeClass("processing-media")})}var e,f=wp.media,g=ajaxurl.replace(/admin\-ajax\.php/,"images/wpspin_light.gif");f.controller.VcCssSingleImage=f.controller.VcSingleImage.extend({setCssEditor:function(a){return a&&(this._css_editor=a),this},updateSelection:function(){var a,b=this.get("selection"),c=this._css_editor.getBackgroundImage();"undefined"!=typeof c&&""!==c&&-1!==c&&(a=_.map(c.toString().split(/,/),function(a){var b=wp.media.model.Attachment.get(a);return b.fetch(),b})),b.reset(a)}});var h;h=vc.CssEditor=Backbone.View.extend({attrs:{},layouts:["margin","border-width","padding"],positions:["top","right","bottom","left"],$field:!1,simplify:!1,$simplify:!1,events:{"click .vc_icon-remove":"removeImage","click .vc_add-image":"addBackgroundImage","change .vc_simplify":"changeSimplify"},initialize:function(){_.bindAll(this,"setSimplify")},render:function(a){return this.attrs={},this.$simplify=this.$el.find(".vc_simplify"),_.isString(a)&&this.parse(a),this},parse:function(a){var b=a.split(/\s*(\.[^\{]+)\s*\{\s*([^\}]+)\s*\}\s*/g);b[2]&&this.parseAtts(b[2].replace(/\s+!important/g,""))},addBackgroundImage:function(a){return a.preventDefault(),window.vc_selectedFilters={},this.image_media?this.image_media.open("vc_editor"):(this.image_media=f({state:"vc_single-image",states:[(new f.controller.VcCssSingleImage).setCssEditor(this)]}),this.image_media.on("toolbar:create:vc_single-image",function(a){this.createSelectToolbar(a,{text:window.i18nLocale.set_image})},this.image_media),this.image_media.state("vc_single-image").on("select",this.setBgImage),void this.image_media.open("vc_editor"))},setBgImage:function(){var a=this.get("selection");c(a,this)},setCurrentBgImage:function(b){var c,d,e=/([^\?]+)(\?id=\d+){0,1}/,f="",h="";b.match(/^\d+$/)?(d=vc.template(a("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom)),this.$el.find(".vc_background-image .vc_image").html(d({url:g,id:b,css_class:"vc_preview"})),a.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:b,size:"full",_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(a){this.$el.find(".vc_ce-image").attr("src",a+"?id="+b).removeClass("vc_preview")})):b.match(e)&&(c=b.split(e),f=c[1],c[2]&&(h=c[2].replace(/[^\d]+/,"")),d=vc.template(a("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom)),this.$el.find(".vc_background-image .vc_image").html(d({url:f,id:h})))},changeSimplify:function(){var a=_.debounce(this.setSimplify,100);a&&a()},setSimplify:function(){this.simplifiedMode(this.$simplify[0].checked)},simplifiedMode:function(b){b?(this.simplify=!0,this.$el.addClass("vc_simplified")):(this.simplify=!1,this.$el.removeClass("vc_simplified"),_.each(this.layouts,function(b){"border-width"===b&&(b="border");var c=a("[data-attribute="+b+"].vc_top");this.$el.find("[data-attribute="+b+"]:not(.vc_top)").val(c.val())},this))},removeImage:function(b){var c=a(b.currentTarget);b.preventDefault(),c.parent().remove()},getBackgroundImage:function(){return this.$el.find(".vc_ce-image").data("imageId")},parseAtts:function(a){var b,c,d;b=/(\d+\S*)\s+(\w+)\s+([\d\w#\(,]+)/,c=/^([^\s]+)\s+url\(([^\)]+)\)([\d\w]+\s+[\d\w]+)?$/,d=!1,_.map(a.split(";"),function(a){var e,f,g,h=a.split(/:\s/),i=h[1]||"",j=h[0]||"";i&&(i=i.trim()),j.match(new RegExp("^("+this.layouts.join("|").replace("-","\\-")+")$"))&&i?(e=i.split(/\s+/g),1===e.length?e=[e[0],e[0],e[0],e[0]]:2===e.length?(e[2]=e[0],e[3]=e[1]):3===e.length&&(e[3]=e[1]),_.each(this.positions,function(a,b){this.$el.find("[data-name="+j+"-"+a+"]").val(e[b])},this)):"background-size"===j?(d=i,this.$el.find("[name=background_style]").val(i)):"background-repeat"!==j||d?"background-image"===j?this.setCurrentBgImage(i.replace(/url\(([^\)]+)\)/,"$1")):"background"===j&&i?(g=i.split(c),g[1]&&this.$el.find("[name="+j+"_color]").val(g[1]),g[2]&&this.setCurrentBgImage(g[2])):"border"===j&&i&&i.match(b)?(f=i.split(b),e=[f[1],f[1],f[1],f[1]],_.each(this.positions,function(a,b){this.$el.find("[name="+j+"_"+a+"_width]").val(e[b])},this),this.$el.find("[name=border_style]").val(f[2]),this.$el.find("[name=border_color]").val(f[3]).trigger("change")):j.indexOf("border")!=-1&&i?j.indexOf("style")!=-1?this.$el.find("[name=border_style]").val(i):j.indexOf("color")!=-1?this.$el.find("[name=border_color]").val(i).trigger("change"):j.indexOf("radius")!=-1?this.$el.find("[name=border_radius]").val(i):j.match(/^[\w\-\d]+$/)&&this.$el.find("[name="+j.replace(/\-+/g,"_")+"]").val(i):j.match(/^[\w\-\d]+$/)&&i&&this.$el.find("[name="+j.replace(/\-+/g,"_")+"]").val(i):this.$el.find("[name=background_style]").val(i)},this)},save:function(){var a="";return this.attrs={},_.each(this.layouts,function(a){this.getFields(a)},this),this.getBackground(),this.getBorder(),_.isEmpty(this.attrs)||(a=".vc_custom_"+Date.now()+"{"+_.reduce(this.attrs,function(a,b,c){return b?a+c+": "+b+" !important;":a},"",this)+"}"),a&&vc.frame_window&&vc.frame_window.vc_iframe.setCustomShortcodeCss(a),a},getBackgroundImageSrc:function(){return this.$el.find(".vc_background-image img").attr("src")},getBackgroundColor:function(){return this.$el.find("[name=background_color]").val()},getBackgroundStyle:function(){return this.$el.find("[name=background_style]").val()},getBackground:function(){var a=this.getBackgroundColor(),b=this.getBackgroundImageSrc(),c=this.getBackgroundStyle();a&&b?this.attrs.background=a+" url("+b+")":a?this.attrs["background-color"]=a:b&&(this.attrs["background-image"]="url("+b+")"),c.match(/repeat/)?(this.attrs["background-position"]="0 0",this.attrs["background-repeat"]=c):c.match(/cover|contain/)&&(this.attrs["background-position"]="center",this.attrs["background-repeat"]="no-repeat",this.attrs["background-size"]=c),a.match(/^rgba/)&&(this.attrs["*background-color"]=a.replace(/\s+/,"").replace(/(rgb)a\((\d+)\,(\d+),(\d+),[^\)]+\)/,"$1($2,$3,$4)"))},getBorder:function(){var a=this.$el.find("[name=border_style]").val(),b=this.$el.find("[name=border_radius]").val(),c=this.$el.find("[name=border_color]").val(),d=["left","right","top","bottom"];a&&c&&this.attrs["border-width"]&&this.attrs["border-width"].match(/^\d+\S+$/)?(this.attrs.border=this.attrs["border-width"]+" "+a+" "+c,this.attrs["border-width"]=void 0,b&&(this.attrs["border-radius"]=b)):(_.each(d,function(b){this.attrs["border-"+b+"-width"]&&(c&&(this.attrs["border-"+b+"-color"]=c),a&&(this.attrs["border-"+b+"-style"]=a))},this),b&&(this.attrs["border-radius"]=b))},getFields:function(a){var b=[];return this.simplify?this.getSimplifiedField(a):(_.each(this.positions,function(c){var d=this.$el.find("[data-name="+a+"-"+c+"]").val().replace(/\s+/,"");d.match(/^-?\d*(\.\d+){0,1}(%|in|cm|mm|em|rem|ex|pt|pc|px|vw|vh|vmin|vmax)$/)||(d=isNaN(parseFloat(d))?"":""+parseFloat(d)+"px"),d.length&&b.push({name:c,val:d})},this),void _.each(b,function(b){var c="border-width"===a?"border-"+b.name+"-width":a+"-"+b.name;this.attrs[c]=b.val},this))},getSimplifiedField:function(a){var b="top",c=this.$el.find("[data-name="+a+"-"+b+"]").val().replace(/\s+/,"");c.match(/^-?\d*(\.\d+){0,1}(%|in|cm|mm|em|rem|ex|pt|pc|px|vw|vh|vmin|vmax)$/)||(c=isNaN(parseFloat(c))?"":""+parseFloat(c)+"px"),c.length&&(this.attrs[a]=c)}}),vc.atts.css_editor={parse:function(a){var b,c,d;return b=this.content().find('input.wpb_vc_param_value[name="'+a.param_name+'"]'),c=b.data("vcFieldManager"),d=c.save(),d&&vc.edit_form_callbacks.push(e),d},init:function(c,d){a("[data-css-editor=true]",this.content()).each(function(){var d=a(this),e=d.find('input.wpb_vc_param_value[name="'+c.param_name+'"]'),f=e.val();f||(f=b()),e.data("vcFieldManager",new h({el:d}).render(f))}),vc.atts.colorpicker.init.call(this,c,d)}},e=function(){this.params=_.omit(this.params,"bg_color","padding","margin_bottom","bg_image")}}(window.jQuery),_.isUndefined(window.vc))var vc={atts:{}};if(function(a){var b=Backbone.View.extend({events:{change:"setParams"},setParams:function(){var a,b=this.save(),c=this.$el.find('[value="'+b+'"]'),d=vc.edit_element_block_view.content(),e=this.$el;if(c.length){a=c.data("params");var f=[];_.each(a,function(a,b,c){var e,g=d.find("[name="+b+"].wpb_vc_param_value");g.length&&(g.unbind("change.vcParamsPreset"),e=g.data("vcFieldManager"),e&&e.render&&e.render(a),f.push(g),g.val(a).trigger("change"))}),_.each(f,function(a,b){a.bind("change.vcParamsPreset",function(a){_.isUndefined(a.extra_type)&&e.val("")})})}},render:function(){return this.setParams(),this},save:function(){return this.$el.val()}});vc.atts.params_preset={parse:function(b){return a("select[name="+b.param_name+"]",this.content()).val()},init:function(c,d){a(".vc_params-preset-select",d).each(function(){var c=a(this);_.isUndefined(c.data("fieldManager"))&&c.data("fieldManager",new b({el:c}).render())})}}}(window.jQuery),function(a){function b(){a(".gallery_widget_attached_images_list",this.$view).unbind("click.removeImage").on("click.removeImage","a.vc_icon-remove",function(b){b.preventDefault();var c=a(this).closest(".edit_form_line");a(this).parent().remove();var d=[];c.find(".added img").each(function(){d.push(a(this).attr("rel"))}),c.find(".gallery_widget_attached_images_ids").val(d.join(",")).trigger("change")}),a(".gallery_widget_attached_images_list").each(function(b){var c=a(this);c.sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder-gallery",cursor:"move",items:"li",update:function(){var b=[];a(this).find(".added img").each(function(){b.push(a(this).attr("rel"))}),c.closest(".edit_form_line").find(".gallery_widget_attached_images_ids").val(b.join(",")).trigger("change")}})})}new b;var c=a("#vc_edit-form-tabs");c.length&&(a(".wpb-edit-form").addClass("vc_with-tabs"),c.find(".vc_edit-form-tab-control").removeClass("vc_active").eq(0).addClass("vc_active"),c.find('[data-vc-ui-element="panel-edit-element-tab"]').removeClass("vc_active").eq(0).addClass("vc_active"),c.find(".vc_edit-form-link").click(function(b){var d=a(this);b.preventDefault(),c.find(".vc_active").removeClass("vc_active"),d.parent().addClass("vc_active");var e=a(d.attr("href")).addClass("vc_active");e.parents(".vc_panel-body").scrollTop(0)})),a(".vc_ui-panel .additembutton").click(function(){var b=a(this).parent().parent().next().find(".listitemwindow");b.css({display:"block",top:"220px"}),b.find("[name='item_type']").val("items"),b.find("[name='item_value'], [name='item_content'], [name='item_url'], [name='item_content_color'], [name='item_value_color'], [name='item_value_background_color'], [name='item_border_color']").val(""),b.draggable({handle:a(".vc_panel-heading")}),b.resizable({handles:"n, e, s, w, ne, se, sw, nw"})}),a(".cancel-item-options, .listitemwindow .vc_close").click(function(b){b.preventDefault(),a(".listitemwindow").css("display","none")}),a("#add-item-shortcode").click(function(b){b.preventDefault();var c=window.tinyMCE.get("wpb_tinymce_content"),d=c.getContent(),e=a("[name='additemwindow'] [name='item_content_color']"),f=a("[name='additemwindow'] [name='item_value_color']"),g=a("[name='additemwindow'] [name='item_value_background_color']"),h=a("[name='additemwindow'] [name='item_border_color']"),i="[item"+(a("[name='additemwindow'] [name='item_type']").length?' type="'+a("[name='additemwindow'] [name='item_type']").val()+'"':"")+(a("[name='additemwindow'] [name='item_value']").length?' value="'+a("[name='additemwindow'] [name='item_value']").val()+'"':"")+(a("[name='additemwindow'] [name='item_url']").length?' url="'+a("[name='additemwindow'] [name='item_url']").val()+'"':"")+(a("[name='additemwindow'] [name='item_url_target']").length?' url_target="'+a("[name='additemwindow'] [name='item_url_target']").val()+'"':"")+(a("[name='additemwindow'] [name='item_icon']").length?' icon="'+a("[name='additemwindow'] [name='item_icon']").val()+'"':"")+(""!=e.length?' text_color="'+e.val()+'"':"")+(""!=f.length?' value_color="'+f.val()+'"':"")+(""!=g.length?' value_bg_color="'+g.val()+'"':"")+(""!=h.length?' border_color="'+h.val()+'"':"")+"]"+a("[name='additemwindow'] [name='item_content']").val()+"[/item]";c.setContent(a(d).text()+i),a(".listitemwindow").css("display","none")}),a(".gallery_widget_attached_images_ids").change(function(){var b=a(this).val().split(","),c=0;parseInt(b[0])&&(c=b.length);var d=a(this).hasClass("carousel_images")?5:a(this).hasClass("slider_images")?3:4,e=a(".wpb_el_type_attach_images").nextAll();e.slice(0,30*d+1).css("display","none"),c&&(e.slice(0,c*d).css("display","block"),e.slice(30*d,30*d+1).css("display","block"))}),setTimeout(function(){a(".gallery_widget_attached_images_ids").trigger("change")},1),a(".vc_ui-panel [name^='testimonials_icon'], .vc_ui-panel [name^='testimonials_title'], .vc_ui-panel [name^='testimonials_author'], .vc_ui-panel [name^='testimonials_author_subtext']").parent().parent().css("display","none"),a(".vc_ui-panel [name='testimonials_count']").change(function(){var b=a(this),c=a(".vc_ui-panel [name$='29']").length;a(".vc_ui-panel [name^='testimonials_icon'], .vc_ui-panel [name^='testimonials_title'], .vc_ui-panel [name^='testimonials_author'], .vc_ui-panel [name^='testimonials_author_subtext']").parent().parent().css("display","none"),b.parent().parent().nextUntil("",":lt("+b.val()*c+")").css("display","block")}),setTimeout(function(){a("[name='testimonials_count']").trigger("change")},1),a(".vc_ui-panel [name^='icon_type'], .vc_ui-panel [name^='icon_url'], .vc_ui-panel [name^='icon_target']").parent().parent().css("display","none"),a(".vc_ui-panel [name='icons_count']").change(function(){var b=a(this);a(".vc_ui-panel [name^='icon_type'], .vc_ui-panel [name^='icon_url'], .vc_ui-panel [name^='icon_target']").parent().parent().css("display","none"),b.parent().parent().nextUntil("",":lt("+3*b.val()+")").css("display","block")}),setTimeout(function(){a("[name='icons_count']").trigger("change")},1)}(window.jQuery),_.isUndefined(window.vc))var vc={atts:{}};!function(a){"use strict";vc.atts.vc_grid_item={init:function(b,c){!0===vc_user_access().getState("grid_builder")||null===vc_user_access().getState("grid_builder")?this.content().find('[data-vc-shortcode-param-name="'+b.param_name+'"] [data-vc-grid-element="value"]').change(function(){var c=a(this).val(),d=a(this).find("[value="+c+"]").data("vcLink");c&&a(this).parents('[data-vc-shortcode-param-name="'+b.param_name+'"]:first').find('[data-vc-grid-item="edit_link"]').attr("href",d)}).trigger("change"):this.content().find('[data-vc-shortcode-param-name="'+b.param_name+'"] .vc_description').remove()},parse:function(a){var b=this.content().find('[data-vc-shortcode-param-name="'+a.param_name+'"] [data-vc-grid-element="value"]');return b.length?b.val():""}}}(window.jQuery);