function vc_toTitleCase(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function vc_convert_column_size(a){var b="vc_col-sm-",c=a?a.split("/"):[1,1],d=_.range(1,13),e=!_.isUndefined(c[0])&&0<=_.indexOf(d,parseInt(c[0],10))&&parseInt(c[0],10),f=!_.isUndefined(c[1])&&0<=_.indexOf(d,parseInt(c[1],10))&&parseInt(c[1],10);return!1!==e&&!1!==f?b+12*e/f:b+"12"}function vc_convert_column_span_size(a){return a=a.replace(/^vc_/,""),"span12"===a?"1/1":"span11"===a?"11/12":"span10"===a?"5/6":"span9"===a?"3/4":"span8"===a?"2/3":"span7"===a?"7/12":"span6"===a?"1/2":"span5"===a?"5/12":"span4"===a?"1/3":"span3"===a?"1/4":"span2"===a?"1/6":"span1"===a&&"1/12"}function vc_get_column_mask(a){var b,c=a.split("_"),d=c.length,e=0;for(b in c)if(!isNaN(parseFloat(c[b]))&&isFinite(c[b])){var f=c[b].match(/(\d{1,2})(\d{1,2})/);e=_.reduce(f.slice(1),function(a,b){return a+parseInt(b,10)},e)}return d+""+e}function vc_guid(){return VCS4()+VCS4()+"-"+VCS4()}function VCS4(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function vc_button_param_target_callback(){var a=jQuery,b=this.$content.find("[name=target]").parents('[data-vc-ui-element="panel-shortcode-param"]:first'),c=a(".wpb-edit-form [name=href]"),d=_.debounce(function(){var c=a(this).val();0<c.length&&"http://"!==c&&"https://"!==c?b.show():b.hide()},300);c.keyup(d).trigger("keyup")}function vc_cta_button_param_target_callback(){var a=jQuery,b=this.$content.find("[name=target]").parents('[data-vc-ui-element="panel-shortcode-param"]:first'),c=a(".wpb-edit-form [name=href]"),d=_.debounce(function(){var c=a(this).val();0<c.length&&"http://"!==c&&"https://"!==c?b.show():b.hide()},300);c.keyup(d).trigger("keyup")}function vc_grid_exclude_dependency_callback(){var a=jQuery,b=a(".wpb_vc_param_value[name=exclude]",this.$content),c=b.data("vc-param-object");if(void 0===c)return!1;var d=a('select.wpb_vc_param_value[name="post_type"]',this.$content),e=d.val();c.source_data=function(a,b){return{query:{query:e,term:a.term}}},c.source_data_val=e,d.change(function(){e=a(this).val(),c.source_data_val!=e&&(c.source_data=function(a,b){return{query:{query:e,term:a.term}}},c.$el.data("uiAutocomplete").destroy(),c.$sortable_wrapper.find(".vc_data").remove(),c.render(),c.source_data_val=e)})}function vcGridFilterExcludeCallBack(){var a,b,c,d,e=jQuery;return a=e(".wpb_vc_param_value[name=filter_source]",this.$content),d=a.val(),b=e(".wpb_vc_param_value[name=exclude_filter]",this.$content),c=b.data("vc-param-object"),void 0!==c&&void a.change(function(){var a=e(this);d!==a.val()&&c.clearValue(),c.source_data=function(){return{vc_filter_by:a.val()}}}).trigger("change")}function vcChartCustomColorDependency(){var a,b,c;a=jQuery,b=a(".wpb_vc_param_value[name=style]",this.$content),c=this.$content,b.on("change",function(){var b;b=a(this).val(),c.toggleClass("vc_chart-edit-form-custom-color","custom"===b)}),b.trigger("change")}function vc_wpnop(a){var b,c,d=!1,e=!1;return a.indexOf("<pre")==-1&&a.indexOf("<script")==-1||(d=!0,a=a.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(a){return a=a.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp-temp-lb>"),a.replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp-temp-lb>")})),a.indexOf("[caption")!=-1&&(e=!0,a=a.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(a){return a.replace(/<br([^>]*)>/g,"<wp-temp-br$1>").replace(/[\r\n\t]+/,"")})),b="blockquote|ul|ol|li|table|thead|tbody|tfoot|tr|th|td|div|h[1-6]|p|fieldset",a=a.replace(new RegExp("\\s*</("+b+")>\\s*","g"),"</$1>\n"),a=a.replace(new RegExp("\\s*<((?:"+b+")(?: [^>]*)?)>","g"),"\n<$1>"),a=a.replace(/(<p [^>]+>.*?)<\/p>/g,"$1</p#>"),a=a.replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n"),a=a.replace(/\s*<p>/gi,""),a=a.replace(/\s*<\/p>\s*/gi,"\n\n"),a=a.replace(/\n[\s\u00a0]+\n/g,"\n\n"),a=a.replace(/\s*<br ?\/?>\s*/gi,"\n"),a=a.replace(/\s*<div/g,"\n<div"),a=a.replace(/<\/div>\s*/g,"</div>\n"),a=a.replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n"),a=a.replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption"),c="blockquote|ul|ol|li|table|thead|tbody|tfoot|tr|th|td|h[1-6]|pre|fieldset",a=a.replace(new RegExp("\\s*<((?:"+c+")(?: [^>]*)?)\\s*>","g"),"\n<$1>"),a=a.replace(new RegExp("\\s*</("+c+")>\\s*","g"),"</$1>\n"),a=a.replace(/<li([^>]*)>/g,"\t<li$1>"),a.indexOf("<hr")!=-1&&(a=a.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")),a.indexOf("<object")!=-1&&(a=a.replace(/<object[\s\S]+?<\/object>/g,function(a){return a.replace(/[\r\n]+/g,"")})),a=a.replace(/<\/p#>/g,"</p>\n"),a=a.replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1"),a=a.replace(/^\s+/,""),a=a.replace(/[\s\u00a0]+$/,""),d&&(a=a.replace(/<wp-temp-lb>/g,"\n")),e&&(a=a.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),a}function vc_wpautop(a){var b=!1,c=!1,d="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|noscript|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary";return a.indexOf("<object")!=-1&&(a=a.replace(/<object[\s\S]+?<\/object>/g,function(a){return a.replace(/[\r\n]+/g,"")})),a=a.replace(/<[^<>]+>/g,function(a){return a.replace(/[\r\n]+/g," ")}),a.indexOf("<pre")==-1&&a.indexOf("<script")==-1||(b=!0,a=a.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(a){return a.replace(/(\r\n|\n)/g,"<wp-temp-lb>")})),a.indexOf("[caption")!=-1&&(c=!0,a=a.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(a){return a=a.replace(/<br([^>]*)>/g,"<wp-temp-br$1>"),a=a.replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(a){return a.replace(/[\r\n\t]+/," ")}),a.replace(/\s*\n\s*/g,"<wp-temp-br />")})),a+="\n\n",a=a.replace(/<br \/>\s*<br \/>/gi,"\n\n"),a=a.replace(new RegExp("(<(?:"+d+")(?: [^>]*)?>)","gi"),"\n$1"),a=a.replace(new RegExp("(</(?:"+d+")>)","gi"),"$1\n\n"),a=a.replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n"),a=a.replace(/\r\n|\r/g,"\n"),a=a.replace(/\n\s*\n+/g,"\n\n"),a=a.replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n"),a=a.replace(/<p>\s*?<\/p>/gi,""),a=a.replace(new RegExp("<p>\\s*(</?(?:"+d+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),a=a.replace(/<p>(<li.+?)<\/p>/gi,"$1"),a=a.replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>"),a=a.replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>"),a=a.replace(new RegExp("<p>\\s*(</?(?:"+d+")(?: [^>]*)?>)","gi"),"$1"),a=a.replace(new RegExp("(</?(?:"+d+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),a=a.replace(/\s*\n/gi,"<br />\n"),a=a.replace(new RegExp("(</?(?:"+d+")[^>]*>)\\s*<br />","gi"),"$1"),a=a.replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1"),a=a.replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]"),a=a.replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(a,b,c){return c.match(/<p( [^>]*)?>/)?a:b+"<p>"+c+"</p>"}),b&&(a=a.replace(/<wp-temp-lb>/g,"\n")),c&&(a=a.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),a}function vcAddShortcodeDefaultParams(a){var b=a.get("params");b=_.extend({},vc.getDefaults(a.get("shortcode")),b),a.set({params:b},{silent:!0})}function vc_globalHashCode(a){return"string"!=typeof a&&(a=JSON.stringify(a)),a.length?a.split("").reduce(function(a,b){return a=(a<<5)-a+b.charCodeAt(0),a&a},0):0}function vcChartParamAfterAddCallback(a,b){if("new"!==b&&"clone"!==b||a.find(".vc_control.column_toggle").click(),"new"===b){var c,d,e,f,g,h;for(g=["white","black"],d=a.find("[name=values_color]"),e=d.find("option"),c=0;!(100<c++);)if(f=Math.floor(Math.random()*e.length),jQuery.inArray(e.eq(f).val(),g)===-1){e.eq(f).prop("selected",!0),d.change();break}h=["#5472d2","#00c1cf","#fe6c61","#8d6dc4","#4cadc9","#cec2ab","#50485b","#75d69c","#f7be68","#5aa1e3","#6dab3c","#f4524d","#f79468","#b97ebb","#ebebeb","#f7f7f7","#0088cc","#58b9da","#6ab165","#ff9900","#ff675b","#555555"],f=Math.floor(Math.random()*h.length),a.find("[name=values_custom_color]").val(h[f]).change()}}function vcEscapeHtml(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return null===a||"undefined"==typeof a?"":a.replace(/[&<>"']/g,function(a){return b[a]})}function vc_slugify(a){return a.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}if(!window.vc)var vc={};!function(){vc.templateOptions={default:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},custom:{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g}};var a=/(.)^/,b={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},c=/\\|'|\r|\n|\u2028|\u2029/g,d=function(a){return"\\"+b[a]};vc.template=function(b,e){e=_.defaults({},e,vc.templateOptions.default);var f=RegExp([(e.escape||a).source,(e.interpolate||a).source,(e.evaluate||a).source].join("|")+"|$","g"),g=0,h="__p+='";b.replace(f,function(a,e,f,i,j){return h+=b.slice(g,j).replace(c,d),g=j+a.length,e?h+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":f?h+="'+\n((__t=("+f+"))==null?'':__t)+\n'":i&&(h+="';\n"+i+"\n__p+='"),a}),h+="';\n",e.variable||(h="with(obj||{}){\n"+h+"}\n"),h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";var i;try{i=new Function(e.variable||"obj","_",h)}catch(a){throw a.source=h,a}var j=function(a){return i.call(this,a,_)},k=e.variable||"obj";return j.source="function("+k+"){\n"+h+"}",j}}(),function(a){"use strict";_.isUndefined(window.vc)&&(window.vc={}),window.Vc_postSettingsEditor=Backbone.View.extend({$editor:!1,sel:"wpb_csseditor",ace_enabled:!1,initialize:function(a){a&&0<a.length&&(this.sel=a),this.ace_enabled=!0},aceEnabled:function(){return this.ace_enabled&&window.ace&&window.ace.edit},setEditor:function(a){return this.aceEnabled()?this.setEditorAce(a):this.setEditorTextarea(a),this.$editor},focus:function(){if(this.aceEnabled()){this.$editor.focus();var a=this.$editor.session.getLength();this.$editor.gotoLine(a,this.$editor.session.getLine(a-1).length)}else this.$editor.focus()},setEditorAce:function(a){this.$editor||(this.$editor=ace.edit(this.sel),this.$editor.getSession().setMode("ace/mode/css"),this.$editor.setTheme("ace/theme/chrome")),this.$editor.setValue(a),this.$editor.clearSelection(),this.$editor.focus();var b=this.$editor.getSession().getLength();return this.$editor.gotoLine(b,this.$editor.getSession().getLine(b-1).length),this.$editor},setEditorTextarea:function(b){return this.$editor||(this.$editor=a("<textarea></textarea>").css({width:"100%",height:"100%",minHeight:"300px"}),a("#"+this.sel).empty().append(this.$editor).css({overflowLeft:"hidden",width:"100%",height:"100%"})),this.$editor.val(b),this.$editor.focus(),this.$editor.parent().css({overflow:"auto"}),this.$editor},setSize:function(){var b=a(window).height()-380;this.aceEnabled()?a("#"+this.sel).css({height:b,minHeight:b}):(this.$editor.parent().css({height:b,minHeight:b}),this.$editor.css({height:"98%",width:"98%"}))},setSizeResizable:function(){var b,c,d,e=a("#"+this.sel);c=e.offset().top,d=vc.active_panel.$el.find('[data-vc-ui-element="panel-footer"]').offset().top,b=d-c-70,this.aceEnabled()?e.css({height:b,minHeight:b}):(this.$editor.parent().css({height:b,minHeight:b}),this.$editor.css({height:"98%",width:"98%"}))},getEditor:function(){return this.$editor},getValue:function(){return this.aceEnabled()?this.$editor.getValue():this.$editor.val()}})}(window.jQuery),function(a,b,c){"use strict";function d(a){var b=this.extend(a);return b.prototype._vcUIEventsHooks||(b.prototype._vcUIEventsHooks=[]),a.uiEvents&&b.prototype._vcUIEventsHooks.push(a.uiEvents),b}b.View.vcExtendUI=d,c.View=b.View.extend({delegateEvents:function(){c.View.__super__.delegateEvents.call(this),this._vcUIEventsHooks&&this._vcUIEventsHooks.length&&a.each(this._vcUIEventsHooks,function(b){a.isObject(b)&&a.each(b,function(b,c){a.isString(b)&&a.each(b.split(/\s+/),function(a){this.on(c,this[a],this)},this)},this)},this)}})}(_,Backbone,vc),function(a){"use strict";_.isUndefined(window.vc)&&(window.vc={}),vc.showSpinner=function(){a("#vc_logo").addClass("vc_ui-wp-spinner")},vc.hideSpinner=function(){a("#vc_logo").removeClass("vc_ui-wp-spinner")},a(document).ajaxSend(function(a,b,c){c&&c.data&&"string"==typeof c.data&&c.data.match(/vc_inline=true/)&&vc.showSpinner()}).ajaxStop(function(){vc.hideSpinner()}),vc.active_panel=!1,vc.closeActivePanel=function(a){return!!this.active_panel&&void(a&&vc.active_panel.model&&vc.active_panel.model.get("id")===a.get("id")?(vc.active_panel.model=null,this.active_panel.hide()):a||(vc.active_panel.model=null,this.active_panel.hide()))},vc.activePanelName=function(){return this.active_panel&&this.active_panel.panelName?this.active_panel.panelName:null},vc.updateSettingsBadge=function(){var b=vc.$custom_css.val();b&&""!==b.trim()?a("#vc_post-css-badge").show():a("#vc_post-css-badge").hide()},vc.ModalView=Backbone.View.extend({message_box_timeout:!1,events:{"hidden.bs.modal":"hide","shown.bs.modal":"shown"},initialize:function(){_.bindAll(this,"setSize","hide")},setSize:function(){var b=a(window).height()-150;this.$content.css("maxHeight",b),this.trigger("setSize")},render:function(){return a(window).bind("resize.ModalView",this.setSize),this.setSize(),vc.closeActivePanel(),this.$el.modal("show"),this},showMessage:function(b,c){this.message_box_timeout&&this.$el.find(".vc_message").remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var d=a('<div class="vc_message type-'+c+'"></div>');this.$el.find(".vc_modal-body").prepend(d),d.text(b).fadeIn(),this.message_box_timeout=window.setTimeout(function(){d.remove()},6e3)},hide:function(){a(window).unbind("resize.ModalView")},shown:function(){}}),vc.element_start_index=0,vc.AddElementBlockView=vc.ModalView.extend({el:a("#vc_add-element-dialog"),prepend:!1,builder:"",events:{"click .vc_shortcode-link":"createElement","keyup #vc_elements_name_filter":"filterElements","hidden.bs.modal":"hide","show.bs.modal":"buildFiltering","click .wpb-content-layouts-container [data-filter]":"filterElements","shown.bs.modal":"shown"},buildFiltering:function(){this.do_render=!1;var b,c,d;b='[data-vc-ui-element="add-element-button"]',c=this.model?this.model.get("shortcode"):"vc_column",d=this._getNotIn(c),a("#vc_elements_name_filter").val(""),this.$content.addClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter","*");var e=vc.getMapped(c),f=!(!c||_.isUndefined(e.as_parent))&&e.as_parent;if(_.isObject(f)){var g=[];_.isString(f.only)&&g.push(_.reduce(f.only.replace(/\s/,"").split(","),function(a,b){return a+(_.isEmpty(a)?"":",")+'[data-element="'+b.trim()+'"]'},"")),_.isString(f.except)&&g.push(_.reduce(f.except.replace(/\s/,"").split(","),function(a,b){return a+':not([data-element="'+b.trim()+'"])'},"")),b+=g.join(",")}else d&&(b=d);c&&!_.isUndefined(e.allowed_container_element)&&(e.allowed_container_element?_.isString(e.allowed_container_element)&&(b+=":not([data-is-container=true]), [data-element="+e.allowed_container_element+"]"):b+=":not([data-is-container=true])"),this.$buttons.removeClass("vc_visible").addClass("vc_inappropriate"),a(b,this.$content).removeClass("vc_inappropriate").addClass("vc_visible"),this.hideEmptyFilters()},hideEmptyFilters:function(){this.$el.find(".vc_filter-content-elements .active").removeClass("active"),this.$el.find(".vc_filter-content-elements > :first").addClass("active");var b=this;this.$el.find("[data-filter]").each(function(){a(a(this).data("filter")+".vc_visible:not(.vc_inappropriate)",b.$content).length?a(this).parent().show():a(this).parent().hide()})},render:function(b,c){return this.builder=new vc.ShortcodesBuilder,this.prepend=!!_.isBoolean(c)&&c,this.place_after_id=!!_.isString(c)&&c,this.model=!!_.isObject(b)&&b,this.$content=this.$el.find('[data-vc-ui-element="panel-add-element-list"]'),this.$buttons=a('[data-vc-ui-element="add-element-button"]',this.$content),this.preventDoubleExecution=!1,vc.AddElementBlockView.__super__.render.call(this)},hide:function(){this.do_render&&(this.show_settings&&this.showEditForm(),this.exit())},showEditForm:function(){vc.edit_element_block_view.render(this.builder.last())},exit:function(){this.builder.render()},createElement:function(b){var c,d,e,f,g,h,i,j;if(!this.preventDoubleExecution){this.preventDoubleExecution=!0,this.do_render=!0,b.preventDefault(),c=a(b.currentTarget),d=c.data("tag"),e={},"undefined"!=typeof window.vc_settings_presets.vc_row&&(e=_.extend(e,window.vc_settings_presets.vc_row)),g={},"undefined"!=typeof window.vc_settings_presets.vc_row_inner&&(g=_.extend(g,window.vc_settings_presets.vc_row_inner)),f={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column&&(f=_.extend(f,window.vc_settings_presets.vc_column)),!1===this.model&&"vc_row"!==d?(this.builder.create({shortcode:"vc_row",params:e}).create({shortcode:"vc_column",parent_id:this.builder.lastID(),params:f}),this.model=this.builder.last()):!1!==this.model&&"vc_row"===d&&(d+="_inner");var k={shortcode:d,parent_id:!!this.model&&this.model.get("id"),params:"vc_row_inner"===d?g:{}};if(this.prepend){k.order=0;var l=vc.shortcodes.findWhere({parent_id:this.model.get("id")});l&&(k.order=l.get("order")-1),vc.activity="prepend"}else this.place_after_id&&(k.place_after_id=this.place_after_id);for(this.builder.create(k),j=this.builder.models.length-1;j>=0;j--)i=this.builder.models[j].get("shortcode"),"undefined"!=typeof window.vc_settings_presets[i]&&(this.builder.models[j].attributes.params=_.extend(this.builder.models[j].attributes.params,window.vc_settings_presets[i]));"vc_row"===d?this.builder.create({shortcode:"vc_column",parent_id:this.builder.lastID(),params:f}):"vc_row_inner"===d&&(f={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column_inner&&(f=_.extend(f,window.vc_settings_presets.vc_column_inner)),this.builder.create({shortcode:"vc_column_inner",parent_id:this.builder.lastID(),params:f}));var m=vc.getMapped(d);if(_.isString(m.default_content)&&m.default_content.length){var n=this.builder.parse({},m.default_content,this.builder.last().toJSON());_.each(n,function(a){a.default_content=!0,this.builder.create(a)},this)}this.show_settings=!(_.isBoolean(m.show_settings_on_create)&&!1===m.show_settings_on_create),h=this,this.$el.one("hidden.bs.modal",function(){h.preventDoubleExecution=!1}).modal("hide")}},_getNotIn:_.memoize(function(a){var b=_.reduce(vc.map,function(b,c){var d=_.isEmpty(b)?"":",";return _.isObject(c.as_child)?(_.isString(c.as_child.only)&&(_.contains(c.as_child.only.replace(/\s/,"").split(","),a)||(b+=d+"[data-element="+c.base+"]")),_.isString(c.as_child.except)&&_.contains(c.as_child.except.replace(/\s/,"").split(","),a)&&(b+=d+"[data-element="+c.base+"]")):!1===c.as_child&&(b+=d+"[data-element="+c.base+"]"),b},"");return'[data-vc-ui-element="add-element-button"]:not('+b+")"}),filterElements:function(b){b.stopPropagation(),b.preventDefault();var c=a(b.currentTarget),d='[data-vc-ui-element="add-element-button"]',e=a("#vc_elements_name_filter").val();if(this.$content.removeClass("vc_filter-all"),c.is("[data-filter]")){a(".wpb-content-layouts-container .isotope-filter .active",this.$content).removeClass("active"),c.parent().addClass("active");var f=c.data("filter");d+=f,"*"===f?this.$content.addClass("vc_filter-all"):this.$content.removeClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter",f.replace(".js-category-","")),a("#vc_elements_name_filter").val("")}else 0<e.length?(d+=":containsi('"+e+"'):not('.vc_element-deprecated')",a(".wpb-content-layouts-container .isotope-filter .active",this.$content).removeClass("active"),this.$content.attr("data-vc-ui-filter","name:"+e)):e.length||(a('.wpb-content-layouts-container .isotope-filter [data-filter="*"]').parent().addClass("active"),this.$content.attr("data-vc-ui-filter","*"),this.$content.addClass("vc_filter-all"));a(".vc_visible",this.$content).removeClass("vc_visible"),a(d,this.$content).addClass("vc_visible")},shown:function(){vc.is_mobile||a("#vc_elements_name_filter").focus()}}),vc.AddElementBlockViewBackendEditor=vc.AddElementBlockView.extend({render:function(b,c){return this.prepend=!!_.isBoolean(c)&&c,this.place_after_id=!!_.isString(c)&&c,this.model=!!_.isObject(b)&&b,this.$content=this.$el.find('[data-vc-ui-element="panel-add-element-list"]'),this.$buttons=a('[data-vc-ui-element="add-element-button"]',this.$content),vc.AddElementBlockView.__super__.render.call(this)},createElement:function(b){var c,d,e,f,g,h;if(!this.preventDoubleExecution){this.preventDoubleExecution=!0;var i,j,k;_.isObject(b)&&b.preventDefault(),this.do_render=!0;var l=a(b.currentTarget).data("tag");e={},"undefined"!=typeof window.vc_settings_presets.vc_row&&(e=_.extend(e,window.vc_settings_presets.vc_row)),f={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column&&(f=_.extend(f,window.vc_settings_presets.vc_column)),!1===this.model?(k=vc.shortcodes.create({shortcode:"vc_row",params:e}),j=vc.shortcodes.create({shortcode:"vc_column",params:f,parent_id:k.id,root_id:k.id}),i="vc_row"!==l?vc.shortcodes.create({shortcode:l,parent_id:j.id,root_id:k.id}):k):"vc_row"===l?(g={},"undefined"!=typeof window.vc_settings_presets.vc_row_inner&&(g=_.extend(g,window.vc_settings_presets.vc_row_inner)),h={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column_inner&&(h=_.extend(h,window.vc_settings_presets.vc_column_inner)),k=vc.shortcodes.create({shortcode:"vc_row_inner",params:g,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),i=vc.shortcodes.create({shortcode:"vc_column_inner",params:h,parent_id:k.id,root_id:k.id})):i=vc.shortcodes.create({shortcode:l,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder(),root_id:this.model.get("root_id")}),this.show_settings=!(_.isBoolean(vc.getMapped(l).show_settings_on_create)&&!1===vc.getMapped(l).show_settings_on_create),this.model=i,d=this.model.get("shortcode"),"undefined"!=typeof window.vc_settings_presets[d]&&(this.model.attributes.params=_.extend(this.model.attributes.params,window.vc_settings_presets[d])),c=this,this.$el.one("hidden.bs.modal",function(){c.preventDoubleExecution=!1}).modal("hide")}},showEditForm:function(){vc.edit_element_block_view.render(this.model)},exit:function(){},getFirstPositionIndex:function(){return vc.element_start_index-=1,vc.element_start_index}}),vc.PanelView=vc.View.extend({mediaSizeClassPrefix:"vc_media-",customMediaQuery:!0,panelName:"panel",draggable:!1,$body:!1,$tabs:!1,$content:!1,events:{"click [data-dismiss=panel]":"hide","mouseover [data-transparent=panel]":"addOpacity","click [data-transparent=panel]":"toggleOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .vc_panel-tabs-link":"changeTab"},_vcUIEventsHooks:[{resize:"setResize"}],options:{startTab:0},clicked:!1,showMessageDisabled:!0,initialize:function(){this.clicked=!1,this.$el.removeClass("vc_panel-opacity"),this.$body=a("body"),this.$content=this.$el.find(".vc_panel-body"),_.bindAll(this,"setSize","fixElContainment","changeTab","setTabsSize"),this.on("show",this.setSize,this),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this)},toggleOpacity:function(){this.clicked=!this.clicked},addOpacity:function(){!this.clicked&&this.$el.addClass("vc_panel-opacity")},removeOpacity:function(){!this.clicked&&this.$el.removeClass("vc_panel-opacity")},message_box_timeout:!1,init:function(){},render:function(){return this.trigger("render"),this.trigger("afterRender"),this},show:function(){if(!this.$el.hasClass("vc_active")){vc.closeActivePanel(),this.init(),vc.active_panel=this,this.clicked=!1,this.$el.removeClass("vc_panel-opacity");var b=this.$el.find(".vc_panel-tabs");b.length&&(this.$tabs=b,this.setTabs()),this.$el.addClass("vc_active"),this.draggable?this.initDraggable():a(window).trigger("resize"),this.fixElContainment(),this.trigger("show")}},hide:function(a){a&&a.preventDefault(),this.model&&(this.model=null),vc.active_panel=!1,this.$el.removeClass("vc_active")},content:function(){return this.$el.find(".panel-body")},setResize:function(){this.customMediaQuery&&this.setMediaSizeClass()},setMediaSizeClass:function(){var a,b;a=this.$el.width(),b={xs:!0,sm:!1,md:!1,lg:!1},525<=a&&(b.sm=!0),745<=a&&(b.md=!0),945<=a&&(b.lg=!0),_.each(b,function(a,b){a?this.$el.addClass(this.mediaSizeClassPrefix+b):this.$el.removeClass(this.mediaSizeClassPrefix+b)},this)},fixElContainment:function(){this.$body||(this.$body=a("body"));var b=this.$el.width(),c=this.$body.width(),d=this.$body.height(),e=[-b+20,0,c-20,d-30],f=this.$el.position(),g={};f.left<e[0]&&(g.left=e[0]),0>f.top&&(g.top=0),f.left>e[2]&&(g.left=e[2]),f.top>e[3]&&(g.top=e[3]),this.$el.css(g),this.trigger("fixElContainment"),this.setSize()},initDraggable:function(){this.$el.draggable({iframeFix:!0,handle:".vc_panel-heading",start:this.fixElContainment,stop:this.fixElContainment}),this.draggable=!0},setSize:function(){this.trigger("setSize")},setTabs:function(){this.$tabs.length&&(this.$tabs.find(".vc_panel-tabs-control").removeClass("vc_active").eq(this.options.startTab).addClass("vc_active"),this.$tabs.find(".vc_panel-tab").removeClass("vc_active").eq(this.options.startTab).addClass("vc_active"),window.setTimeout(this.setTabsSize,100))},setTabsSize:function(){this.$tabs&&this.$tabs.parents(".vc_with-tabs.vc_panel-body").css("margin-top",this.$tabs.find(".vc_panel-tabs-menu").outerHeight())},changeTab:function(b){if(b&&b.preventDefault&&b.preventDefault(),b.target&&this.$tabs){var c=a(b.target);this.$tabs.find(".vc_active").removeClass("vc_active"),c.parent().addClass("vc_active"),this.$el.find(c.data("target")).addClass("vc_active"),window.setTimeout(this.setTabsSize,100)}},showMessage:function(b,c){if(this.showMessageDisabled)return!1;this.message_box_timeout&&this.$el.find(".vc_panel-message").remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var d=a('<div class="vc_panel-message type-'+c+'"></div>').appendTo(this.$el.find(".vc_ui-panel-content-container"));d.text(b).fadeIn(),this.message_box_timeout=window.setTimeout(function(){d.remove()},6e3)},isVisible:function(){return this.$el.is(":visible")},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity")}}),vc.PostSettingsPanelView=vc.PanelView.extend({events:{"click [data-save=true]":"save","click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity"},saved_css_data:"",saved_title:"",$title:!1,editor:!1,post_settings_editor:!1,initialize:function(){vc.$custom_css=a("#vc_post-custom-css"),this.saved_css_data=vc.$custom_css.val(),this.saved_title=vc.title,this.initEditor(),this.$body=a("body"),_.bindAll(this,"setSize","fixElContainment"),this.on("show",this.setSize,this),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this)},initEditor:function(){this.editor=new Vc_postSettingsEditor},render:function(){return this.trigger("render"),this.$title=this.$el.find("#vc_page-title-field"),this.$title.val(vc.title),this.setEditor(),this.trigger("afterRender"),this},setEditor:function(){this.editor.setEditor(vc.$custom_css.val())},setSize:function(){this.editor.setSize(),this.trigger("setSize")},save:function(){if(this.$title){var a=this.$title.val();a!=vc.title&&vc.frame.setTitle(a)}this.setAlertOnDataChange(),vc.$custom_css.val(this.editor.getValue()),vc.frame_window&&vc.frame_window.vc_iframe.loadCustomCss(vc.$custom_css.val()),vc.updateSettingsBadge(),this.showMessage(window.i18nLocale.css_updated,"success"),this.trigger("save")},setAlertOnDataChange:function(){this.saved_css_data!==this.editor.getValue()?vc.setDataChanged():this.$title&&this.saved_title!==this.$title.val()&&vc.setDataChanged()}}),vc.PostSettingsPanelViewBackendEditor=vc.PostSettingsPanelView.extend({render:function(){return this.trigger("render"),this.setEditor(),this.trigger("afterRender"),this},setAlertOnDataChange:function(){vc.saved_custom_css!==this.editor.getValue()&&window.tinymce&&(window.switchEditors.go("content","tmce"),window.setTimeout(function(){window.tinymce.get("content").isNotDirty=!1},1e3))},save:function(){vc.PostSettingsPanelViewBackendEditor.__super__.save.call(this),this.hide()}}),vc.TemplatesEditorPanelView=vc.PanelView.extend({events:{"click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .wpb_remove_template":"removeTemplate","click [data-template_id]":"loadTemplate","click [data-template_name]":"loadDefaultTemplate","click #vc_template-save":"saveTemplate"},render:function(){this.trigger("render"),this.$name=a("#vc_template-name"),this.$list=a("#vc_template-list");var b=a("#vc_tabs-templates");return b.find(".vc_edit-form-tab-control").removeClass("vc_active").eq(0).addClass("vc_active"),b.find('[data-vc-ui-element="panel-edit-element-tab"]').removeClass("vc_active").eq(0).addClass("vc_active"),b.find(".vc_edit-form-link").click(function(c){c.preventDefault();var d=a(this);b.find(".vc_active").removeClass("vc_active"),d.parent().addClass("vc_active"),a(d.attr("href")).addClass("vc_active")}),this.trigger("afterRender"),this},removeTemplate:function(b){b&&b.preventDefault();var c=a(b.currentTarget),d=c.closest('[data-vc-ui-element="template-title"]').text(),e=confirm(window.i18nLocale.confirm_deleting_template.replace("{template_name}",d));e&&(c.closest('[data-vc-ui-element="template"]').remove(),this.$list.html(window.i18nLocale.loading),a.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_delete_template",template_id:c.attr("rel"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(a){this.$list.html(a)}))},loadTemplate:function(b){b&&b.preventDefault();var c=a(b.currentTarget);a.ajax({type:"POST",url:vc.frame_window.location.href,data:{action:"vc_frontend_template",template_id:c.data("template_id"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(b){var c,d;_.each(a(b),function(a){if("vc_template-data"===a.id)try{d=JSON.parse(a.innerHTML)}catch(a){vcConsoleLog(a,"catching template data error")}"vc_template-html"===a.id&&(c=a.innerHTML)}),c&&d&&vc.builder.buildFromTemplate(c,d),this.showMessage(window.i18nLocale.template_added,"success"),vc.closeActivePanel()})},ajaxData:function(a){return{action:"vc_frontend_default_template",template_name:a.data("template_name"),vc_inline:!0,_vcnonce:window.vcAdminNonce}},loadDefaultTemplate:function(b){b&&b.preventDefault();var c=a(b.currentTarget);a.ajax({type:"POST",url:vc.frame_window.location.href,data:this.ajaxData(c),context:this}).done(function(b){var c,d;_.each(a(b),function(a){if("vc_template-data"===a.id)try{d=JSON.parse(a.innerHTML)}catch(a){vcConsoleLog(a,"catching template data error")}"vc_template-html"===a.id&&(c=a.innerHTML)}),c&&d&&vc.builder.buildFromTemplate(c,d),this.showMessage(window.i18nLocale.template_added,"success")})},saveTemplate:function(a){a.preventDefault();var b,c,d=this.$name.val();if(_.isString(d)&&d.length){if(c=this.getPostContent(),!c.trim().length)return this.showMessage(window.i18nLocale.template_is_empty,"error"),!1;b={action:"wpb_save_template",template:c,template_name:d,frontend:!0,vc_inline:!0,_vcnonce:window.vcAdminNonce},this.$name.val(""),this.showMessage(window.i18nLocale.template_save,"success"),this.reloadTemplateList(b)}else this.showMessage(window.i18nLocale.please_enter_templates_name,"error")},reloadTemplateList:function(a){this.$list.html(window.i18nLocale.loading).load(window.ajaxurl,a)},getPostContent:function(){return vc.builder.getContent()}}),vc.TemplatesEditorPanelViewBackendEditor=vc.TemplatesEditorPanelView.extend({ajaxData:function(a){return{action:"vc_backend_template",template_id:a.attr("data-template_id"),vc_inline:!0,_vcnonce:window.vcAdminNonce}},loadTemplate:function(b){b.preventDefault();var c=a(b.currentTarget);a.ajax({type:"POST",url:window.ajaxurl,data:this.ajaxData(c),context:this}).done(function(a){
_.each(vc.filters.templates,function(b){a=b(a)}),vc.storage.append(a),vc.shortcodes.fetch({reset:!0}),vc.closeActivePanel()})},loadDefaultTemplate:function(b){b.preventDefault();var c=a(b.currentTarget);a.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_backend_default_template",template_name:c.attr("data-template_name"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(a){_.each(vc.filters.templates,function(b){a=b(a)}),vc.storage.append(a),vc.shortcodes.fetch({reset:!0})})},getPostContent:function(){return vc.storage.getContent()}}),vc.TemplatesPanelViewBackend=vc.PanelView.extend({$name:!1,$list:!1,template_load_action:"vc_backend_load_template",templateLoadPreviewAction:"vc_load_template_preview",save_template_action:"vc_save_template",delete_template_action:"vc_delete_template",appendedTemplateType:"my_templates",appendedTemplateCategory:"my_templates",appendedCategory:"my_templates",appendedClass:"my_templates",loadUrl:window.ajaxurl,events:a.extend(vc.PanelView.prototype.events,{"click .vc_template-save-btn":"saveTemplate","click [data-template_id] [data-template-handler]":"loadTemplate","click .vc_template-delete-icon":"removeTemplate"}),initialize:function(){_.bindAll(this,"checkInput","saveTemplate"),vc.TemplatesPanelViewBackend.__super__.initialize.call(this)},render:function(){return this.$el.css("left",(a(window).width()-this.$el.width())/2),this.$name=this.$el.find('[data-js-element="vc-templates-input"]'),this.$name.off("keypress").on("keypress",this.checkInput),this.$list=this.$el.find(".vc_templates-list-my_templates"),vc.TemplatesPanelViewBackend.__super__.render.call(this)},saveTemplate:function(a){a&&a.preventDefault&&a.preventDefault();var b,c,d=this.$name.val(),e=this;return _.isString(d)&&d.length?(c=this.getPostContent(),c.trim().length?(b={action:this.save_template_action,template:c,template_name:d,vc_inline:!0,_vcnonce:window.vcAdminNonce},void this.setButtonMessage(void 0,void 0,!0).reloadTemplateList(b,function(){e.$name.val("").change()},function(){e.showMessage(window.i18nLocale.template_save_error,"error"),e.clearButtonMessage()})):(this.showMessage(window.i18nLocale.template_is_empty,"error"),!1)):(this.showMessage(window.i18nLocale.please_enter_templates_name,"error"),!1)},checkInput:function(a){if(13===a.which)return this.saveTemplate(),!1},removeTemplate:function(b){b&&b.preventDefault(),b.stopPropagation();var c=a(b.target),d=c.closest("[data-template_id]"),e=d.find('[data-vc-ui-element="template-title"]').text(),f=confirm(window.i18nLocale.confirm_deleting_template.replace("{template_name}",e));if(f){var g=d.data("template_id"),h=d.data("template_type"),i=d.data("template_action");d.remove(),a.ajax({type:"POST",url:window.ajaxurl,data:{action:i?i:this.delete_template_action,template_id:g,template_type:h,vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(){this.showMessage(window.i18nLocale.template_removed,"success"),vc.events.trigger("templates:delete",{id:g,type:h})})}},reloadTemplateList:function(b,c,d){var e=this;a.ajax({type:"POST",url:window.ajaxurl,data:b,context:this}).done(function(b){e.filter=!1,e.$list||(e.$list=e.$el.find(".vc_templates-list-my_templates")),e.$list.prepend(a(b)),"function"==typeof c&&c(b)}).error("function"==typeof d?d:function(){})},getPostContent:function(){return vc.shortcodes.stringify("template")},loadTemplate:function(b){b.preventDefault(),b.stopPropagation();var c=a(b.target).closest("[data-template_id][data-template_type]");a.ajax({type:"POST",url:this.loadUrl,data:{action:this.template_load_action,template_unique_id:c.data("template_id"),template_type:c.data("template_type"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(this.renderTemplate)},renderTemplate:function(a){var b;_.each(vc.filters.templates,function(b){a=b(a)}),b=vc.storage.parseContent({},a),_.each(b,function(a){vc.shortcodes.create(a)}),vc.closeActivePanel()},buildTemplatePreview:function(b){b&&b.preventDefault&&b.preventDefault();try{var c,d=a(b.currentTarget),e=d.closest("[data-template_id]");if(e.hasClass("vc_active")||e.hasClass("vc_loading"))d.vcAccordion("collapseTemplate");else{var f=e.find("[data-js-content]"),g=f.children().length>0;if(this.$content=f,this.$content.find("iframe").length)return d.vcAccordion("collapseTemplate"),!0;var h=this;d.vcAccordion("collapseTemplate",function(){var b=e.data("template_id"),f=e.data("template_type");if(b&&!g){var i="?";window.ajaxurl.indexOf("?")>-1&&(i="&"),c=window.ajaxurl+i+a.param({action:h.templateLoadPreviewAction,template_unique_id:b,template_type:f,vc_inline:!0,post_id:a("#post_ID").val(),_vcnonce:window.vcAdminNonce}),d.find("i").addClass("vc_ui-wp-spinner"),h.$content.html('<iframe style="width: 100%;" data-vc-template-preview-frame="'+b+'"></iframe>');var j=h.$content.find("[data-vc-template-preview-frame]");j.attr("src",c),e.addClass("vc_loading"),j.load(function(){e.removeClass("vc_loading"),d.find("i").removeClass("vc_ui-wp-spinner")})}})}}catch(a){window.console&&window.console.error&&window.console.error(a),this.showMessage("Failed to build preview","error")}},setTemplatePreviewSize:function(a){var b=this.$content.find("iframe");b.length>0&&(b=b[0],void 0===a&&(b.height=b.contentWindow.document.body.offsetHeight,a=b.contentWindow.document.body.scrollHeight),b.height=a+"px")}}),vc.TemplatesPanelViewFrontend=vc.TemplatesPanelViewBackend.extend({template_load_action:"vc_frontend_load_template",loadUrl:!1,initialize:function(){this.loadUrl=vc.$frame.attr("src"),vc.TemplatesPanelViewFrontend.__super__.initialize.call(this)},render:function(){return vc.TemplatesPanelViewFrontend.__super__.render.call(this)},renderTemplate:function(b){var c,d;_.each(a(b),function(a){if("vc_template-data"===a.id)try{d=JSON.parse(a.innerHTML)}catch(a){vcConsoleLog(a)}"vc_template-html"===a.id&&(c=a.innerHTML)}),c&&d&&vc.builder.buildFromTemplate(c,d)?this.showMessage(window.i18nLocale.template_added_with_id,"error"):this.showMessage(window.i18nLocale.template_added,"success"),vc.closeActivePanel()}}),vc.RowLayoutEditorPanelView=vc.PanelView.extend({events:{"click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .vc_layout-btn":"setLayout","click #vc_row-layout-update":"updateFromInput"},_builder:!1,render:function(b){return this.$input=a("#vc_row-layout"),b&&(this.model=b),this.addCurrentLayout(),this.resetMinimize(),vc.column_trig_changes=!0,this},builder:function(){return this._builder||(this._builder=new vc.ShortcodesBuilder),this._builder},addCurrentLayout:function(){vc.shortcodes.sort();var a=_.map(vc.shortcodes.where({parent_id:this.model.get("id")}),function(a){var b=a.getParam("width");return b?b:"1/1"},"",this).join(" + ");this.$input.val(a)},isBuildComplete:function(){return this.builder().isBuildComplete()},setLayout:function(b){if(b&&b.preventDefault(),!this.isBuildComplete())return!1;var c=a(b.currentTarget),d=c.attr("data-cells"),e=this.model.view.convertRowColumns(d,this.builder());this.$input.val(e.join(" + "))},updateFromInput:function(a){if(a&&a.preventDefault(),!this.isBuildComplete())return!1;var b,c=this.$input.val();!1!==(b=this.validateCellsList(c))?this.model.view.convertRowColumns(b,this.builder()):window.alert(window.i18nLocale.wrong_cells_layout)},validateCellsList:function(a){var b,c,d,e=[],f=a.replace(/\s/g,"").split("+"),g=_.reduce(_.map(f,function(a){if(a.match(/^[vc\_]{0,1}span\d{1,2}$/)){var f=vc_convert_column_span_size(a);return!1===f?1e3:(b=f.split(/\//),e.push(b[0]+""+b[1]),12*parseInt(b[0],10)/parseInt(b[1],10))}return a.match(/^[1-9]|1[0-2]\/[1-9]|1[0-2]$/)?(b=a.split(/\//),c=parseInt(b[0],10),d=parseInt(b[1],10),0!==12%d||c>d?1e3:(e.push(c+""+b[1]),12*c/d)):1e3}),function(a,b){return b+=a},0);return!(1e3<=g)&&e.join("_")}}),vc.RowLayoutEditorPanelViewBackend=vc.RowLayoutEditorPanelView.extend({builder:function(){return this.builder||(this.builder=vc.storage),this.builder},isBuildComplete:function(){return!0},setLayout:function(b){b&&b.preventDefault();var c=a(b.currentTarget),d=c.attr("data-cells"),e=this.model.view.convertRowColumns(d);this.$input.val(e.join(" + "))}}),a(window).on("orientationchange",function(){vc.active_panel&&vc.active_panel.$el.css({top:"",left:"auto",height:"auto",width:"auto"})}),a(window).bind("resize.fixElContainment",function(){vc.active_panel&&vc.active_panel.fixElContainment&&vc.active_panel.fixElContainment()}),a("body").on("keyup change input","[data-vc-disable-empty]",function(){var b=a(this),c=a(b.data("vcDisableEmpty"));b.val().length?c.removeProp("disabled"):c.prop("disabled",!0)})}(window.jQuery),+function(a){"use strict";var b,c,d;b=function(b,c){var d=this;this.options=c,this.$element=a(b),this.$dropdownContainer=this.$element.find(this.options.dropdownContainerSelector),this.$dropdown=this.$dropdownContainer.find(this.options.dropdownSelector),this.options.delayInit?(d.$element.addClass(this.options.initializingClass),setTimeout(function(){d.options.autoRefresh||d.refresh(),d.moveTabs(),d.$element.removeClass(d.options.initializingClass)},d.options.delayInitTime)):(this.options.autoRefresh||this.refresh(),this.moveTabs()),a(window).on("resize",a.proxy(this.moveTabs,this)),this.$dropdownContainer.on("click.vc.tabsLine",a.proxy(this.checkDropdownContainerActive,this))},b.DEFAULTS={initializingClass:"vc_initializing",delayInit:!1,delayInitTime:1e3,activeClass:"vc_active",visibleClass:"vc_visible",dropdownContainerSelector:'[data-vc-ui-element="panel-tabs-line-toggle"]',dropdownSelector:'[data-vc-ui-element="panel-tabs-line-dropdown"]',tabSelector:'>li:not([data-vc-ui-element="panel-tabs-line-toggle"])',dropdownTabSelector:"li",freeSpaceOffset:5,autoRefresh:!1,showDevInfo:!1},b.prototype.refresh=function(){var b,c=this;return c.tabs=[],c.dropdownTabs=[],c.$element.find(c.options.tabSelector).each(function(){c.tabs.push({$tab:a(this),width:a(this).outerWidth()})}),c.$dropdown.find(c.options.dropdownTabSelector).each(function(){var b=a(this).clone().css({visibility:"hidden",position:"fixed"});b.appendTo(c.$element),c.dropdownTabs.push({$tab:a(this),width:b.outerWidth()}),b.remove(),a(this).on("click",c.options.onTabClick)}),"function"==typeof this.options.onTabClick&&(b=function(b){"undefined"==typeof b.$tab.data("tabClickSet")&&(b.$tab.on("click",a.proxy(c.options.onTabClick,b.$tab)),b.$tab.data("tabClickSet",!0))},c.tabs.map(b),c.dropdownTabs.map(b)),this},b.prototype.moveLastToDropdown=function(){var a;return this.tabs.length&&(a=this.tabs.pop(),a.$tab.prependTo(this.$dropdown),this.dropdownTabs.unshift(a)),this.checkDropdownContainer(),this},b.prototype.moveFirstToContainer=function(){var a;return this.dropdownTabs.length&&(a=this.dropdownTabs.shift(),a.$tab.appendTo(this.$element),this.tabs.push(a)),this.checkDropdownContainer(),this},b.prototype.getTabsWidth=function(){var a=0;return this.tabs.forEach(function(b){a+=b.width}),a},b.prototype.isDropdownContainerVisible=function(){return this.$dropdownContainer.hasClass(this.options.visibleClass)},b.prototype.getFreeSpace=function(){var a=this.$element.width()-this.getTabsWidth()-this.options.freeSpaceOffset;return this.isDropdownContainerVisible()&&(a-=this.$dropdownContainer.outerWidth(),1===this.dropdownTabs.length&&0<=a-this.dropdownTabs[0].width+this.$dropdownContainer.outerWidth()&&(a+=this.$dropdownContainer.outerWidth())),a},b.prototype.moveTabsToDropdown=function(){for(var a=this.tabs.length,b=a-1;0<=b;b--){if(!(0>this.getFreeSpace()))return this;this.moveLastToDropdown()}return this},b.prototype.moveDropdownToTabs=function(){for(var a=this.dropdownTabs.length,b=0;b<a;b++){if(!(0<=this.getFreeSpace()-this.dropdownTabs[0].width))return this;this.moveFirstToContainer()}return this},b.prototype.showDropdownContainer=function(){return this.$dropdownContainer.addClass(this.options.visibleClass),this},b.prototype.hideDropdownContainer=function(){return this.$dropdownContainer.removeClass(this.options.visibleClass),this},b.prototype.activateDropdownContainer=function(){return this.$dropdownContainer.addClass(this.options.activeClass),this},b.prototype.deactivateDropdownContainer=function(){return this.$dropdownContainer.removeClass(this.options.activeClass),this},b.prototype.checkDropdownContainerActive=function(){return this.$dropdown.find("."+this.options.activeClass+":first").length?this.activateDropdownContainer():this.deactivateDropdownContainer(),this},b.prototype.checkDropdownContainer=function(){return this.dropdownTabs.length?this.showDropdownContainer():this.hideDropdownContainer(),this.checkDropdownContainerActive(),this},b.prototype.moveTabs=function(){return this.options.autoRefresh&&this.refresh(),this.checkDropdownContainer(),this.moveTabsToDropdown(),this.moveDropdownToTabs(),this.options.showDevInfo&&this.showDevInfo(),this},b.prototype.showDevInfo=function(){var b=a("#vc-ui-tabs-line-dev-info");b.length&&(this.$devBlock=b),"undefined"==typeof this.$devBlock&&(this.$devBlock=a('<div id="vc-ui-tabs-line-dev-info" />').css({position:"fixed",right:"40px",top:"40px",padding:"7px 12px",border:"1px solid rgba(0, 0, 0, .2)",background:"rgba(0, 0, 0, .7)",color:"#0a0","border-radius":"5px","font-family":"tahoma","font-size":"12px","z-index":1100}),this.$devBlock.appendTo("body")),"undefined"==typeof this.$devInfo&&(this.$devInfo=a("<div />").css({"margin-bottom":"7px","padding-bottom":"7px","border-bottom":"1px dashed rgba(0, 200, 0, .35)"}),this.$devInfo.appendTo(this.$devBlock)),this.$devInfo.empty(),this.$devInfo.append(a("<div />").text("Tabs count: "+this.tabs.length)),this.$devInfo.append(a("<div />").text("Dropdown count: "+this.dropdownTabs.length)),this.$devInfo.append(a("<div />").text("El width: "+this.$element.width())),this.$devInfo.append(a("<div />").text("Tabs width: "+this.getTabsWidth())),this.$devInfo.append(a("<div />").text("Tabs width with dots: "+(this.getTabsWidth()+this.$dropdownContainer.outerWidth()))),this.$devInfo.append(a("<div />").text("Free space: "+this.getFreeSpace())),this.tabs.length&&this.$devInfo.append(a("<div />").text("Last tab width: "+this.tabs[this.tabs.length-1].width)),this.dropdownTabs.length&&this.$devInfo.append(a("<div />").text("First dropdown tab width: "+this.dropdownTabs[0].width))},c=function(c){return this.each(function(){var d=a(this),e=d.data("vcUiTabsLine"),f=d.data("vc.tabsLine"),g=a.extend(!0,{},b.DEFAULTS,d.data(),e,"object"==typeof c&&c),h="string"==typeof c?c:g.action;f||d.data("vc.tabsLine",f=new b(this,g)),h&&f[h]()})},d=a.fn.vcTabsLine,a.fn.vcTabsLine=c,a.fn.vcTabsLine.Constructor=b,a.fn.vcTabsLine.noConflict=function(){return a.fn.vcTabsLine=d,this},a(window).on("load",function(){a("[data-vc-ui-tabs-line]").each(function(){var b=a(this);c.call(b,b.data())})})}(window.jQuery),function(a){"use strict";vc.HelperAjax={ajax:!1,checkAjax:function(){this.ajax&&this.ajax.abort()},resetAjax:function(){this.ajax=!1}}}(window.jQuery),function(a){"use strict";vc.HelperPrompts={uiEvents:{render:"removeAllPrompts"},removeAllPrompts:function(){this.$el.find(".vc_ui-panel-content-container").removeClass("vc_ui-content-hidden"),this.$el.find(".vc_ui-prompt").remove()}}}(window.jQuery),function(a){"use strict";vc.HelperPanelViewDraggable={draggable:!0,draggableOptions:{iframeFix:!0,handle:'[data-vc-ui-element="panel-heading"]'},uiEvents:{show:"initDraggable"},initDraggable:function(){this.$el.draggable(_.extend({},this.draggableOptions,{start:this.fixElContainment,stop:this.fixElContainment}))}}}(window.jQuery),function(a){"use strict";vc.HelperPanelViewResizable={sizeInitialized:!1,uiEvents:{show:"setSavedSize initResize",tabChange:"setDefaultHeightSettings",afterMinimize:"setupOnMinimize",afterUnminimize:"initResize",fixElContainment:"saveUIPanelSizes"},setDefaultHeightSettings:function(){this.$el.css("height","auto"),this.$el.css("maxHeight","75vh")},initResize:function(){var b=this;this.$el.data("uiResizable")&&this.$el.resizable("destroy"),this.$el.resizable({minHeight:240,minWidth:380,resize:function(){b.trigger("resize")},handles:"n, e, s, w, ne, se, sw, nw",start:function(c,d){b.trigger("beforeResizeStart"),b.$el.css("maxHeight","none"),b.$el.css("height",d.size.height),a("iframe").css("pointerEvents","none"),b.trigger("afterResizeStart")},stop:function(){b.trigger("beforeResizeStop"),a("iframe").css("pointerEvents",""),b.saveUIPanelSizes(),b.trigger("afterResizeStop")}}),this.content().addClass("vc_properties-list-init"),this.trigger("resize")},setSavedSize:function(){if(this.setDefaultHeightSettings(),vc.is_mobile)return!1;var a={width:getUserSetting(this.panelName+"_vcUIPanelWidth"),left:getUserSetting(this.panelName+"_vcUIPanelLeft").replace("minus","-"),top:getUserSetting(this.panelName+"_vcUIPanelTop").replace("minus","-")};_.isEmpty(a.width)||this.$el.width(a.width),_.isEmpty(a.left)||this.$el.css("left",a.left),_.isEmpty(a.top)||this.$el.css("top",a.top),this.sizeInitialized=!0},saveUIPanelSizes:function(){if(!1===this.sizeInitialized)return!1;var a={width:this.$el.width(),left:parseInt(this.$el.css("left"),10),top:parseInt(this.$el.css("top"),10)};setUserSetting(this.panelName+"_vcUIPanelWidth",a.width),setUserSetting(this.panelName+"_vcUIPanelLeft",a.left.toString().replace("-","minus")+"px"),setUserSetting(this.panelName+"_vcUIPanelTop",a.top.toString().replace("-","minus")+"px")},setupOnMinimize:function(){this.$el.data("uiResizable")&&this.$el.resizable("destroy"),this.$el.resizable({minWidth:380,handles:"w, e",start:function(b){a("iframe").css("pointerEvents","none")},stop:function(){a("iframe").css("pointerEvents","")}})}}}(window.jQuery),function(a){"use strict";vc.HelperTemplatesPanelViewSearch={searchSelector:"[data-vc-templates-name-filter]",events:{"keyup [data-vc-templates-name-filter]":"searchTemplate","search [data-vc-templates-name-filter]":"searchTemplate"},uiEvents:{show:"focusToSearch"},focusToSearch:function(){vc.is_mobile||a(this.searchSelector,this.$el).focus()},searchTemplate:function(b){var c=a(b.currentTarget);c.val().length?this.searchByName(c.val()):this.clearSearch()},clearSearch:function(){this.$el.find("[data-vc-templates-name-filter]").val(""),this.$el.find("[data-template_name]").css("display","block"),this.$el.removeAttr("data-vc-template-search"),this.$el.find(".vc-search-result-empty").removeClass("vc-search-result-empty");var a=new jQuery.Event("click");a.isClearSearch=!0,this.$el.find('.vc_panel-tabs-control:first [data-vc-ui-element="panel-tab-control"]').trigger(a)},searchByName:function(b){this.$el.find(".vc_panel-tabs-control.vc_active").removeClass("vc_active"),this.$el.attr("data-vc-template-search","true"),this.$el.find("[data-template_name]").css("display","none"),this.$el.find('[data-template_name*="'+vc_slugify(b)+'"]').css("display","block"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"]').each(function(){var b=a(this);b.removeClass("vc-search-result-empty"),b.find("[data-template_name]:visible").length||b.addClass("vc-search-result-empty")})}}}(window.jQuery),function(a){"use strict";vc.HelperPanelViewHeaderFooter={buttonMessageTimeout:!1,events:{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity"},uiEvents:{save:"setButtonMessage",render:"clearButtonMessage"},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity"),this.$el.removeClass("vc_minimized")},toggleOpacity:function(b){b.preventDefault();var c="vc_animating",d="vc_minimized",e=this,f=this.$el,g=f.find(f.data("vcPanel")),h=g.closest(g.data("vcPanelContainer")),i=400,j=a(b.currentTarget);"undefined"==typeof f.data("vcHasHeight")&&f.data("vcHasHeight",function(b,c){var d=b.attr("style"),e=!1;return d&&d.split(";").forEach(function(b){var d=b.split(":");a.trim(d[0])===c&&(e=!0)}),e}(f,"height")),f.hasClass(d)?("undefined"==typeof f.data("vcMinimizeHeight")&&f.data("vcMinimizeHeight",a(window).height()-.2*a(window).height()),f.animate({height:f.data("vcMinimizeHeight")},{duration:i,start:function(){j.prop("disabled",!0),f.addClass(c),e.tabsMenu&&e.tabsMenu()&&e.tabsMenu().vcTabsLine("moveTabs")},complete:function(){f.removeClass(d),f.removeClass(c),f.data("vcHasHeight")||f.css({height:""}),e.trigger("afterUnminimize"),j.prop("disabled",!1)}})):(f.data("vcMinimizeHeight",f.height()),f.animate({height:g.outerHeight()+h.outerHeight()-h.height()},{duration:i,start:function(){j.prop("disabled",!0),f.addClass(c)},complete:function(){f.addClass(d),f.removeClass(c),f.css({height:""}),e.trigger("afterMinimize"),j.prop("disabled",!1)}}))},setButtonMessage:function(a,b,c){var d,e;return"undefined"==typeof c&&(c=!1),this.clearButtonMessage=_.bind(this.clearButtonMessage,this),!c&&!vc.frame_window||this.buttonMessageTimeout?this:("undefined"==typeof a&&(a=window.i18nLocale.ui_saved),"undefined"==typeof b&&(b="success"),e=this.$el.find('[data-vc-ui-element="button-save"]'),d=e.html(),e.addClass("vc_ui-button-"+b+" vc_ui-button-undisabled").removeClass("vc_ui-button-action").data("vcCurrentTextHtml",d).data("vcCurrentTextType",b).html(a),_.delay(this.clearButtonMessage,5e3),this.buttonMessageTimeout=!0,this)},clearButtonMessage:function(){var a,b,c;this.buttonMessageTimeout&&(window.clearTimeout(this.buttonMessageTimeout),c=this.$el.find('[data-vc-ui-element="button-save"]'),b=c.data("vcCurrentTextHtml")||"Save",a=c.data("vcCurrentTextType"),c.html(b).removeClass("vc_ui-button-"+a+" vc_ui-button-undisabled").addClass("vc_ui-button-action"),this.buttonMessageTimeout=!1)}}}(window.jQuery),function(a){"use strict";vc.TemplateWindowUIPanelBackendEditor=vc.TemplatesPanelViewBackend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperTemplatesPanelViewSearch).extend({panelName:"template_window",showMessageDisabled:!1,initialize:function(){vc.TemplateWindowUIPanelBackendEditor.__super__.initialize.call(this),this.trigger("show",this.initTemplatesTabs,this)},show:function(){this.clearSearch(),vc.TemplateWindowUIPanelBackendEditor.__super__.show.call(this)},initTemplatesTabs:function(){this.$el.find('[data-vc-ui-element="panel-tabs-controls"]').vcTabsLine("moveTabs")},showMessage:function(b,c){var d;if(this.showMessageDisabled)return!1;d="vc_col-xs-12 wpb_element_wrapper",this.message_box_timeout&&this.$el.find("[data-vc-panel-message]").remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var e,f=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>');switch(c){case"error":e=a('<div class="'+d+'" data-vc-panel-message>').html(f({color:"danger",icon:"times",text:b}));break;case"warning":e=a('<div class="'+d+'" data-vc-panel-message>').html(f({color:"warning",icon:"exclamation-triangle",text:b}));break;case"success":e=a('<div class="'+d+'" data-vc-panel-message>').html(f({color:"success",icon:"check",text:b}))}e.prependTo(this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_row.vc_active')),e.fadeIn(),this.message_box_timeout=window.setTimeout(function(){e.remove()},6e3)},changeTab:function(b){b.preventDefault(),b&&!b.isClearSearch&&this.clearSearch();var c=a(b.currentTarget);c.parent().hasClass("vc_active")||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass("vc_active"),c.parent().addClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass("vc_active"),this.$el.find(c.data("vcUiElementTarget")).addClass("vc_active"),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"))},setPreviewFrameHeight:function(b,c){parseInt(c)<100&&(c=100),a('data-vc-template-preview-frame="'+b+'"').height(c)}}),vc.TemplateWindowUIPanelBackendEditor.prototype.events=a.extend(!0,vc.TemplateWindowUIPanelBackendEditor.prototype.events,{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity","keyup [data-vc-templates-name-filter]":"searchTemplate","search [data-vc-templates-name-filter]":"searchTemplate","click .vc_template-save-btn":"saveTemplate","click [data-template_id] [data-template-handler]":"loadTemplate",'click [data-vc-container=".vc_ui-list-bar"][data-vc-preview-handler]':"buildTemplatePreview",'click [data-vc-ui-delete="template-title"]':"removeTemplate",'click [data-vc-ui-element="panel-tab-control"]':"changeTab"}),vc.TemplateWindowUIPanelFrontendEditor=vc.TemplatesPanelViewFrontend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperTemplatesPanelViewSearch).extend({panelName:"template_window",showMessageDisabled:!1,show:function(){this.clearSearch(),vc.TemplateWindowUIPanelFrontendEditor.__super__.show.call(this)},showMessage:function(b,c){if(this.showMessageDisabled)return!1;this.message_box_timeout&&this.$el.find("[data-vc-panel-message]").remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var d,e,f=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>');switch(e="vc_col-xs-12 wpb_element_wrapper",c){case"error":d=a('<div class="'+e+'" data-vc-panel-message>').html(f({color:"danger",icon:"times",text:b}));break;case"warning":d=a('<div class="'+e+'" data-vc-panel-message>').html(f({color:"warning",icon:"exclamation-triangle",text:b}));break;case"success":d=a('<div class="'+e+'" data-vc-panel-message>').html(f({color:"success",icon:"check",text:b}))}d.prependTo(this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_row.vc_active')),d.fadeIn(),this.message_box_timeout=window.setTimeout(function(){d.remove()},6e3)},changeTab:function(b){b.preventDefault(),b&&!b.isClearSearch&&this.clearSearch();var c=a(b.currentTarget);c.parent().hasClass("vc_active")||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass("vc_active"),c.parent().addClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass("vc_active"),this.$el.find(c.data("vcUiElementTarget")).addClass("vc_active"),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"))}}),a.fn.vcAccordion.Constructor.prototype.collapseTemplate=function(b){var c,d,e,f;e=this.$element;var g;if(g=0,c=this.getContainer().find("[data-vc-preview-handler]").each(function(){var b,c;c=a(this),b=c.data("vc.accordion"),"undefined"==typeof b&&(c.vcAccordion(),b=c.data("vc.accordion")),b&&b.setIndex&&b.setIndex(g++)}),d=c.filter(function(){var b,c;return b=a(this),c=b.data("vc.accordion"),c.getTarget().hasClass(c.activeClass)}),f=d.filter(function(){return e[0]!==this}),f.length&&a.fn.vcAccordion.call(f,"hide"),this.isActive())a.fn.vcAccordion.call(e,"hide");else{a.fn.vcAccordion.call(e,"show");var h=e.closest(".vc_ui-list-bar-item"),i=e.closest("[data-template_id]"),j=i.closest("[data-vc-ui-element=panel-content]").parent();setTimeout(function(){if(Math.round(i.offset().top-j.offset().top)<0){var a=Math.round(i.offset().top-j.offset().top+j.scrollTop()-h.height());j.animate({scrollTop:a},400)}"function"==typeof b&&b(i,j)},400)}}}(window.jQuery),function(a){"use strict";vc.element_start_index=0,vc.AddElementUIPanelBackendEditor=vc.PanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).extend({el:"#vc_ui-panel-add-element",searchSelector:"#vc_elements_name_filter",prepend:!1,builder:"",events:{'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="panel-tab-control"]':"filterElements","click .vc_shortcode-link":"createElement","keyup #vc_elements_name_filter":"filterElements","search #vc_elements_name_filter":"filterElements"},initialize:function(){vc.AddElementUIPanelBackendEditor.__super__.initialize.call(this),vc.events.on("shortcodes:add",this.addCustomCssStyleTag.bind(this))},render:function(b,c){return _.isUndefined(vc.ShortcodesBuilder)||(this.builder=new vc.ShortcodesBuilder),this.$el.is(":hidden")&&vc.closeActivePanel(),vc.active_panel=this,this.prepend=!!_.isBoolean(c)&&c,this.place_after_id=!!_.isString(c)&&c,this.model=!!_.isObject(b)&&b,this.$content=this.$el.find('[data-vc-ui-element="panel-add-element-list"]'),this.$buttons=a('[data-vc-ui-element="add-element-button"]',this.$content),this.buildFiltering(),this.$el.find('[data-vc-ui-element="panel-tab-control"]').eq(0).click(),this.show(),this.$el.find('[data-vc-ui-element="panel-tabs-controls"]').vcTabsLine("moveTabs"),vc.is_mobile||a(this.searchSelector).focus(),vc.AddElementUIPanelBackendEditor.__super__.render.call(this)},buildFiltering:function(){var b,c,d,e,f;b='[data-vc-ui-element="add-element-button"]',d=this._getNotIn(this.model?this.model.get("shortcode"):""),a(this.searchSelector).val(""),this.$content.addClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter","*"),c=this.model?this.model.get("shortcode"):"vc_column",e=!(!c||_.isUndefined(vc.getMapped(c).as_parent))&&vc.getMapped(c).as_parent,_.isObject(e)?(f=[],_.isString(e.only)&&f.push(_.reduce(e.only.replace(/\s/,"").split(","),function(a,b){return a+(_.isEmpty(a)?"":",")+'[data-element="'+b.trim()+'"]'},"")),_.isString(e.except)&&f.push(_.reduce(e.except.replace(/\s/,"").split(","),function(a,b){return a+':not([data-element="'+b.trim()+'"])'},"")),b+=f.join(",")):d&&(b=d),!1===c||_.isUndefined(vc.getMapped(c).allowed_container_element)||(!1===vc.getMapped(c).allowed_container_element?b+=":not([data-is-container=true])":_.isString(vc.getMapped(c).allowed_container_element)&&(b+=":not([data-is-container=true]), [data-element="+vc.getMapped(c).allowed_container_element+"]")),this.$buttons.removeClass("vc_visible").addClass("vc_inappropriate"),a(b,this.$content).removeClass("vc_inappropriate").addClass("vc_visible"),this.hideEmptyFilters()},hideEmptyFilters:function(){var b=this;this.$el.find('[data-vc-ui-element="panel-add-element-tab"].vc_active').removeClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-add-element-tab"]:first').addClass("vc_active"),this.$el.find("[data-filter]").each(function(){a(a(this).data("filter")+".vc_visible:not(.vc_inappropriate)",b.$content).length?a(this).parent().show():a(this).parent().hide()})},_getNotIn:_.memoize(function(a){var b;return b=_.reduce(vc.map,function(b,c){var d;return d=_.isEmpty(b)?"":",",_.isObject(c.as_child)?(_.isString(c.as_child.only)&&(_.contains(c.as_child.only.replace(/\s/,"").split(","),a)||(b+=d+"[data-element="+c.base+"]")),_.isString(c.as_child.except)&&_.contains(c.as_child.except.replace(/\s/,"").split(","),a)&&(b+=d+"[data-element="+c.base+"]")):!1===c.as_child&&(b+=d+"[data-element="+c.base+"]"),b},""),'[data-vc-ui-element="add-element-button"]:not('+b+")"}),filterElements:function(b){_.isObject(b)?b.preventDefault()&&b.stopPropagation():b=window.event;var c,d,e=a(b.currentTarget),f='[data-vc-ui-element="add-element-button"]',g=a(this.searchSelector).val();this.$content.removeClass("vc_filter-all"),a('[data-vc-ui-element="panel-add-element-tab"].vc_active').removeClass("vc_active"),e.is("[data-filter]")?(e.parent().addClass("vc_active"),c=e.data("filter"),f+=c,"*"===c?this.$content.addClass("vc_filter-all"):this.$content.removeClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter",c.replace(".js-category-","")),a(this.searchSelector).val("")):g.length?(f+=":containsi('"+g+"'):not('.vc_element-deprecated')",this.$content.attr("data-vc-ui-filter","name:"+g)):g.length||(a('[data-vc-ui-element="panel-tab-control"][data-filter="*"]').parent().addClass("vc_active"),this.$content.attr("data-vc-ui-filter","*").addClass("vc_filter-all")),a(".vc_visible",this.$content).removeClass("vc_visible"),a(f,this.$content).addClass("vc_visible"),g.length&&13===(b.keyCode||b.which)&&(d=a(".vc_visible:not(.vc_inappropriate)",this.$content),
1===d.length&&d.find("[data-vc-clickable]").click())},createElement:function(b){b&&b.preventDefault&&b.preventDefault();var c,d,e,f,g,h,i,j,k,l;l=a(b.currentTarget).data("tag"),h={},"undefined"!=typeof window.vc_settings_presets.vc_row&&(h=_.extend(h,window.vc_settings_presets.vc_row)),j={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column&&(j=_.extend(j,window.vc_settings_presets.vc_column)),!1===this.model?(vc.storage.lock(),"vc_section"===l?c=vc.shortcodes.create({shortcode:l}):(e=vc.shortcodes.create({shortcode:"vc_row",params:h}),d=vc.shortcodes.create({shortcode:"vc_column",params:j,parent_id:e.id,root_id:e.id}),c=e,"vc_row"!==l&&(c=vc.shortcodes.create({shortcode:l,parent_id:d.id,root_id:e.id})))):"vc_row"===l?"vc_section"===this.model.get("shortcode")?(vc.storage.lock(),e=vc.shortcodes.create({shortcode:"vc_row",params:h,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),d=vc.shortcodes.create({shortcode:"vc_column",params:j,parent_id:e.id,root_id:e.id}),c=e):(i={},"undefined"!=typeof window.vc_settings_presets.vc_row_inner&&(i=_.extend(i,window.vc_settings_presets.vc_row_inner)),k={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column_inner&&(k=_.extend(k,window.vc_settings_presets.vc_column_inner)),vc.storage.lock(),e=vc.shortcodes.create({shortcode:"vc_row_inner",params:i,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),d=vc.shortcodes.create({shortcode:"vc_column_inner",params:k,parent_id:e.id,root_id:e.id}),c=e):c=vc.shortcodes.create({shortcode:l,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder(),root_id:this.model.get("root_id")}),this.model=c,f=!(_.isBoolean(vc.getMapped(l).show_settings_on_create)&&!1===vc.getMapped(l).show_settings_on_create),g=this.model.get("shortcode"),"undefined"!=typeof window.vc_settings_presets[g]&&this.model.save({params:_.extend({},this.model.attributes.params,window.vc_settings_presets[g])}),this.hide(),f&&this.showEditForm()},getFirstPositionIndex:function(){return vc.element_start_index-=1,vc.element_start_index},show:function(){this.$el.addClass("vc_active"),this.trigger("show")},hide:function(){this.$el.removeClass("vc_active"),vc.active_panel=!1,this.trigger("hide")},showEditForm:function(){vc.edit_element_block_view.render(this.model)},addCustomCssStyleTag:function(a){if(a&&a.getParam){var b;b=a.getParam("css"),b&&vc.frame_window&&vc.frame_window.vc_iframe.setCustomShortcodeCss(b)}}}),vc.AddElementUIPanelFrontendEditor=vc.AddElementUIPanelBackendEditor.vcExtendUI(vc.HelperPanelViewHeaderFooter).extend({events:{'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="panel-tab-control"]':"filterElements","click .vc_shortcode-link":"createElement","keyup #vc_elements_name_filter":"filterElements"},createElement:function(b){b&&b.preventDefault&&b.preventDefault();var c,d,e,f,g,h,i,j,k,l;for(k=a(b.currentTarget),l=k.data("tag"),h={},"undefined"!=typeof window.vc_settings_presets.vc_row&&(h=_.extend(h,window.vc_settings_presets.vc_row)),g={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column&&(g=_.extend(g,window.vc_settings_presets.vc_column)),this.prepend&&(vc.activity="prepend"),0==this.model?"vc_section"===l?(this.builder.create({shortcode:l}),this.model=this.builder.last()):(this.builder.create({shortcode:"vc_row",params:h}).create({shortcode:"vc_column",parent_id:this.builder.lastID(),params:g}),"vc_row"!==l&&this.builder.create({shortcode:l,parent_id:this.builder.lastID()}),this.model=this.builder.last()):"vc_row"===l?"vc_section"===this.model.get("shortcode")?(this.builder.create({shortcode:"vc_row",params:h,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()}).create({shortcode:"vc_column",params:g,parent_id:this.builder.lastID()}),this.model=this.builder.last()):(i={},"undefined"!=typeof window.vc_settings_presets.vc_row_inner&&(i=_.extend(i,window.vc_settings_presets.vc_row_inner)),j={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column_inner&&(j=_.extend(j,window.vc_settings_presets.vc_column_inner)),this.builder.create({shortcode:"vc_row_inner",params:i,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()}).create({shortcode:"vc_column_inner",params:j,parent_id:this.builder.lastID()}),this.model=this.builder.last()):(this.builder.create({shortcode:l,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()}),this.model=this.builder.last()),e=this.builder.models.length-1;e>=0;e--)f=this.builder.models[e].get("shortcode"),"undefined"!=typeof window.vc_settings_presets[f]&&(this.builder.models[e].attributes.params=_.extend(this.builder.models[e].attributes.params,window.vc_settings_presets[f]));_.isString(vc.getMapped(l).default_content)&&vc.getMapped(l).default_content.length&&(d=this.builder.parse({},vc.getMapped(l).default_content,this.builder.last().toJSON()),_.each(d,function(a){a.default_content=!0,this.builder.create(a)},this)),this.model=this.builder.last(),c=!(_.isBoolean(vc.getMapped(l).show_settings_on_create)&&!1===vc.getMapped(l).show_settings_on_create),this.hide(),c&&this.showEditForm(),this.builder.render()}})}(window.jQuery),function(a){"use strict";vc.ExtendPresets={settingsMenuSelector:'[data-vc-ui-element="settings-dropdown-list"]',settingsButtonSelector:'[data-vc-ui-element="settings-dropdown-button"]',settingsDropdownSelector:'[data-vc-ui-element="settings-dropdown"]',settingsPresetId:null,uiEvents:{init:"addEvents",render:"hideDropdown",afterRender:"afterRenderActions"},afterRenderActions:function(){this.untaintSettingsPresetData(),this.showDropdown()},hideDropdown:function(){this.$el.find('[data-vc-ui-element="settings-dropdown"]').hide()},showDropdown:function(){window.vc_settings_show&&this.$el.find('[data-vc-ui-element="settings-dropdown"]').show()},showDropdownMenu:function(){var b=this.model.get("shortcode"),c=a(this);c.data("vcSettingsMenuLoaded")&&b===c.data("vcShortcodeName")||this.reloadSettingsMenuContent()},addEvents:function(){var b=this.$el.find(".vc_edit-form-tab.vc_active"),c=this.model.get("shortcode"),d=this;a(document).off("beforeMinimize.vc.paramWindow",this.minimizeButtonSelector).on("beforeMinimize.vc.paramWindow",this.minimizeButtonSelector,function(){b.find(".vc_ui-prompt-presets .vc_ui-prompt-close").trigger("click")}),a(document).off("close.vc.paramWindow",this.closeButtonSelector).on("beforeClose.vc.paramWindow",this.closeButtonSelector,function(){b.find(".vc_ui-prompt-presets .vc_ui-prompt-close").trigger("click")}),a(document).off("show.vc.accordion",this.settingsButtonSelector).on("show.vc.accordion",this.settingsButtonSelector,function(){var b=a(this);b.data("vcSettingsMenuLoaded")&&c===b.data("vcShortcodeName")||d.reloadSettingsMenuContent()})},saveSettingsAjaxData:function(a,b,c,d){return{action:"vc_action_save_settings_preset",shortcode_name:a,is_default:c?1:0,vc_inline:!0,title:b,data:d,_vcnonce:window.vcAdminNonce}},saveSettings:function(b,c){var d=this.model.get("shortcode"),e=JSON.stringify(this.getParamsForSettingsPreset());if("undefined"!=typeof b&&b.length)return"undefined"==typeof c&&(c=!1),this.checkAjax(),this.ajax=a.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.saveSettingsAjaxData(d,b,c,e),context:this}).done(function(a){a.success&&(this.setSettingsMenuContent(a.html),this.settingsPresetId=a.id,c&&(window.vc_settings_presets[d]=this.getParamsForSettingsPreset()),this.untaintSettingsPresetData())}).always(this.resetAjax),this.ajax},fetchSaveSettingsDialogAjaxData:function(){return{action:"vc_action_render_settings_preset_title_prompt",vc_inline:!0,_vcnonce:window.vcAdminNonce}},fetchSaveSettingsDialog:function(b){var c=this.$el.find(".vc_ui-panel-content-container");return c.find(".vc_ui-prompt-presets").length?void("undefined"!=typeof b&&b(!1)):(this.checkAjax(),void(this.ajax=a.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.fetchSaveSettingsDialogAjaxData()}).done(function(a){a.success&&(c.prepend(a.html),"undefined"!=typeof b&&b(!0))}).fail(function(){"undefined"!=typeof b&&b(!1)}).always(this.resetAjax)))},showSaveSettingsDialog:function(a){var b=this;this.isSettingsPresetDefault=!!a,this.fetchSaveSettingsDialog(function(a){var c=b.$el.find(".vc_ui-panel-content-container"),d=c.find(".vc_ui-prompt-presets"),e=d.find(".textfield");c.find(".vc_ui-prompt.vc_visible").removeClass("vc_visible");var f=d.find("[data-vc-view-settings-preset]");if("undefined"!==window.vc_vendor_settings_presets[b.model.get("shortcode")]?f.removeAttr("disabled"):f.attr("disabled","disabled"),d.addClass("vc_visible"),e.focus(),c.addClass("vc_ui-content-hidden"),a){var g=d.find("#vc_ui-save-preset-btn"),h=0;d.on("submit",function(){var a=e.val();return!!a.length&&(b.saveSettings(a,b.isSettingsPresetDefault).done(function(){e.val(""),b.setCustomButtonMessage(g,void 0,void 0,!0),h=_.delay(function(){d.removeClass("vc_visible"),c.removeClass("vc_ui-content-hidden")},5e3)}).fail(function(){b.setCustomButtonMessage(g,window.i18nLocale.ui_danger,"danger",!0)}),!1)}),d.on("click",".vc_ui-prompt-close",function(){return b.checkAjax(),d.removeClass("vc_visible"),c.removeClass("vc_ui-content-hidden"),b.clearCustomButtonMessage.call(this,g),h&&(window.clearTimeout(h),h=0),!1})}})},loadSettingsAjaxData:function(a){return{action:"vc_action_get_settings_preset",vc_inline:!0,id:a,_vcnonce:window.vcAdminNonce}},loadSettings:function(b){return this.panelInit=!1,this.checkAjax(),this.ajax=a.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.loadSettingsAjaxData(b),context:this}).done(function(a){a.success&&(this.settingsPresetId=b,this.applySettingsPreset(a.data))}).always(this.resetAjax),this.ajax},deleteSettingsAjaxData:function(a,b){return{action:"vc_action_delete_settings_preset",shortcode_name:a,vc_inline:!0,id:b,_vcnonce:window.vcAdminNonce}},deleteSettings:function(b){var c=this.model.get("shortcode");return!!confirm(window.i18nLocale.delete_preset_confirmation)&&(this.checkAjax(),this.ajax=a.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.deleteSettingsAjaxData(c,b),context:this}).done(function(a){a&&a.success&&(this.setSettingsMenuContent(a.html),b===this.settingsPresetId&&(this.settingsPresetId=null),a.default&&(delete window.vc_settings_presets[c],"undefined"!==window.vc_vendor_settings_presets[c]&&(window.vc_settings_presets[c]=window.vc_vendor_settings_presets[c])))}).always(this.resetAjax),this.ajax)},saveAsDefaultSettingsAjaxData:function(a,b){return{action:"vc_action_set_as_default_settings_preset",shortcode_name:a,id:b,vc_inline:!0,_vcnonce:window.vcAdminNonce}},saveAsDefaultSettings:function(b,c){var d=this.model.get("shortcode"),e=b?b:this.settingsPresetId;!e||this.isSettingsPresetDataTainted()?this.showSaveSettingsDialog(!0):(this.checkAjax(),this.ajax=a.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.saveAsDefaultSettingsAjaxData(d,e),context:this}).done(function(a){a.success&&(this.setSettingsMenuContent(a.html),this.untaintSettingsPresetData(),window.vc_settings_presets[d]=this.getParamsForSettingsPreset(),c&&c())}).always(this.resetAjax))},restoreDefaultSettingsAjaxData:function(a){return{action:"vc_action_restore_default_settings_preset",shortcode_name:a,vc_inline:!0,_vcnonce:window.vcAdminNonce}},restoreDefaultSettings:function(){var b=this.model.get("shortcode");this.checkAjax(),this.ajax=a.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.restoreDefaultSettingsAjaxData(b),context:this}).done(function(a){a.success&&(this.setSettingsMenuContent(a.html),delete window.vc_settings_presets[b],"undefined"!==window.vc_vendor_settings_presets[b]&&(window.vc_settings_presets[b]=window.vc_vendor_settings_presets[b]))}).always(this.resetAjax)},setSettingsMenuContent:function(b){var c=this.$el.find(this.settingsButtonSelector),d=this.$el.find(this.settingsMenuSelector),e=this.model.get("shortcode"),f=this;c.data("vcShortcodeName",e),d.html(b),window.vc_presets_data&&window.vc_presets_data.presetsCount>0?d.find("[data-vc-view-settings-preset]").removeAttr("disabled"):d.find("[data-vc-view-settings-preset]").attr("disabled","disabled"),d.find("[data-vc-view-settings-preset]").on("click",function(){f.showViewSettingsList(),f.closeSettings()}),d.find("[data-vc-delete-settings-preset]").on("click",function(){f.deleteSettings(a(this).data("vcDeleteSettingsPreset"))}),d.find("[data-vc-save-settings-preset]").on("click",function(){f.showSaveSettingsDialog(),f.closeSettings()}),d.find("[data-vc-save-template]").on("click",function(){f.showSaveTemplateDialog(),f.closeSettings()}),d.find("[data-vc-save-default-settings-preset]").on("click",function(){f.saveAsDefaultSettings(),f.closeSettings()}),d.find("[data-vc-restore-default-settings-preset]").on("click",function(){f.restoreDefaultSettings(),f.closeSettings()})},reloadSettingsMenuContentAjaxData:function(a){return{action:"vc_action_render_settings_preset_popup",shortcode_name:a,vc_inline:!0,_vcnonce:window.vcAdminNonce}},showViewSettingsList:function(){var b=this.$el.find(".vc_ui-panel-content-container");if(b.find(".vc_ui-prompt-view-presets:not(.vc_visible)").remove(),!b.find(".vc_ui-prompt-view-presets").length){b.find(".vc_ui-prompt.vc_visible").removeClass("vc_visible");var c=this,d=jQuery('<form class="vc_ui-prompt vc_ui-prompt-view-presets"><div class="vc_ui-prompt-controls"><button type="button" class="vc_general vc_ui-control-button vc_ui-prompt-close"><i class="vc-composer-icon vc-c-icon-close"></i></button></div><div class="vc_ui-prompt-title"><label for="prompt_title" class="wpb_element_label">Presets</label></div><div class="vc_ui-prompt-content"><div class="vc_ui-prompt-column"><div class="vc_ui-template-list vc_ui-list-bar" data-vc-action="collapseAll" style="margin-top: 20px;" data-vc-presets-list-content></div></div></div>');this.buildsettingsListContent(d),d.appendTo(b),d.addClass("vc_visible"),b.addClass("vc_ui-content-hidden");var e=function(){return d.remove(),b.removeClass("vc_ui-content-hidden"),!1};d.off("click.vc1").on("click.vc1","[data-vc-load-settings-preset]",function(b){c.loadSettings(a(b.currentTarget).data("vcLoadSettingsPreset")),e()}),d.off("click.vc2").on("click.vc2","[data-vc-delete-settings-preset]",function(b){var f=a(b.currentTarget);c.deleteSettings(f.data("vcDeleteSettingsPreset"))&&(f.closest(".vc_ui-template").remove(),d.find(".vc_ui-template").length||e())}),d.off("click.vc4").on("click.vc4","[data-vc-set-default-settings-preset]",function(){c.saveAsDefaultSettings(a(this).data("vcSetDefaultSettingsPreset"),function(){c.buildsettingsListContent(d)})}),d.off("click.vc3").on("click.vc3",".vc_ui-prompt-close",function(){e(),c.checkAjax()})}},buildsettingsListContent:function(a){var b=vc.template('<div class="vc_ui-template"><div class="vc_ui-list-bar-item"><button class="vc_ui-list-bar-item-trigger" title="Apply preset" type="button" data-vc-load-settings-preset="<%- id %>"><%- title %></button><div class="vc_ui-list-bar-item-actions"><button class="vc_general vc_ui-control-button" title="Apply preset" type="button" data-vc-load-settings-preset="<%- id %>"><i class="vc-composer-icon vc-c-icon-add"></i></button><button class="vc_general vc_ui-control-button<%=id==window.vc_presets_data.defaultId ? " vc_hidden":"" %>" title="Set as default preset" type="button" data-vc-set-default-settings-preset="<%- id %>"><i class="vc-composer-icon vc-c-icon-lock_outline"></i></button><button class="vc_general vc_ui-control-button" title="Delete preset" type="button" data-vc-delete-settings-preset="<%- id %>"><i class="vc-composer-icon vc-c-icon-delete_empty"></i></button></div></div></div>'),c=a.find("[data-vc-presets-list-content]");c.empty(),_.each(window.vc_presets_data.presets[0],function(a,d){var e=a;window.vc_presets_data.defaultId>0&&parseInt(d)===window.vc_presets_data.defaultId&&(e=a+" (default)"),c.append(b({title:e,id:d}))}),_.each(window.vc_presets_data.presets[1],function(a,d){var e=a;window.vc_presets_data.defaultId>0&&parseInt(d)===window.vc_presets_data.defaultId&&(e=a+" (default)"),c.append(b({title:e,id:d}))})},reloadSettingsMenuContent:function(){var b=this.model.get("shortcode"),c=this.$el.find(this.settingsButtonSelector),d=!1;return this.setSettingsMenuContent(""),this.checkAjax(),this.ajax=a.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.reloadSettingsMenuContentAjaxData(b),context:this}).done(function(a){a.success&&(d=!0,this.setSettingsMenuContent(a.html),c.data("vcSettingsMenuLoaded",!0))}).always(function(){d||this.closeSettings(),this.resetAjax()}),this.ajax},closeSettings:function(a){"undefined"==typeof a&&(a=!1);var b=this.$el.find(this.settingsMenuSelector),c=this.$el.find(this.settingsButtonSelector);a&&(c.data("vcSettingsMenuLoaded",!1),b.html("")),c.vcAccordion("hide")},isSettingsPresetDataTainted:function(){var a=JSON.stringify(this.getParamsForSettingsPreset());return a=a.replace(/vc_custom_\d+/,""),this.$el.data("vcSettingsPresetHash")!==vc_globalHashCode(a)},untaintSettingsPresetData:function(){var a=JSON.stringify(this.getParamsForSettingsPreset());a=a.replace(/vc_custom_\d+/,""),this.$el.data("vcSettingsPresetHash",vc_globalHashCode(a))},applySettingsPresetAjaxData:function(b){var c;return c=this.model.get("parent_id"),{action:"vc_edit_form",tag:this.model.get("shortcode"),parent_tag:c?vc.shortcodes.get(c).get("shortcode"):null,post_id:a("#post_ID").val(),params:b,_vcnonce:window.vcAdminNonce}},applySettingsPreset:function(b){return this.currentModelParams=b,vc.events.trigger("presets:apply",this.model,b),this._killEditor(),this.trigger("render"),this.show(),this.checkAjax(),this.ajax=a.ajax({type:"POST",url:window.ajaxurl,data:this.applySettingsPresetAjaxData(b),context:this}).done(this.buildParamsContent).always(this.resetAjax),this},getParamsForSettingsPreset:function(){var a=this.model.get("shortcode"),b=this.getParams();return"vc_column"!==a&&"vc_column_inner"!==a||(delete b.width,delete b.offset),b}},vc.events.on("presets.apply",function(a,b){return"vc_tta_section"===a.get("shortcode")&&"undefined"!=typeof b.tab_id&&(b.tab_id=vc_guid()+"-cl"),b})}(window.jQuery),function(a){"use strict";vc.ExtendTemplates={fetchSaveTemplateDialogAjaxData:function(){return{action:"vc_action_render_settings_templates_prompt",vc_inline:!0,_vcnonce:window.vcAdminNonce}},fetchSaveTemplateDialog:function(b){var c=this.$el.find(".vc_ui-panel-content-container");return c.find(".vc_ui-prompt-templates").length?void("undefined"!=typeof b&&b(!1)):(this.checkAjax(),this.ajax=a.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.fetchSaveTemplateDialogAjaxData()}).done(function(a){a.success&&(c.prepend(a.html),"undefined"!=typeof b&&b(!0))}).always(this.resetAjax),this.ajax)},showSaveTemplateDialog:function(){var a=this;this.fetchSaveTemplateDialog(function(b){var c=a.$el.find(".vc_ui-panel-content-container"),d=c.find(".vc_ui-prompt-templates"),e=d.find(".textfield");if(c.find(".vc_ui-prompt.vc_visible").removeClass("vc_visible"),d.addClass("vc_visible"),e.focus(),c.addClass("vc_ui-content-hidden"),b){var f=0,g=d.find("#vc_ui-save-templates-btn");d.on("submit",function(){var b=e.val();if(a.$el.find(a.settingsButtonSelector),!b.length)return!1;var h={action:vc.templates_panel_view.save_template_action,template:vc.shortcodes.singleStringify(a.model.get("id"),"template"),template_name:b,vc_inline:!0,_vcnonce:window.vcAdminNonce};return vc.templates_panel_view.reloadTemplateList(h,function(){e.val(""),a.setCustomButtonMessage(g,void 0,void 0,!0),f=_.delay(function(){d.removeClass("vc_visible"),c.removeClass("vc_ui-content-hidden")},5e3)},function(){a.setCustomButtonMessage(g,window.i18nLocale.ui_danger,"danger")}),!1}),d.on("click",".vc_ui-prompt-close",function(){return a.checkAjax(),d.removeClass("vc_visible"),c.removeClass("vc_ui-content-hidden"),a.clearCustomButtonMessage.call(this,g),f&&(window.clearTimeout(f),f=0),!1})}})}}}(window.jQuery),function(a){"use strict";vc.EditElementPanelView=vc.PanelView.vcExtendUI(vc.HelperAjax).vcExtendUI(vc.ExtendPresets).vcExtendUI(vc.ExtendTemplates).vcExtendUI(vc.HelperPrompts).extend({panelName:"edit_element",el:"#vc_properties-panel",contentSelector:".vc_ui-panel-content.vc_properties-list",minimizeButtonSelector:'[data-vc-ui-element="button-minimize"]',closeButtonSelector:'[data-vc-ui-element="button-close"]',titleSelector:".vc_panel-title",tabsInit:!1,doCheckTabs:!0,$tabsMenu:!1,dependent_elements:{},mapped_params:{},draggable:!1,panelInit:!1,$spinner:!1,active_tab_index:0,buttonMessageTimeout:!1,notRequestTemplate:!1,requiredParamsInitialized:!1,currentModelParams:!1,customButtonMessageTimeout:!1,events:{"click [data-save=true]":"save","click [data-dismiss=panel]":"hide","mouseover [data-transparent=panel]":"addOpacity","click [data-transparent=panel]":"toggleOpacity","mouseout [data-transparent=panel]":"removeOpacity"},initialize:function(){_.bindAll(this,"setSize","setTabsSize","fixElContainment","hookDependent","resetAjax","removeAllPrompts"),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this),this.on("render",this.setTitle,this),this.on("render",this.prepareContentBlock,this)},setCustomButtonMessage:function(a,b,c,d){var e;return"undefined"==typeof a&&(a=this.$el.find('[data-vc-ui-element="button-save"]')),"undefined"==typeof d&&(d=!1),this.clearCustomButtonMessage=_.bind(this.clearCustomButtonMessage,this),!d&&!vc.frame_window||this.customButtonMessageTimeout?this:("undefined"==typeof b&&(b=window.i18nLocale.ui_saved),"undefined"==typeof c&&(c="success"),e=a.html(),a.addClass("vc_ui-button-"+c+" vc_ui-button-undisabled").removeClass("vc_ui-button-action").data("vcCurrentTextHtml",e).data("vcCurrentTextType",c).html(b),_.delay(this.clearCustomButtonMessage.bind(this,a),5e3),this.customButtonMessageTimeout=!0,this)},clearCustomButtonMessage:function(a){var b,c;this.customButtonMessageTimeout&&(window.clearTimeout(this.customButtonMessageTimeout),c=a.data("vcCurrentTextHtml")||"Save",b=a.data("vcCurrentTextType"),a.html(c).removeClass("vc_ui-button-"+b+" vc_ui-button-undisabled").addClass("vc_ui-button-action"),this.customButtonMessageTimeout=!1)},render:function(b,c){var d;return this.$el.is(":hidden")&&vc.closeActivePanel(),c&&(this.notRequestTemplate=!0),this.model=b,this.currentModelParams=this.model.get("params"),vc.active_panel=this,this.resetMinimize(),this.clicked=!1,this.$el.css("height","auto"),this.$el.css("maxHeight","75vh"),d=this.model.setting("params")||[],this.$el.attr("data-vc-shortcode",this.model.get("shortcode")),this.tabsInit=!1,this.panelInit=!1,this.active_tab_index=0,this.requiredParamsInitialized=!1,this.mapped_params={},this.dependent_elements={},_.each(d,function(a){this.mapped_params[a.param_name]=a},this),this.trigger("render"),this.show(),this.checkAjax(),this.ajax=a.ajax({type:"POST",url:window.ajaxurl,data:this.ajaxData(),context:this}).done(this.buildParamsContent).always(this.resetAjax),this},prepareContentBlock:function(){this.$content=this.notRequestTemplate?this.$el:this.$el.find(this.contentSelector).removeClass("vc_with-tabs"),this.$content.empty(),this.$spinner=a('<span class="vc_ui-wp-spinner vc_ui-wp-spinner-lg"></span>'),this.$content.prepend(this.$spinner)},buildParamsContent:function(b){var c,d,e;c=a(b),d=c.find('[data-vc-ui-element="panel-tabs-controls"]'),d.find(".vc_edit-form-tab-control:first-child").addClass("vc_active"),e=this.$el.find('[data-vc-ui-element="panel-header-content"]'),d.prependTo(e),this.$content.html(c),this.$content.removeAttr("data-vc-param-initialized"),this.active_tab_index=0,this.tabsInit=!1,this.panelInit=!1,this.dependent_elements={},this.requiredParamsInitialized=!1,this.$content.find("[data-vc-param-initialized]").removeAttr("data-vc-param-initialized"),this.init(),this.$content.parent().scrollTop(1).scrollTop(0),this.$content.removeClass("vc_properties-list-init"),this.$el.trigger("vcPanel.shown"),this.trigger("afterRender")},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity")},ajaxData:function(){var b,c,d,e;return c=this.model.get("parent_id"),b=c?this.model.collection.get(c).get("shortcode"):null,d=this.model.get("params"),e=vc.getMergedParams(this.model.get("shortcode"),_.extend({},vc.getDefaults(this.model.get("shortcode")),d)),_.isUndefined(d.content)||(e.content=d.content),{action:"vc_edit_form",tag:this.model.get("shortcode"),parent_tag:b,post_id:a("#post_ID").val(),params:e,_vcnonce:window.vcAdminNonce}},init:function(){vc.EditElementPanelView.__super__.init.call(this),this.initParams(),this.initDependency(),a(".wpb_edit_form_elements .textarea_html").each(function(){window.init_textarea_html(a(this))}),this.trigger("init"),this.panelInit=!0},initParams:function(){var b=this,c=this.content().find('#vc_edit-form-tabs [data-vc-ui-element="panel-edit-element-tab"]:eq('+this.active_tab_index+")");c.length||(c=this.content()),c.attr("data-vc-param-initialized")||(a('[data-vc-ui-element="panel-shortcode-param"]',c).each(function(){var c,d;c=a(this),c.data("vcInitParam")||(d=c.data("param_settings"),vc.atts.init.call(b,d,c),c.data("vcInitParam",!0))}),c.attr("data-vc-param-initialized",!0)),this.requiredParamsInitialized||_.isUndefined(vc.required_params_to_init)||(a('[data-vc-ui-element="panel-shortcode-param"]',this.content()).each(function(){var c,d;c=a(this),!c.data("vcInitParam")&&_.indexOf(vc.required_params_to_init,c.data("param_type"))>-1&&(d=c.data("param_settings"),vc.atts.init.call(b,d,c),c.data("vcInitParam",!0))}),this.requiredParamsInitialized=!0)},initDependency:function(){var b={};_.each(this.mapped_params,function(c){if(_.isObject(c)&&_.isObject(c.dependency)){var d=c.dependency;if(_.isString(c.dependency.element)){var e,f;e=a("[name="+c.dependency.element+"].wpb_vc_param_value",this.$content),f=a("[name= "+c.param_name+"].wpb_vc_param_value",this.$content),_.each(e,function(c){var d,e;d=a(c),e=d.attr("name"),_.isArray(this.dependent_elements[d.attr("name")])||(this.dependent_elements[d.attr("name")]=[]),this.dependent_elements[d.attr("name")].push(f),!d.data("dependentSet")&&d.attr("data-dependent-set","true")&&d.bind("keyup change",this.hookDependent),b[e]||(b[e]=d)},this)}_.isString(d.callback)&&window[d.callback].call(this)}},this),this.doCheckTabs=!1,_.each(b,function(a){this.hookDependent({currentTarget:a})},this),this.doCheckTabs=!0,this.checkTabs(),b=null},hookDependent:function(b){var c,d,e,f,g,h;return c=a(b.currentTarget),d=c.closest(".vc_column"),f=this.dependent_elements[c.attr("name")],g=c.is(":checkbox")?_.map(this.$content.find("[name="+a(b.currentTarget).attr("name")+"].wpb_vc_param_value:checked"),function(b){return a(b).val()}):c.val(),h=this.doCheckTabs,this.doCheckTabs=!1,e=c.is(":checkbox")?!this.$content.find("[name="+c.attr("name")+"].wpb_vc_param_value:checked").length:!g.length,d.hasClass("vc_dependent-hidden")?_.each(f,function(a){var b=jQuery.Event("change");b.extra_type="vcHookDepended",a.closest(".vc_column").addClass("vc_dependent-hidden"),a.trigger(b)}):_.each(f,function(a){var b=a.attr("name"),c=_.isObject(this.mapped_params[b])&&_.isObject(this.mapped_params[b].dependency)?this.mapped_params[b].dependency:{},d=a.closest(".vc_column");_.isBoolean(c.not_empty)&&!0===c.not_empty&&!e?d.removeClass("vc_dependent-hidden"):_.isBoolean(c.is_empty)&&!0===c.is_empty&&e?d.removeClass("vc_dependent-hidden"):c.value&&_.intersection(_.isArray(c.value)?c.value:[c.value],_.isArray(g)?g:[g]).length?d.removeClass("vc_dependent-hidden"):c.value_not_equal_to&&!_.intersection(_.isArray(c.value_not_equal_to)?c.value_not_equal_to:[c.value_not_equal_to],_.isArray(g)?g:[g]).length?d.removeClass("vc_dependent-hidden"):d.addClass("vc_dependent-hidden");var f=jQuery.Event("change");f.extra_type="vcHookDepended",a.trigger(f)},this),h&&(this.checkTabs(),this.doCheckTabs=!0),this},checkTabs:function(){var b=this;!1===this.tabsInit&&(this.tabsInit=!0,this.$content.hasClass("vc_with-tabs")&&(this.$tabsMenu=this.$content.find(".vc_edit-form-tabs-menu"))),this.$tabsMenu&&(this.$content.find('[data-vc-ui-element="panel-edit-element-tab"]').each(function(c){var d=b.$tabsMenu.find('> [data-tab-index="'+c+'"]');a(this).find('[data-vc-ui-element="panel-shortcode-param"]:not(".vc_dependent-hidden")').length?d.hasClass("vc_dependent-hidden")&&(d.removeClass("vc_dependent-hidden").removeClass("vc_tab-color-animated").addClass("vc_tab-color-animated"),window.setTimeout(function(){d.removeClass("vc_tab-color-animated")},200)):d.addClass("vc_dependent-hidden")}),window.setTimeout(this.setTabsSize,100))},setTabsSize:function(){this.$tabsMenu.parents(".vc_with-tabs.vc_panel-body").css("margin-top",this.$tabsMenu.outerHeight())},setActive:function(){this.$el.prev().addClass("active")},window:function(){return window},getParams:function(){var a;return a=this.mapped_params,this.params=_.extend({},this.model.get("params")),_.each(a,function(a){var b;b=vc.atts.parseFrame.call(this,a),this.params[a.param_name]=b},this),_.each(vc.edit_form_callbacks,function(a){a.call(this)},this),this.params},content:function(){return this.$content},save:function(){if(this.panelInit){var a=this.model.get("shortcode"),b=this.getParams(),c=_.extend({},vc.getDefaults(a),vc.getMergedParams(a,b));_.isUndefined(b.content)||(c.content=b.content),this.model.save({params:c}),this.showMessage(window.sprintf(window.i18nLocale.inline_element_saved,vc.getMapped(a).name),"success"),!vc.frame_window&&this.hide(),this.trigger("save")}},show:function(){this.$el.hasClass("vc_active")||(this.$el.addClass("vc_active"),this.draggable||this.initDraggable(),this.fixElContainment(),this.trigger("show"))},hide:function(a){a&&a.preventDefault(),this.checkAjax(),this.ajax=!1,this.model&&(this.model=null),vc.active_panel=!1,this.currentModelParams=!1,this._killEditor(),this.$el.removeClass("vc_active"),this.$el.find(".vc_properties-list").removeClass("vc_with-tabs").css("margin-top","auto"),this.$content.empty(),this.trigger("hide")},setTitle:function(){return this.$el.find(this.titleSelector).text(vc.getMapped(this.model.get("shortcode")).name+" "+window.i18nLocale.settings),this},_killEditor:function(){_.isUndefined(window.tinyMCE)||a("textarea.textarea_html",this.$el).each(function(){var b=a(this).attr("id");"4"===tinymce.majorVersion?window.tinyMCE.execCommand("mceRemoveEditor",!0,b):window.tinyMCE.execCommand("mceRemoveControl",!0,b)}),jQuery("body").off("click.wpcolorpicker")}}),vc.EditElementUIPanel=vc.EditElementPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).extend({el:"#vc_ui-panel-edit-element",events:{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity",'click [data-vc-ui-element="panel-tab-control"]':"changeTab"},titleSelector:'[data-vc-ui-element="panel-title"]',initialize:function(){vc.EditElementUIPanel.__super__.initialize.call(this),this.on("afterResizeStart",function(){this.$el.css("maxHeight","none")})},show:function(){vc.EditElementUIPanel.__super__.show.call(this),a('[data-vc-ui-element="panel-tabs-controls"]',this.$el).remove(),this.$el.css("maxHeight","75vh")},tabsMenu:function(){if(!1===this.tabsInit){this.tabsInit=!0;var a=this.$el.find('[data-vc-ui-element="panel-tabs-controls"]');a.length&&(this.$tabsMenu=a)}return this.$tabsMenu},buildTabs:function(){var a=this.content().find('[data-vc-ui-element="panel-tabs-controls"]');a.prependTo('[data-vc-ui-element="panel-header-content"]')},changeTab:function(b){b.preventDefault();var c=a(b.currentTarget);c.parent().hasClass("vc_active")||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass("vc_active"),c.parent().addClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass("vc_active"),
this.active_tab_index=this.$el.find(c.data("vcUiElementTarget")).addClass("vc_active").index(),this.initParams(),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"),this.$content.parent().scrollTop(1).scrollTop(0),this.trigger("tabChange"))},checkTabs:function(){var b=this;!1===this.tabsInit&&(this.tabsInit=!0,this.$tabsMenu=this.$el.find('[data-vc-ui-element="panel-tabs-controls"]')),this.tabsMenu()&&(this.content().find('[data-vc-ui-element="panel-edit-element-tab"]').each(function(c){var d=b.$tabsMenu.find('> [data-tab-index="'+c+'"]');a(this).find('[data-vc-ui-element="panel-shortcode-param"]:not(".vc_dependent-hidden")').length?d.hasClass("vc_dependent-hidden")&&(d.removeClass("vc_dependent-hidden"),window.setTimeout(function(){d.removeClass("vc_tab-color-animated")},200)):d.addClass("vc_dependent-hidden")}),this.$tabsMenu.vcTabsLine("refresh"),this.$tabsMenu.vcTabsLine("moveTabs"))}})}(window.jQuery),function(a){"use strict";vc.TemplateLibraryView=vc.PanelView.vcExtendUI(vc.HelperAjax).extend({myTemplates:[],$mainPopup:!1,$loadingPage:!1,$gridContainer:!1,$myTemplateContainer:!1,$popupItems:!1,$previewImage:!1,$previewTitle:!1,$previewUpdate:!1,$previewDownload:!1,$previewUpdateBtn:!1,$previewDownloadBtn:!1,$templatePreview:!1,$templatePage:!1,$downloadPage:!1,$updatePage:!1,$content:!1,$filter:!1,compiledGridTemplate:!1,compiledTemplate:!1,loaded:!1,data:!1,events:{"click [data-dismiss=panel]":"hide","click .vc_ui-panel-close-button":"closePopupButton","click .vc_ui-access-library-btn":"accessLibrary","click #vc_template-library-template-grid .vc_ui-panel-template-preview-button":"previewButton","click .vc_ui-panel-back-button":"backToTemplates","click .vc_ui-panel-template-download-button, #vc_template-library-download-btn":"downloadButton","click .vc_ui-panel-template-update-button, #vc_template-library-update-btn":"updateButton","keyup #vc_template_lib_name_filter":"filterTemplates","search #vc_template_lib_name_filter":"filterTemplates"},initialize:function(){_.bindAll(this,"loadLibrary","addTemplateStatus","loadMyTemplates","deleteTemplate"),this.$mainPopup=this.$el.find(".vc_ui-panel-popup"),this.$loadingPage=this.$el.find(".vc_ui-panel-loading"),this.$gridContainer=this.$el.find("#vc_template-library-template-grid"),this.$myTemplateContainer=this.$el.find("#vc_template-library-shared_templates"),this.$popupItems=this.$el.find(".vc_ui-panel-popup-item"),this.$previewImage=this.$el.find(".vc_ui-panel-preview-image"),this.$previewTitle=this.$el.find(".vc_ui-panel-template-preview .vc_ui-panel-title"),this.$previewUpdate=this.$el.find("#vc_template-library-update"),this.$previewDownload=this.$el.find("#vc_template-library-download"),this.$previewUpdateBtn=this.$previewUpdate.find("#vc_template-library-update-btn"),this.$previewDownloadBtn=this.$previewUpdate.find("#vc_template-library-download-btn"),this.$templatePreview=this.$el.find(".vc_ui-panel-template-preview"),this.$templatePage=this.$el.find(".vc_ui-panel-template-content"),this.$downloadPage=this.$el.find(".vc_ui-panel-download"),this.$updatePage=this.$el.find(".vc_ui-panel-update"),this.$filter=this.$el.find("#vc_template_lib_name_filter"),this.$content=this.$el.find(".vc_ui-templates-content");var b=a("#vc_template-grid-item").html();this.compiledGridTemplate=vc.template(b);var c=a("#vc_template-item").html();this.compiledTemplate=vc.template(c),vc.events.on("templates:delete",this.deleteTemplate)},getLibrary:function(){if(this.loaded)return void this.showLibrary();this.checkAjax();var b=this.getStorage("templates"),c=this;b&&"object"==typeof b&&!_.isEmpty(b)?(this.loaded=!0,this.loadLibrary(b),this.showLibrary()):this.ajax=a.getJSON({url:"//vc-cc-templates.wpbakery.com/templates.json"}).done(function(a){c.setStorage("templates",a),c.loaded=!0,c.loadLibrary(a),c.showLibrary()}).always(this.resetAjax)},removeStorage:function(a){try{localStorage.removeItem("vc4-"+a),localStorage.removeItem("vc4-"+a+"_expiresIn")}catch(a){return!1}return!0},getStorage:function(a){var b=Date.now(),c=localStorage.getItem("vc4-"+a+"_expiresIn");if(void 0!==c&&null!==c||(c=0),c<b)return this.removeStorage(a),null;try{return JSON.parse(localStorage.getItem("vc4-"+a))}catch(a){return null}},setStorage:function(a,b,c){c=void 0===c||null===c?86400:Math.abs(c);var d=Date.now(),e=d+1e3*c;try{localStorage.setItem("vc4-"+a,JSON.stringify(b)),localStorage.setItem("vc4-"+a+"_expiresIn",e)}catch(a){return!1}return!0},loadLibrary:function(a){if(a){var b="",c=this;this.loaded=!0,this.data=a,this.$filter.val(""),a.forEach(function(a){a=c.addTemplateStatus(a),b+=c.compiledGridTemplate({id:a.id,title:a.title,thumbnailUrl:a.thumbnailUrl,previewUrl:a.previewUrl,status:a.status,downloaded:_.find(c.myTemplates,{id:a.id}),version:a.version})}),this.$gridContainer.html(b)}},showLibrary:function(){this.$loadingPage.addClass("vc_ui-hidden"),this.$mainPopup.removeClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},addTemplateStatus:function(a){var b="",c=_.find(this.myTemplates,{id:a.id});if(c){var d=window.i18nLocale.ui_template_downloaded;a.version>c.version&&(d=window.i18nLocale.ui_template_fupdate),b='<span class="vc_ui-panel-template-item-info"><span>'+d+"</span></span>"}return a.status=b,a},loadMyTemplates:function(){var a="",b=this;this.myTemplates.forEach(function(c){a+=b.compiledTemplate({post_id:c.post_id,title:c.title})}),this.$myTemplateContainer.html(a)},closePopupButton:function(a){a&&a.preventDefault&&a.preventDefault(),this.$mainPopup.toggleClass("vc_ui-hidden"),this.$popupItems.addClass("vc_ui-hidden"),this.$content.removeClass("vc_ui-hidden")},accessLibrary:function(){this.$loadingPage.removeClass("vc_ui-hidden"),this.$content.addClass("vc_ui-hidden"),this.getLibrary()},previewButton:function(b){var c=a(b.currentTarget),d=c.data("preview-url"),e=c.data("title"),f=c.data("template-id"),g=c.data("template-version");this.$previewImage.attr("src",d),this.$previewTitle.text(e);var h=_.find(this.myTemplates,{id:f});this.$previewUpdate.toggleClass("vc_ui-hidden",!(h&&h.version<g)),this.$previewDownload.toggleClass("vc_ui-hidden",!!h),this.$previewUpdateBtn.data("template-id",f),this.$previewDownloadBtn.data("template-id",f),this.$popupItems.addClass("vc_ui-hidden"),this.$templatePreview.removeClass("vc_ui-hidden"),this.$templatePreview.attr("data-template-id",f)},backToTemplates:function(){this.$popupItems.addClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},deleteTemplate:function(a){if("shared_templates"===a.type){var b=_.findIndex(this.myTemplates,{post_id:a.id});b!==-1&&(this.myTemplates.splice(b,1),this.loaded&&this.loadLibrary(this.data))}},downloadButton:function(a){a&&a.preventDefault&&a.preventDefault();var b=jQuery(a.currentTarget).closest("[data-template-id]").data("templateId");b&&(this.showDownloadOverlay(),this.downloadTemplate(b))},updateButton:function(a){a&&a.preventDefault&&a.preventDefault();var b=jQuery(a.currentTarget).closest("[data-template-id]").data("templateId");b&&this.showUpdateOverlay()},showDownloadOverlay:function(){this.$popupItems.addClass("vc_ui-hidden"),this.$downloadPage.removeClass("vc_ui-hidden")},hideDownloadOverlay:function(a){a&&alert(a),this.$downloadPage.addClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},showUpdateOverlay:function(){this.$popupItems.addClass("vc_ui-hidden"),this.$updatePage.removeClass("vc_ui-hidden")},hideUpdateOverlay:function(a){this.$updatePage.addClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},downloadTemplate:function(b){this.checkAjax();var c=!0;this.ajax=a.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_shared_templates_download",id:b,_vcnonce:window.vcAdminNonce},dataType:"json",context:this}).done(function(a){if(a&&a.success){var d=_.find(this.data,{id:b});d&&(c=!1,d.post_id=a.data.post_id,this.myTemplates.unshift(d),this.loadMyTemplates(),this.loadLibrary(this.data),this.showLibrary())}}).always(function(a,b){var d="";("success"!==b||c)&&(d=window.i18nLocale.ui_templates_failed_to_download),this.hideDownloadOverlay(d),this.resetAjax()})},filterTemplates:function(){var b=this.$filter.val(),c=".vc_ui-panel-template-item .vc_ui-panel-template-item-name:containsi('"+b+"')";a(".vc_ui-panel-template-item.vc_ui-visible",this.$gridContainer).removeClass("vc_ui-visible"),a(c,this.$gridContainer).closest(".vc_ui-panel-template-item").addClass("vc_ui-visible")}}),a(function(){window.vcTemplatesLibraryData&&(vc.templatesLibrary=new vc.TemplateLibraryView({el:'[data-vc-ui-element="panel-edit-element-tab"][data-tab="shared_templates"]'}),vc.templatesLibrary.myTemplates=window.vcTemplatesLibraryData.templates||[],vc.templatesLibrary.loadMyTemplates())})}(window.jQuery),function(a){"use strict";vc.PostSettingsUIPanelFrontendEditor=vc.PostSettingsPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({panelName:"post_settings",uiEvents:{setSize:"setEditorSize",show:"setEditorSize"},setSize:function(){this.trigger("setSize")},setDefaultHeightSettings:function(){this.$el.css("height","75vh")},setEditorSize:function(){this.editor.setSizeResizable()}}),vc.PostSettingsUIPanelBackendEditor=vc.PostSettingsPanelViewBackendEditor.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({uiEvents:{setSize:"setEditorSize",show:"setEditorSize",render:"removeChangeTitleField"},setSize:function(){this.trigger("setSize")},setEditorSize:function(){this.editor.setSizeResizable()},setDefaultHeightSettings:function(){this.$el.css("height","75vh")},removeChangeTitleField:function(){a("#vc_settings-title-container").remove()}})}(window.jQuery),function(a){"use strict";var b={'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity",'click [data-vc-ui-element="button-layout"]':"setLayout",'click [data-vc-ui-element="button-update-layout"]':"updateFromInput"};vc.RowLayoutUIPanelFrontendEditor=vc.RowLayoutEditorPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewDraggable).extend({panelName:"rowLayouts",events:b}),vc.RowLayoutUIPanelBackendEditor=vc.RowLayoutEditorPanelViewBackend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewDraggable).extend({panelName:"rowLayouts",events:b})}(window.jQuery),_.isUndefined(window.vc)&&(window.vc={}),"undefined"==typeof window.setCookie&&(window.setCookie=function(a,b,c){var d=new Date;d.setDate(d.getDate()+c);var e=encodeURIComponent(b)+(null===c?"":"; expires="+d.toUTCString());document.cookie=a+"="+e}),"undefined"==typeof window.getCookie&&(window.getCookie=function(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("=")),d=e[b].substr(e[b].indexOf("=")+1),c=c.replace(/^\s+|\s+$/g,""),c==a)return decodeURIComponent(d)}),function(a){a.expr[":"].containsi=function(a,b,c){return 0<=jQuery(a).text().toUpperCase().indexOf(c[3].toUpperCase())}}(window.jQuery);var vc_regexp_shortcode=_.memoize(function(){return RegExp("\\[(\\[?)(\\w+\\b)(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")});if(vc.memoizeWrapper=function(a,b){var c={};return function(){var d=b?b.apply(this,arguments):arguments[0];return _.hasOwnProperty.call(c,d)||(c[d]=a.apply(this,arguments)),_.isObject(c[d])?jQuery.fn.extend(!0,{},c[d]):c[d]}},vc.events.on("shortcodes:vc_row:add:param:name:parallax shortcodes:vc_row:update:param:name:parallax",function(a,b){if(b){var c=a.get("params");c&&c.css&&(c.css=c.css.replace(/(background(\-position)?\s*\:\s*[\S]+(\s*[^\!\s]+)?)[\s*\!important]*/g,"$1"),a.set("params",c,{silent:!0}))}}),vc.events.on("shortcodes:vc_single_image:sync shortcodes:vc_single_image:add",function(a){var b=a.get("params");b.link&&!b.onclick&&(b.onclick="custom_link",a.save({params:b}))}),window.vcConsoleLog=function(){vcConsoleLog.history=vcConsoleLog.history||[],vcConsoleLog.history.push(arguments),this.console&&console.log(Array.prototype.slice.call(arguments))},_.isUndefined(window.vc))var vc={};window.vc.filters={templates:[]},window.vc.addTemplateFilter=function(a){_.isFunction(a)&&this.filters.templates.push(a)},function(a){function b(b,c){this.el=b,this.$el=a(this.el),this.$el_wrap="",this.$block="",this.suggester="",this.selected_items=[],this.options=_.isObject(c)?c:{},_.defaults(this.options,{css_class:"vc_suggester",limit:!1,source:{},predefined:[],locked:!1,select_callback:function(a,b){},remove_callback:function(a,b){},update_callback:function(a,b){},check_locked_callback:function(a,b){return!1}}),this.init()}function c(b,c){this.el=b,this.$el=a(this.el),this.$data_field=this.$el.find(".wpb_vc_param_value"),this.$toolbar=this.$el.find(".vc_sorted-list-toolbar"),this.$current_control=this.$el.find(".vc_sorted-list-container"),_.defaults(this.options,{}),this.init()}var d;window.init_textarea_html=function(b){var c,e,f,g;c=a("#wp-link"),c.parent().hasClass("wp-dialog")&&c.wpdialog("destroy"),e=b.attr("id"),f=b.closest(".edit_form_line"),g=f.find(".vc_textarea_html_content");try{_.isUndefined(tinyMCEPreInit.qtInit[e])&&(window.tinyMCEPreInit.qtInit[e]=_.extend({},window.tinyMCEPreInit.qtInit[window.wpActiveEditor],{id:e})),window.tinyMCEPreInit&&window.tinyMCEPreInit.mceInit[window.wpActiveEditor]&&(window.tinyMCEPreInit.mceInit[e]=_.extend({},window.tinyMCEPreInit.mceInit[window.wpActiveEditor],{resize:"vertical",height:200,id:e,setup:function(a){"undefined"!=typeof a.on?a.on("init",function(a){a.target.focus(),window.wpActiveEditor=e}):a.onInit.add(function(a){a.focus(),window.wpActiveEditor=e})}}),window.tinyMCEPreInit.mceInit[e].plugins=window.tinyMCEPreInit.mceInit[e].plugins.replace(/,?wpfullscreen/,""),window.tinyMCEPreInit.mceInit[e].wp_autoresize_on=!1),vc.edit_element_block_view&&vc.edit_element_block_view.currentModelParams?b.val(vc_wpautop(vc.edit_element_block_view.currentModelParams[g.attr("name")]||"")):b.val(g.val()),quicktags(window.tinyMCEPreInit.qtInit[e]),QTags._buttonsInit(),window.tinymce&&(window.switchEditors&&window.switchEditors.go(e,"tmce"),"4"===tinymce.majorVersion&&tinymce.execCommand("mceAddEditor",!0,e)),d=e,window.wpActiveEditor=e}catch(c){b.data("vcTinyMceDisabled",!0).appendTo(f),a("#wp-"+e+"-wrap").remove(),console&&console.error&&(console.error("VC: Tinymce error! Compatibility problem with other plugins."),console.error(c))}},Color.prototype.toString=function(){if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var a=parseInt(this._color,10).toString(16);if(this.error)return"";if(6>a.length)for(var b=6-a.length-1;0<=b;b--)a="0"+a;return"#"+a},vc.loop_partial=function(b,c,d,e){var f=_.isObject(d)&&!_.isUndefined(d[c])?d[c]:"",g=vc.template(a("#_vcl-"+b).html(),vc.templateOptions.custom);return g({name:c,data:f,settings:e})},vc.loop_field_not_hidden=function(a,b){return!(_.isObject(b[a])&&_.isBoolean(b[a].hidden)&&!0===b[a].hidden)},vc.is_locked=function(a){return _.isObject(a)&&_.isBoolean(a.locked)&&!0===a.locked},b.prototype={constructor:b,init:function(){_.bindAll(this,"buildSource","itemSelected","labelClick","setFocus","resize"),this.$el.wrap('<ul class="'+this.options.css_class+'"><li class="input"/></ul>'),this.$el_wrap=this.$el.parent(),this.$block=this.$el_wrap.closest("ul").append(a('<li class="clear"/>')),this.$el.focus(this.resize).blur(function(){a(this).parent().width(170),a(this).val("")}),this.$block.click(this.setFocus),this.suggester=this.$el.data("suggest"),this.$el.autocomplete({source:this.buildSource,select:this.itemSelected,minLength:2,focus:function(a,b){return!1}}).data("ui-autocomplete")._renderItem=function(b,c){return a('<li data-value="'+c.value+'">').append("<a>"+c.name+"</a>").appendTo(b)},this.$el.autocomplete("widget").addClass("vc_ui-front"),_.isArray(this.options.predefined)&&_.each(this.options.predefined,function(a){this.create(a)},this)},resize:function(){var a=this.$el_wrap.position(),b=this.$block.position();this.$el_wrap.width(parseFloat(this.$block.width())-(parseFloat(a.left)-parseFloat(b.left)+4))},setFocus:function(b){b.preventDefault();var c=a(b.target);c.hasClass(this.options.css_class)&&this.$el.trigger("focus")},itemSelected:function(a,b){return this.$el.blur(),this.create(b.item),this.$el.focus(),!1},create:function(b){var c,d,e=this.selected_items.push(b)-1,f=!0===this.options.check_locked_callback(this.$el,b)?"":' <a class="remove">&times;</a>';_.isUndefined(this.selected_items[e].action)&&(this.selected_items[e].action="+"),d="-"===this.selected_items[e].action?" exclude":" include",c=a('<li class="vc_suggest-label'+d+'" data-index="'+e+'" data-value="'+b.value+'"><span class="label">'+b.name+"</span>"+f+"</li>"),c.insertBefore(this.$el_wrap),_.isEmpty(f)||c.click(this.labelClick),this.options.select_callback(c,this.selected_items)},labelClick:function(b){b.preventDefault();var c=a(b.currentTarget),d=parseInt(c.data("index"),10),e=a(b.target);return e.is(".remove")?(this.selected_items.splice(d,1),this.options.remove_callback(c,this.selected_items),c.remove(),!1):(this.selected_items[d].action="+"===this.selected_items[d].action?"-":"+","+"===this.selected_items[d].action?c.removeClass("exclude").addClass("include"):c.removeClass("include").addClass("exclude"),void this.options.update_callback(c,this.selected_items))},buildSource:function(b,c){this.ajax&&(this.ajax.abort(),c([]),this.ajax=!1);var d=_.filter(_.map(this.selected_items,function(a){return a?a.value:void 0})).join(",");this.ajax=a.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"wpb_get_loop_suggestion",field:this.suggester,exclude:d,query:b.term,_vcnonce:window.vcAdminNonce}}).done(function(a){c(a)})}},a.fn.suggester=function(c){return this.each(function(){var d=a(this),e=d.data("suggester");e||d.data("suggester",e=new b(this,c)),"string"==typeof c&&e[c]()})};var e=Backbone.View.extend({className:"loop_params_holder",events:{"click input, select":"save","change input, select":"save","change :checkbox[data-input]":"updateCheckbox"},query_options:{},return_array:{},controller:"",initialize:function(){_.bindAll(this,"save","updateSuggestion","suggestionLocked")},render:function(b){var c=vc.template(a("#vcl-loop-frame").html(),_.extend({},vc.templateOptions.custom,{variable:"loop"}));return this.controller=b,this.$el.html(c(this.model)),this.controller.$el.append(this.$el),_.each(a("[data-suggest]"),function(b){var c=a(b),d=window.decodeURIComponent(a("[data-suggest-prefill="+c.data("suggest")+"]").val());c.suggester({predefined:a.parseJSON(d),select_callback:this.updateSuggestion,update_callback:this.updateSuggestion,remove_callback:this.updateSuggestion,check_locked_callback:this.suggestionLocked})},this),this},show:function(){this.$el.slideDown()},save:function(a){this.return_array={},_.each(this.model,function(a,b){var a=this.getValue(b,a);_.isString(a)&&!_.isEmpty(a)&&(this.return_array[b]=a)},this),this.controller.setInputValue(this.return_array)},getValue:function(b){var c=a("[name="+b+"]",this.$el).val();return c},hide:function(){this.$el.slideUp()},toggle:function(){this.$el.is(":animated")||this.$el.slideToggle()},updateCheckbox:function(b){var c=a(b.currentTarget),d=c.data("input"),e=a("[data-name="+d+"]",this.$el),f=[];a("[data-input="+d+"]:checked").each(function(){f.push(a(this).val())}),e.val(f),this.save()},updateSuggestion:function(a,b){var c,d=a.closest("[data-block=suggestion]");c=_.reduce(b,function(a,b){return _.isEmpty(b)?"":a+(_.isEmpty(a)?"":",")+("-"===b.action?"-":"")+b.value},"").trim(),d.find("[data-suggest-value]").val(c).trigger("change")},suggestionLocked:function(a,b){var c=b.value,d=a.closest("[data-block=suggestion]").find("[data-suggest-value]").data("suggest-value");return this.controller.settings&&this.controller.settings[d]&&_.isBoolean(this.controller.settings[d].locked)&&1==this.controller.settings[d].locked&&_.isString(this.controller.settings[d].value)&&0<=_.indexOf(this.controller.settings[d].value.replace("-","").split(/\,/),""+c)}}),f=Backbone.View.extend({events:{"click .vc_loop-build":"showEditor"},initialize:function(){_.bindAll(this,"createEditor"),this.$input=a(".wpb_vc_param_value",this.$el),this.$button=this.$el.find(".vc_loop-build"),this.data=this.$input.val(),this.settings=a.parseJSON(window.decodeURIComponent(this.$button.data("settings")))},render:function(){return this},showEditor:function(b){return b.preventDefault(),_.isObject(this.loop_editor_view)?(this.loop_editor_view.toggle(),!1):void a.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"wpb_get_loop_settings",value:this.data,settings:this.settings,post_id:vc.post_id,_vcnonce:window.vcAdminNonce}}).done(this.createEditor)},createEditor:function(a){this.loop_editor_view=new e({model:_.isEmpty(a)?{}:a}),this.loop_editor_view.render(this).show()},setInputValue:function(a){this.$input.val(_.map(a,function(a,b){return b+":"+a}).join("|"))}}),g=Backbone.View.extend({events:{"click .vc_options-edit":"showEditor","click .vc_close-button":"showEditor","click input, select":"save","change input, select":"save","keyup input":"save"},data:{},fields:{},initialize:function(){this.$button=this.$el.find(".vc_options-edit"),this.$form=this.$el.find(".vc_options-fields"),this.$input=this.$el.find(".wpb_vc_param_value"),this.settings=this.$form.data("settings"),this.parseData(),this.render()},render:function(){var b="";return _.each(this.settings,function(c){_.isUndefined(this.data[c.name])?_.isUndefined(c.value)||(c.value=c.value.toString().split(","),this.data[c.name]=c.value):c.value=this.data[c.name],this.fields[c.name]=c;var d=a("#vcl-options-field-"+c.type);if(d.is("script")){var e=vc.template(d.html(),vc.templateOptions.custom);b+=e(_.extend({},{name:"",label:"",value:[],options:"",description:""},c))}},this),this.$form.html(b+this.$form.html()),this},parseData:function(){_.each(this.$input.val().split("|"),function(a){if(a.match(/\:/)){var b=a.split(":"),c=b[0],d=b[1];this.data[c]=_.map(d.split(","),function(a){return window.decodeURIComponent(a)})}},this)},saveData:function(){var a=_.map(this.data,function(a,b){return b+":"+_.map(a,function(a){return window.encodeURIComponent(a)}).join(",")}).join("|");this.$input.val(a)},showEditor:function(){this.$form.slideToggle()},save:function(b){var c=a(b.currentTarget);if(c.is(":checkbox")){var d=[];this.$el.find("input[name="+c.attr("name")+"]").each(function(){this.checked&&d.push(a(this).val())}),this.data[c.attr("name")]=d}else this.data[c.attr("name")]=[c.val()];this.saveData()}});c.prototype={constructor:c,init:function(){_.bindAll(this,"controlEvent","save"),this.$toolbar.on("change","input",this.controlEvent);var a=this.$data_field.val().split(",");for(var b in a){var c=a[b].split("|"),d=!!c.length&&this.$toolbar.find("[data-element="+decodeURIComponent(c[0])+"]");!1!==d&&d.is("input")&&(d.prop("checked",!0),this.createControl({value:d.val(),label:d.parent().text(),sub:d.data("subcontrol"),sub_value:_.map(c.slice(1),function(a){return window.decodeURIComponent(a)})}))}this.$current_control.sortable({stop:this.save}).on("change","select",this.save)},createControl:function(a){var b="",c=_.isUndefined(a.sub_value)?[]:a.sub_value;_.isArray(a.sub)&&_.each(a.sub,function(a,d){b+=" <select>",_.each(a,function(a){b+='<option value="'+a[0]+'"'+(_.isString(c[d])&&c[d]===a[0]?' selected="true"':"")+">"+a[1]+"</option>"}),b+="</select>"},this),this.$current_control.append('<li class="vc_control-'+a.value+'" data-name="'+a.value+'">'+a.label+b+"</li>")},controlEvent:function(b){var c=a(b.currentTarget);c[0].checked?this.createControl({value:c.val(),label:c.parent().text(),sub:c.data("subcontrol")}):this.$current_control.find(".vc_control-"+c.val()).remove(),this.save()},save:function(){var b=_.map(this.$current_control.find("[data-name]"),function(b){var c=encodeURIComponent(a(b).data("name"));return a(b).find("select").each(function(){var b=a(this);b.is("select")&&""!==b.val()&&(c+="|"+encodeURIComponent(b.val()))}),c}).join(",");this.$data_field.val(b)}},a.fn.VcSortedList=function(b){return this.each(function(){var d=a(this),e=d.data("vc_sorted_list");_.isObject(b)?b:{},e||d.data("vc_sorted_list",e=new c(this,b)),"string"==typeof b&&e[b]()})};var h=Backbone.View.extend({preview_el:".vc_google_fonts_form_field-preview-container > span",font_family_dropdown_el:".vc_google_fonts_form_field-font_family-container > select",font_style_dropdown_el:".vc_google_fonts_form_field-font_style-container > select",font_style_dropdown_el_container:".vc_google_fonts_form_field-font_style-container",status_el:".vc_google_fonts_form_field-status-container > span",events:{"change .vc_google_fonts_form_field-font_family-container > select":"fontFamilyDropdownChange","change .vc_google_fonts_form_field-font_style-container > select":"fontStyleDropdownChange"},initialize:function(b){_.bindAll(this,"previewElementInactive","previewElementActive","previewElementLoading"),this.$preview_el=a(this.preview_el,this.$el),this.$font_family_dropdown_el=a(this.font_family_dropdown_el,this.$el),this.$font_style_dropdown_el=a(this.font_style_dropdown_el,this.$el),this.$font_style_dropdown_el_container=a(this.font_style_dropdown_el_container,this.$el),this.$status_el=a(this.status_el,this.$el),this.fontFamilyDropdownRender()},render:function(){return this},previewElementRender:function(){return this.$preview_el.css({"font-family":this.font_family,"font-style":this.font_style,"font-weight":this.font_weight}),this},previewElementInactive:function(){this.$status_el.text(window.i18nLocale.gfonts_loading_google_font_failed||"Loading google font failed.").css("color","#FF0000")},previewElementActive:function(){this.$preview_el.text("Grumpy wizards make toxic brew for the evil Queen and Jack.").css("color","inherit"),this.fontStyleDropdownRender()},previewElementLoading:function(){this.$preview_el.text(window.i18nLocale.gfonts_loading_google_font||"Loading Font...")},fontFamilyDropdownRender:function(){return this.fontFamilyDropdownChange(),this},fontFamilyDropdownChange:function(){var a=this.$font_family_dropdown_el.find(":selected");return this.font_family_url=a.val(),this.font_family=a.attr("data[font_family]"),this.font_types=a.attr("data[font_types]"),this.$font_style_dropdown_el_container.parent().hide(),this.font_family_url&&0<this.font_family_url.length&&WebFont.load({google:{families:[this.font_family_url]},inactive:this.previewElementInactive,active:this.previewElementActive,loading:this.previewElementLoading}),this},fontStyleDropdownRender:function(){var a=this.font_types,b=a.split(","),c="",d=this.$font_family_dropdown_el.attr("default[font_style]");for(var e in b){var f=b[e].split(":"),g="";_.isString(d)&&0<d.length&&b[e]==d&&(g="selected"),c=c+"<option "+g+' value="'+b[e]+'" data[font_weight]="'+f[1]+'" data[font_style]="'+f[2]+'" class="'+f[2]+"_"+f[1]+'" >'+f[0]+"</option>"}return this.$font_style_dropdown_el.html(c),this.$font_style_dropdown_el_container.parent().show(),this.fontStyleDropdownChange(),this},fontStyleDropdownChange:function(){var a=this.$font_style_dropdown_el.find(":selected");return this.font_weight=a.attr("data[font_weight]"),this.font_style=a.attr("data[font_style]"),this.previewElementRender(),this}}),i=Backbone.View.extend({min_length:2,delay:500,auto_focus:!0,ajax_url:window.ajaxurl,source_data:function(){return{}},replace_values_on_select:!1,initialize:function(b){_.bindAll(this,"sortableChange","resize","labelRemoveHook","updateItems","sortableCreate","sortableUpdate","source","select","labelRemoveClick","createBox","focus","response","change","close","open","create","search","_renderItem","_renderMenu","_renderItemData","_resizeMenu"),b=a.extend({min_length:this.min_length,delay:this.delay,auto_focus:this.auto_focus,replace_values_on_select:this.replace_values_on_select},b),this.options=b,this.param_name=this.options.param_name,this.$el=this.options.$el,this.$el_wrap=this.$el.parent(),this.$sortable_wrapper=this.$el_wrap.parent(),this.$input_param=this.options.$param_input,this.selected_items=[],this.isMultiple=!1,this.render()},resize:function(){var a=this.$el_wrap.position(),b=this.$block.position(),c=this.$el.autocomplete("widget");c.width(parseFloat(this.$block.width())-(parseFloat(a.left)-parseFloat(b.left)+4)+11)},enableMultiple:function(){this.isMultiple=!0,this.$el.show(),this.$el.focus()},enableSortable:function(){this.sortable=this.$sortable_wrapper.sortable({items:".vc_data",axis:"y",change:this.sortableChange,create:this.sortableCreate,update:this.sortableUpdate})},updateItems:function(){this.selected_items.length?this.$input_param.val(this.getSelectedItems().join(", ")):this.$input_param.val("")},sortableChange:function(a,b){},itemsCreate:function(){var a=[];this.$block.find(".vc_data").each(function(b,c){a.push({label:c.dataset.label,value:c.dataset.value})}),this.selected_items=a},sortableCreate:function(a,b){},sortableUpdate:function(b,c){var d=this.$sortable_wrapper.sortable("toArray",{attribute:"data-index"}),e=[];_.each(d,function(a){e.push(this.selected_items[a])},this);var f=0;a("li.vc_data",this.$sortable_wrapper).each(function(){a(this).attr("data-index",f++)}),this.selected_items=e,this.updateItems()},getWidget:function(){return this.$el.autocomplete("widget")},render:function(){if(this.$el.focus(this.resize),this.data=this.$el.autocomplete({source:this.source,minLength:this.options.min_length,delay:this.options.delay,autoFocus:this.options.auto_focus,select:this.select,focus:this.focus,response:this.response,change:this.change,close:this.close,open:this.open,create:this.create,search:this.search}),this.data.data("ui-autocomplete")._renderItem=this._renderItem,this.data.data("ui-autocomplete")._renderMenu=this._renderMenu,this.data.data("ui-autocomplete")._resizeMenu=this._resizeMenu,0<this.$input_param.val().length){this.isMultiple?this.$el.focus():this.$el.hide();var b=this;a(".vc_autocomplete-label.vc_data",this.$sortable_wrapper).each(function(){b.labelRemoveHook(a(this))})}return this.getWidget().addClass("vc_ui-front").addClass("vc_ui-auotocomplete"),this.$block=this.$el_wrap.closest("ul").append(a('<li class="clear"/>')),this.itemsCreate(),this},close:function(a,b){this.selected&&this.options.no_hide&&(this.getWidget().show(),this.selected++,2<this.selected&&(this.selected=void 0))},open:function(a,b){var c=this.getWidget().menu(),d=c.position();c.css("left",d.left-6),c.css("top",d.top+2)},focus:function(a,b){if(!this.options.replace_values_on_select)return a.preventDefault(),!1},create:function(a,b){},change:function(a,b){},response:function(a,b){},search:function(a,b){},select:function(b,c){if(this.selected=1,c.item){if(this.options.unique_values){var d=this.getWidget().data("uiMenu").active;if(this.options.groups){var e=d.prev(),f=d.next();e.hasClass("vc_autocomplete-group")&&!f.hasClass("vc_autocomplete-item")&&e.remove()}d.remove();var g=this;a("li.ui-menu-item",this.getWidget()).length||(g.selected=void 0)}this.createBox(c.item),this.isMultiple?this.$el.focus():this.$el.hide()}return!1},createBox:function(b){var c,d=this.selected_items.push(b)-1,e='<a class="vc_autocomplete-remove">&times;</a>';this.updateItems(),c=a('<li class="vc_autocomplete-label vc_data" data-index="'+d+'" data-value="'+b.value+'" data-label="'+b.label+'"><span class="vc_autocomplete-label"><a>'+b.label+"</a></span>"+e+"</li>"),c.insertBefore(this.$el_wrap),this.labelRemoveHook(c)},labelRemoveHook:function(a){this.$el.blur(),this.$el.val(""),a.click(this.labelRemoveClick)},labelRemoveClick:function(b,c){b.preventDefault();var d=a(b.currentTarget),e=a(b.target);if(e.is(".vc_autocomplete-remove"))return this.selected_items.splice(d.index(),1),d.remove(),this.updateItems(),this.$el.show(),!1},getSelectedItems:function(){if(this.selected_items.length){var a=[];return _.each(this.selected_items,function(b){
a.push(b.value)}),a}return!1},_renderMenu:function(b,c){var d=this,e=null;this.options.groups&&c.sort(function(a,b){return a.group>b.group}),a.each(c,function(a,c){d.options.groups&&c.group!=e&&(e=c.group,b.append("<li class='ui-autocomplete-group vc_autocomplete-group' aria-label='"+e+"'>"+e+"</li>")),d._renderItemData(b,c)})},_renderItem:function(b,c){return a('<li data-value="'+c.value+'" class="vc_autocomplete-item">').append("<a>"+c.label+"</a>").appendTo(b)},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_resizeMenu:function(){},clearValue:function(){this.selected_items=[],this.updateItems(),a(".vc_autocomplete-label.vc_data",this.$sortable_wrapper).remove()},source:function(b,c){var d=this;this.options.values&&0<this.options.values.length?c(this.options.unique_values?a.ui.autocomplete.filter(_.difference(this.options.values,this.selected_items),b.term):a.ui.autocomplete.filter(this.options.values,b.term)):a.ajax({type:"POST",dataType:"json",url:this.ajax_url,data:a.extend({action:"vc_get_autocomplete_suggestion",shortcode:vc.active_panel.model.get("shortcode"),param:this.param_name,query:b.term,_vcnonce:window.vcAdminNonce},this.source_data(b,c))}).done(function(a){c(d.options.unique_values?_.filter(a,function(a){return!_.findWhere(d.selected_items,a)}):a)})}}),j=Backbone.View.extend({$content:{},initialize:function(){_.bindAll(this,"content"),this.$content=this.$el,this.model=vc.active_panel.model},setContent:function(a){this.$content=a},content:function(){return this.$content},render:function(){var b;return b=this,a('[data-vc-ui-element="panel-shortcode-param"]',this.content()).each(function(){var c=a(this),d=c.data("param_settings");vc.atts.init.call(b,d,c)}),this}}),k=Backbone.View.extend({options:{max_items:0,sortable:!0,deletable:!0,collapsible:!0},items:0,$ul:!1,initializer:{},mappedParams:{},adminLabelParams:[],groupParamName:"",events:{"click > .edit_form_line > .vc_param_group-list > .vc_param_group-add_content":"addNew"},initialize:function(b){var c,d,e;this.$ul=this.$el.find("> .edit_form_line > .vc_param_group-list"),c=a("> .wpb_vc_row",this.$ul),this.initializer=new j({el:this.$el}),this.model=vc.active_panel.model,d=this.$ul.data("settings"),this.mappedParams={},this.adminLabelParams=[],this.options=_.defaults({},_.isObject(b.settings)?b.settings:{},d,this.options),this.groupParamName=this.options.param.param_name,_.isObject(this.options.param)&&_.isArray(this.options.param.params)&&_.each(this.options.param.params,function(a){var b;b=this.groupParamName+"_"+a.param_name,this.mappedParams[b]=a,_.isObject(a)&&!0===a.admin_label&&this.adminLabelParams.push(b)},this),this.items=0,e=this,c.length&&c.each(function(){c.data("vc-param-group-param",new l({el:a(this),parent:e})),e.items++,e.afterAdd(a(this),"init")}),this.options.sortable&&this.$ul.sortable({handle:".vc_control.column_move",items:"> .wpb_vc_row:not(vc_param_group-add_content-wrapper)",placeholder:"vc_placeholder"})},addNew:function(b){if(b.preventDefault(),this.addAllowed()){var c,d;if("undefined"!=typeof this.options.param.callbacks&&"undefined"!=typeof this.options.param.callbacks.before_add&&(d=window[this.options.param.callbacks.before_add],"function"==typeof d&&!d()))return;c=a(JSON.parse(this.$ul.next(".vc_param_group-template").html())),c.removeClass("vc_param_group-add_content-wrapper"),c.insertBefore(b.currentTarget),c.show(),this.initializer.setContent(c.find("> .wpb_element_wrapper")),this.initializer.render(),this.items++,c.data("vc-param-group-param",new l({el:c,parent:this})),this.afterAdd(c,"new"),vc.events.trigger("vc-param-group-add-new",b,c,this)}},addAllowed:function(){return 0<this.options.max_items&&this.items+1<=this.options.max_items||0>=this.options.max_items},afterAdd:function(a,b){var c;this.addAllowed()||(this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_clone").hide(),this.$ul.find("> .vc_param_group-add_content").hide()),this.options.sortable||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_control.column_move").hide(),this.options.deletable||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_delete").hide(),this.options.collapsible||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_toggle").hide(),"undefined"!=typeof this.options.param.callbacks&&"undefined"!=typeof this.options.param.callbacks.after_add&&(c=window[this.options.param.callbacks.after_add],"function"==typeof c&&c(a,b))},afterDelete:function(){var a;this.addAllowed()&&(this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_clone").show(),this.$ul.find("> .vc_param_group-add_content").show()),"undefined"!=typeof this.options.param.callbacks&&"undefined"!=typeof this.options.param.callbacks.after_delete&&(a=window[this.options.param.callbacks.after_delete],"function"==typeof a&&a())}}),l=Backbone.View.extend({dependentElements:!1,mappedParams:!1,groupParamName:"",adminLabelParams:[],events:{"click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_toggle":"toggle","click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_delete":"deleteParam","click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_clone":"clone"},initialize:function(a){this.options=a,this.$content=this.options.parent.$ul,this.model=vc.active_panel.model,this.mappedParams=this.options.parent.mappedParams,this.groupParamName=this.options.parent.groupParamName,this.adminLabelParams=this.options.parent.adminLabelParams,this.dependentElements={},_.bindAll(this,"hookDependent"),this.initializeDependency(),_.bindAll(this,"hookAdminLabel"),this.initializeAdminLabels()},initializeAdminLabels:function(){var b,c,d;for(d=this.hookAdminLabel,b=0;b<this.adminLabelParams.length;b++)c=a("[name="+this.adminLabelParams[b]+"].wpb_vc_param_value",this.$el),c.each(function(){var b=a(this);b.data("vc_admin_labels")||(b.data("vc_admin_labels",!0),b.bind("keyup change",d),d({currentTarget:this}))})},hookAdminLabel:function(b){var c,d,e,f,g,h,i,j,k;for(g="",h="",i=[],j=a(b.currentTarget),k=j.closest(".vc_param_group-wrapper"),d=j.closest(".vc_param").find(".vc_param-group-admin-labels"),c=0;c<this.adminLabelParams.length;c++){var l;e=this.adminLabelParams[c],j=k.find("[name="+e+"]"),l=j.closest('[data-vc-ui-element="panel-shortcode-param"]'),"undefined"!=typeof this.mappedParams[e]&&(g=this.mappedParams[e].heading),h=j.is("select")?j.find("option:selected").text():j.is("input:checkbox")?j[0].checked?j.val():"":j.val(),f={type:l.data("param_type"),param_name:l.data("param_name")},_.isObject(vc.atts[f.type])&&_.isFunction(vc.atts[f.type].render)&&(h=vc.atts[f.type].render.call(this,f,h)),""!==h&&i.push("<label>"+g+"</label>: "+h)}d.html(i.join(", ")).toggleClass("vc_hidden-label",!i.length)},initializeDependency:function(){var b;b={},_.each(this.mappedParams,function(c,d){if(_.isObject(c)&&_.isObject(c.dependency)&&_.isString(c.dependency.element)){var e,f;e=a("[name="+this.groupParamName+"_"+c.dependency.element+"].wpb_vc_param_value",this.$el),f=a("[name="+d+"].wpb_vc_param_value",this.$el),f.length&&_.each(e,function(d){var e;e=a(d);var g,h;g=e.attr("name"),h=c.dependency,_.isArray(this.dependentElements[g])||(this.dependentElements[g]=[]),this.dependentElements[g].push(f),e.data("dependentSet")||(e.attr("data-dependent-set","true"),e.bind("keyup change",this.hookDependent)),b[g]||(b[g]=e),_.isString(h.callback)&&window[h.callback].call(this)},this)}},this),_.each(b,function(a){this.hookDependent({currentTarget:a})},this)},hookDependent:function(b){var c,d,e,f,g;return c=a(b.currentTarget),d=c.closest(".vc_column"),f=this.dependentElements[c.attr("name")],g=c.is(":checkbox")?_.map(this.$el.find("[name="+c.attr("name")+"].wpb_vc_param_value:checked"),function(b){return a(b).val()}):c.val(),e=c.is(":checkbox")?!this.$el.find("[name="+c.attr("name")+"].wpb_vc_param_value:checked").length:!g.length,d.hasClass("vc_dependent-hidden")?_.each(f,function(b){var c=a.Event("change");c.extra_type="vcHookDependedParamGroup",b.closest(".vc_column").addClass("vc_dependent-hidden"),b.trigger(c)}):_.each(f,function(b){var c,d,f,h;d=b.attr("name"),f=_.isObject(this.mappedParams[d])&&_.isObject(this.mappedParams[d].dependency)?this.mappedParams[d].dependency:{},h=b.closest(".vc_column"),_.isBoolean(f.not_empty)&&!0===f.not_empty&&!e?h.removeClass("vc_dependent-hidden"):_.isBoolean(f.is_empty)&&!0===f.is_empty&&e?h.removeClass("vc_dependent-hidden"):f.value&&_.intersection(_.isArray(f.value)?f.value:[f.value],_.isArray(g)?g:[g]).length?h.removeClass("vc_dependent-hidden"):f.value_not_equal_to&&!_.intersection(_.isArray(f.value_not_equal_to)?f.value_not_equal_to:[f.value_not_equal_to],_.isArray(g)?g:[g]).length?h.removeClass("vc_dependent-hidden"):h.addClass("vc_dependent-hidden"),c=a.Event("change"),c.extra_type="vcHookDependedParamGroup",b.trigger(c)},this),this},deleteParam:function(a){_.isObject(a)&&a.preventDefault&&a.preventDefault();var b=confirm(window.i18nLocale.press_ok_to_delete_section);!0===b&&(this.options.parent.items--,this.options.parent.afterDelete(),this.$el.remove(),this.unbind(),this.remove())},content:function(){return this.$content},clone:function(b){if(b.preventDefault(),this.options.parent.addAllowed()){var c=this.options.parent.$ul.data("settings"),d=this.$content;this.$content=this.$el;var e=vc.atts.param_group.parseOne.call(this,c);a.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_param_group_clone",param:encodeURIComponent(JSON.stringify(c)),shortcode:vc.active_panel.model.get("shortcode"),value:e,vc_inline:!0,_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(b){var c;c=a(b),c.insertAfter(this.$el),this.$content=d,this.options.parent.initializer.$content=a("> .wpb_element_wrapper",c),this.options.parent.initializer.render(),c.data("vc-param-group-param",new l({el:c,parent:this.options.parent})),this.options.parent.items++,this.options.parent.afterAdd(c,"clone")})}},toggle:function(a){a.preventDefault();var b=this.$el,c=b.find("> .wpb_element_wrapper");c.slideToggle(),b.toggleClass("vc_param_group-collapsed").siblings(":not(.vc_param_group-collapsed)").addClass("vc_param_group-collapsed").find("> .wpb_element_wrapper").slideUp()}});window.i18nLocale,vc.edit_form_callbacks=[],vc.atts={parse:function(a){var b,c,d,e;if(e=this.content().find(".wpb_vc_param_value[name="+a.param_name+"]"),d=e.closest('[data-vc-ui-element="panel-shortcode-param"]'),_.isUndefined(vc.atts[a.type])||_.isUndefined(vc.atts[a.type].parse)?b=e.length?e.val():null:d.data("vcInitParam")?b=vc.atts[a.type].parse.call(this,a):(c=this.model.get("params"),b=_.isUndefined(c[a.param_name])?e.length?e.val():null:c[a.param_name]),"undefined"!=typeof e.data("js-function")&&"undefined"!=typeof window[e.data("js-function")]){var f=window[e.data("js-function")];f(this.$el,this,a)}return b},parseFrame:function(a){return vc.atts.parse.call(this,a)},init:function(a,b){_.isUndefined(vc.atts[a.type])||_.isUndefined(vc.atts[a.type].init)||vc.atts[a.type].init.call(this,a,b)}},vc.atts.textarea_html={parse:function(a){var b=this.window(),c=this.content().find(".textarea_html."+a.param_name);try{b.tinyMCE&&_.isArray(b.tinyMCE.editors)&&_.each(b.tinyMCE.editors,function(a){"wpb_tinymce_content"===a.id&&a.save()})}catch(a){console&&console.error&&console.error(a)}return c.val()},render:function(a,b){return _.isUndefined(b)?b:vc_wpautop(b)}},vc.atts.textarea_safe={parse:function(a){var b=this.content().find(".wpb_vc_param_value[name="+a.param_name+"]"),c=b.val();return c.match(/"|(http)/)?"#E-8_"+base64_encode(rawurlencode(c)):c},render:function(b,c){return c&&c.match(/^#E\-8_/)?a("<div/>").text(rawurldecode(base64_decode(c.replace(/^#E\-8_/,"")))).html():c}},vc.atts.checkbox={parse:function(b){var c,d;return c=[],d="",a("input[name="+b.param_name+"]",this.content()).each(function(){var b;b=a(this),this.checked&&c.push(b.attr("value"))}),0<c.length&&(d=c.join(",")),d},defaults:function(a){return""}},vc.atts.el_id={clone:function(a,b,c){var d;d=a.get("params"),_.isUndefined(c)||_.isUndefined(c.settings)||_.isUndefined(c.settings.auto_generate)||!0!==c.settings.auto_generate?d[c.param_name]="":d[c.param_name]=Date.now()+"-"+vc_guid(),a.set({params:d},{silent:!0})},create:function(a,b,c){if(a.get("cloned"))return vc.atts.el_id.clone(a,b,c);if(_.isEmpty(b)&&!_.isUndefined(c)&&!_.isUndefined(c.settings)&&!_.isUndefined(c.settings.auto_generate)&&1==c.settings.auto_generate){var d;d=a.get("params"),d[c.param_name]=Date.now()+"-"+vc_guid(),a.set({params:d},{silent:!0})}}},vc.events.on("shortcodes:add:param:type:el_id",vc.atts.el_id.create),vc.atts.posttypes={parse:function(b){var c=[],d="";return a("input[name="+b.param_name+"]",this.content()).each(function(){var b=a(this);this.checked&&c.push(b.attr("value"))}),0<c.length&&(d=c.join(",")),d}},vc.atts.taxonomies={parse:function(b){var c=[],d="";return a("input[name="+b.param_name+"]",this.content()).each(function(){var b=a(this);this.checked&&c.push(b.attr("value"))}),0<c.length&&(d=c.join(",")),d}},vc.atts.exploded_textarea={parse:function(a){var b=this.content().find(".wpb_vc_param_value[name="+a.param_name+"]");return b.val().replace(/\n/g,",")}},vc.atts.exploded_textarea_safe={parse:function(a){var b,c;return b=this.content().find(".wpb_vc_param_value[name="+a.param_name+"]"),c=b.val(),c=c.replace(/\n/g,","),c.match(/"|(http)/)?"#E-8_"+base64_encode(rawurlencode(c)):c},render:function(b,c){return c&&c.match(/^#E\-8_/)?a("<div/>").text(rawurldecode(base64_decode(c.replace(/^#E\-8_/,"")))).html():c}},vc.atts.textarea_raw_html={parse:function(a){var b=this.content().find(".wpb_vc_param_value[name="+a.param_name+"]"),c=b.val();return base64_encode(rawurlencode(c))},render:function(b,c){return c?a("<div/>").text(rawurldecode(base64_decode(c.trim()))).html():""}},vc.atts.dropdown={render:function(a,b){return b},init:function(b,c){a(".wpb_vc_param_value.dropdown",c).change(function(){var b=a(this),c=b.find(":selected"),d=b.data("option"),e=c.length?c.attr("class").replace(/\s/g,"_"):"";e=e.replace("#","hash-"),"undefined"!=typeof d&&b.removeClass(d),"undefined"!=typeof e&&b.data("option",e)&&b.addClass(e)})},defaults:function(a){var b;return _.isArray(a.value)||_.isString(a.value)?_.isArray(a.value)?(b=a.value[0],_.isArray(b)&&b.length?b[0]:b):"":(b=_.values(a.value)[0],b.label?b.value:b)}},vc.atts.attach_images={parse:function(b){var c=this.content().find(".wpb_vc_param_value[name="+b.param_name+"]"),d="";return c.parent().find("li.added").each(function(){d+='<li><img src="'+a(this).find("img").attr("src")+'" alt=""></li>'}),a("[data-model-id="+this.model.id+"]").data("field-"+b.param_name+"-attach-images",d),c.length?c.val():null},render:function(b,c){var d=this.$el.find(".attachment-thumbnails[data-name="+b.param_name+"]");return"external_link"===this.model.getParam("source")&&(c=this.model.getParam("custom_srcs")),_.isEmpty(c)?(this.$el.removeData("field-"+b.param_name+"-attach-images"),vc.atts.attach_images.updateImages(d,"")):a.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_gallery_html",content:c,_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(a){vc.atts.attach_images.updateImages(d,a)}),c},updateImages:function(a,b){a.html(b),b.length?a.removeClass("image-exists").next().addClass("image-exists"):a.addClass("image-exists").next().removeClass("image-exists")}},vc.atts.href={parse:function(a){var b=this.content().find(".wpb_vc_param_value[name="+a.param_name+"]"),c="";return b.length&&"http://"!==b.val()&&(c=b.val()),c}},vc.atts.attach_image={parse:function(b){var c=this.content().find(".wpb_vc_param_value[name="+b.param_name+"]"),d="";return c.parent().find("li.added").length&&(d=c.parent().find("li.added img").attr("src")),a("[data-model-id="+this.model.id+"]").data("field-"+b.param_name+"-attach-image",d),c.length?c.val():null},render:function(b,c){var d=a("[data-model-id="+this.model.id+"]"),e=d.data("field-"+b.param_name+"-attach-image"),f=this.$el.find(".attachment-thumbnail[data-name="+b.param_name+"]"),g=a("#post_ID"),h=g.length?g.val():0;if("image"===b.param_name)switch(this.model.getParam("source")){case"external_link":vc.atts.attach_image.updateImage(f,this.model.getParam("custom_src"));break;default:_.isEmpty(c)&&"featured_image"!==this.model.getParam("source")?_.isUndefined(e)||(d.removeData("field-"+b.param_name+"-attach-image"),vc.atts.attach_image.updateImage(f,e)):a.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:c,params:this.model.get("params"),post_id:h,_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(a){var b=a.length||"featured_image"===this.model.getParam("source");vc.atts.attach_image.updateImage(f,a,b)})}return c},updateImage:function(a,b,c){a.length&&("undefined"==typeof c&&(c=!1),c||!_.isEmpty(b)?(a.attr("src",b),_.isEmpty(b)?(a.hide(),a.next().removeClass("image-exists").next().addClass("image-exists")):(a.show(),a.next().addClass("image-exists").next().addClass("image-exists"))):a.attr("src","").hide().next().removeClass("image-exists").next().removeClass("image-exists"))}},vc.atts.google_fonts={parse:function(b){var c,d,e=this.content().find(".wpb_vc_param_value[name="+b.param_name+"]"),f=e.parent(),g={};return g.font_family=f.find(".vc_google_fonts_form_field-font_family-select > option:selected").val(),g.font_style=f.find(".vc_google_fonts_form_field-font_style-select > option:selected").val(),c=_.map(g,function(a,b){if(_.isString(a)&&0<a.length)return b+":"+encodeURIComponent(a)}),d=a.grep(c,function(a){return _.isString(a)&&0<a.length}).join("|")},init:function(a,b){var c=b;c.length&&("undefined"!=typeof WebFont?b.data("vc-param-object",new h({el:c})):c.find("> .edit_form_line").html(window.i18nLocale.gfonts_unable_to_load_google_fonts||"Unable to load Google Fonts"))}},vc.atts.font_container={parse:function(b){var c,d,e=this.content().find(".wpb_vc_param_value[name="+b.param_name+"]"),f=e.parent(),g={};return g.tag=f.find(".vc_font_container_form_field-tag-select > option:selected").val(),g.font_size=f.find(".vc_font_container_form_field-font_size-input").val(),g.text_align=f.find(".vc_font_container_form_field-text_align-select > option:selected").val(),g.font_family=f.find(".vc_font_container_form_field-font_family-select > option:selected").val(),g.color=f.find(".vc_font_container_form_field-color-input").val(),g.line_height=f.find(".vc_font_container_form_field-line_height-input").val(),g.font_style_italic=f.find(".vc_font_container_form_field-font_style-checkbox.italic").prop("checked")?"1":"",g.font_style_bold=f.find(".vc_font_container_form_field-font_style-checkbox.bold").prop("checked")?"1":"",c=_.map(g,function(a,b){if(_.isString(a)&&0<a.length)return b+":"+encodeURIComponent(a)}),d=a.grep(c,function(a){return _.isString(a)&&0<a.length}).join("|")},init:function(a,b){vc.atts.colorpicker.init.call(this,a,b)}},vc.atts.param_group={parse:function(b){var c,d,e,f;return d=this.content(),e=d.find('.wpb_el_type_param_group[data-vc-ui-element="panel-shortcode-param"][data-vc-shortcode-param-name="'+b.param_name+'"]'),f=e.find("> .edit_form_line > .vc_param_group-list"),c=vc.atts.param_group.extractValues.call(this,b,a('>.wpb_vc_row:not(".vc_param_group-add_content-wrapper")',f)),this.$content=d,encodeURIComponent(JSON.stringify(c))},extractValues:function(b,c){var d,e;return d=[],e=this,c.each(function(){var c;c={},e.$content=a(this),_.each(b.params,function(d){var f,g,h;f=a.extend({},d),g=f.param_name,f.param_name=b.param_name+"_"+g,h=vc.atts.parse.call(e,f),(h.length||f.save_always)&&(c[g]=h)}),d.push(c)}),d},parseOne:function(a){var b,c;return b=this.content(),c=vc.atts.param_group.extractValues.call(this,a,b),this.$content=b,encodeURIComponent(JSON.stringify(c))},init:function(a,b){b.data("vc-param-object",new k({el:b,settings:{param:a}}))}},vc.atts.colorpicker={init:function(b,c){var d=c;a(".vc_color-control",d).each(function(){var b,c,d,e=a(this),f=e.val().replace(/\s+/g,""),g=100;f.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)&&(g=100*parseFloat(f.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1])),e.wpColorPicker({clear:function(a,d){b.val(100),c.val("100%")},change:_.debounce(function(){a(this).trigger("change")},500)}),d=e.closest(".wp-picker-container"),a('<div class="vc_alpha-container"><label>Alpha: <output class="rangevalue">'+g+'%</output></label><input type="range" min="1" max="100" value="'+g+'" name="alpha" class="vc_alpha-field"></div>').appendTo(d.addClass("vc_color-picker").find(".iris-picker")),b=d.find(".vc_alpha-field"),c=d.find(".vc_alpha-container output"),b.bind("change keyup",function(){var a=parseFloat(b.val()),d=e.data("a8c-iris"),f=e.data("wp-wpColorPicker");c.val(b.val()+"%"),d._color._alpha=a/100,e.val(d._color.toString()),f.toggler.css({backgroundColor:e.val()})}).val(g).trigger("change")})}},vc.atts.autocomplete={init:function(b,c){var d=c;d.length&&d.each(function(){var b,c,d=a(".wpb_vc_param_value",this),e=d.attr("name"),f=a(".vc_auto_complete_param",this);b=a.extend({$param_input:d,param_name:e,$el:f},d.data("settings")),c=new i(b),b.multiple&&c.enableMultiple(),b.sortable&&c.enableSortable(),d.data("vc-param-object",c)})}},vc.atts.loop={init:function(a,b){b.data("vc-param-object",new f({el:b}))}},vc.atts.vc_link={init:function(b,c){a(".vc_link-build",c).click(function(b){var c,d,e,f,g,h,i,j,k;b.preventDefault(),c=a(this).closest(".vc_link"),d=c.find(".wpb_vc_param_value"),e=c.find(".url-label"),f=c.find(".title-label"),g=d.data("json"),h=a("#wp-link-submit"),i=a('<input type="submit" name="vc_link-submit" id="vc_link-submit" class="button-primary" value="Set Link">'),h.hide(),a("#vc_link-submit").remove(),i.insertBefore(h),j=a('<div class="link-target vc-link-nofollow"><label><span></span> <input type="checkbox" id="vc-link-nofollow"> Add nofollow option to link</label></div>'),a("#link-options .vc-link-nofollow").remove(),j.insertAfter(a("#link-options .link-target")),setTimeout(function(){var b=a("#most-recent-results").css("top");a("#most-recent-results").css("top",parseInt(b)+j.height())},200),k=!window.wpLink&&a.fn.wpdialog&&a("#wp-link").length?{$link:!1,open:function(){this.$link=a("#wp-link").wpdialog({title:wpLinkL10n.title,width:480,height:"auto",modal:!0,dialogClass:"wp-dialog",zIndex:3e5})},close:function(){this.$link.wpdialog("close")}}:window.wpLink,k.open("content"),_.isString(g.url)&&(a("#wp-link-url").length?a("#wp-link-url").val(g.url):a("#url-field").val(g.url)),_.isString(g.title)&&(a("#wp-link-text").length?a("#wp-link-text").val(g.title):a("#link-title-field").val(g.title)),a("#wp-link-target").length?a("#wp-link-target").prop("checked",!_.isEmpty(g.target)):a("#link-target-checkbox").prop("checked",!_.isEmpty(g.target)),a("#vc-link-nofollow").length&&a("#vc-link-nofollow").prop("checked",!_.isEmpty(g.rel)),i.unbind("click.vcLink").bind("click.vcLink",function(b){b.preventDefault(),b.stopImmediatePropagation();var c,g={};g.url=a("#wp-link-url").length?a("#wp-link-url").val():a("#url-field").val(),g.title=a("#wp-link-text").length?a("#wp-link-text").val():a("#link-title-field").val();var j=a(a("#wp-link-target").length?"#wp-link-target":"#link-target-checkbox");return g.target=j[0].checked?" _blank":"",g.rel=a("#vc-link-nofollow")[0].checked?"nofollow":"",c=_.map(g,function(a,b){if(_.isString(a)&&0<a.length)return b+":"+encodeURIComponent(a)}).join("|"),d.val(c),d.data("json",g),e.html(g.url+g.target),f.html(g.title),k.close(),h.show(),i.unbind("click.vcLink"),i.remove(),a("#wp-link-cancel").unbind("click.vcLink"),window.wpLink.textarea="",j.attr("checked",!1),a("#most-recent-results").css("top",""),a("#vc-link-nofollow").attr("checked",!1),!1}),a("#wp-link-cancel").unbind("click.vcLink").bind("click.vcLink",function(b){b.preventDefault(),k.close(),i.unbind("click.vcLink"),i.remove(),a("#wp-link-cancel").unbind("click.vcLink"),window.wpLink.textarea=""})})}},vc.atts.sorted_list={init:function(b,c){a(".vc_sorted-list",c).VcSortedList()}},vc.atts.options={init:function(a,b){b.data("vc-param-object",new g({el:b}))}},vc.atts.iconpicker={change:function(a,b){var c=b.find(".vc-iconpicker");c.val(this.value),c.data("vc-no-check",!0),c.find('[value="'+this.value+'"]').attr("selected","selected"),c.data("vcFontIconPicker").loadIcons()},parse:function(a){var b=this.content().find(".wpb_vc_param_value[name="+a.param_name+"]"),c=b.parent(),d=c.find(".vc-iconpicker").val();return d},init:function(b,c){var d=c.find(".wpb_vc_param_value"),e=a.extend({iconsPerPage:100,iconDownClass:"fip-fa fa fa-arrow-down",iconUpClass:"fip-fa fa fa-arrow-up",iconLeftClass:"fip-fa fa fa-arrow-left",iconRightClass:"fip-fa fa fa-arrow-right",iconSearchClass:"fip-fa fa fa-search",iconCancelClass:"fip-fa fa fa-remove",iconBlockClass:"fip-fa"},d.data("settings"));c.find(".vc-iconpicker").vcFontIconPicker(e).on("change",function(b){var c=a(this);c.data("vc-no-check")||d.data("vc-no-check",!0).val(this.value).trigger("change"),c.data("vc-no-check",!1)}),d.on("change",function(a){d.data("vc-no-check")||vc.atts.iconpicker.change.call(this,b,c),d.data("vc-no-check",!1)})}},vc.atts.animation_style={init:function(b,c){function d(b,c){a(b).removeClass().addClass(c+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a(this).removeClass().addClass("vc_param-animation-style-preview")})}var e=c,f=a(".wpb_vc_param_value[name="+b.param_name+"]",e);a('option[value="'+f.val()+'"]',e).attr("selected",!0),a(".vc_param-animation-style-trigger",e).click(function(b){b.preventDefault();var c=a(".vc_param-animation-style",e).val();"none"!==c&&d(this.parentNode,"vc_param-animation-style-preview "+c)}),a(".vc_param-animation-style",e).change(function(){var b=a(this).val();if(f.val(b),"none"!==b){var c=a(".vc_param-animation-style-preview",e);d(c,"vc_param-animation-style-preview "+b)}})}},vc.atts.vc_grid_id={parse:function(){var a="vc_gid:"+(Date.now()+"-"+this.model.get("id")+"-"+Math.floor(11*Math.random()));return a}},vc.atts.addShortcodeIdParam=function(a){var b,c,d=!1;b=a.get("params"),c=vc.map[a.get("shortcode")],_.isArray(c.params)&&_.each(c.params,function(c){c&&!_.isUndefined(c.type)&&("tab_id"===c.type&&_.isEmpty(b[c.param_name])?(d=!0,b[c.param_name]=vc_guid()+"-"+Math.floor(11*Math.random())):"vc_grid_id"===c.type&&(d=!0,b[c.param_name]=vc.atts.vc_grid_id.parse.call({model:a})))}),d&&a.save("params",b,{silent:!0})},vc.getMapped=vc.memoizeWrapper(function(a){return vc.map[a]||{}})}(window.jQuery),function(a){vc.debug=!1,vc.map=_.isUndefined(window.vc_mapper)?{}:window.vc_mapper,vc.roles=_.isUndefined(window.vc_roles)?{}:window.vc_roles,vc.Storage=function(){this.data={}},vc.Storage.prototype={url:window.ajaxurl,checksum:!1,locked:!1,create:function(a){return a.id||(a.id=a.attributes.id=vc_guid()),this.data[a.id]=a.toJSON(),this.setModelRoot(a.id),this.save(),a},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},setModelRoot:function(a){var b=this.data[a];_.isString(b.parent_id)&&_.isObject(this.data[b.parent_id])&&(b.root_id=this.data[b.parent_id].root_id),_.isObject(this.data[b.root_id])&&(this.data[b.root_id].html=!1)},update:function(a){return this.data[a.id]=a.toJSON(),this.setModelRoot(a.id),this.save(),a},destroy:function(a){return _.isUndefined(this.data[a.id])||_.isUndefined(this.data[a.id].root_id)||!_.isObject(this.data[this.data[a.id].root_id])||(this.data[this.data[a.id].root_id].html=!1),_.isUndefined(this.data[a.id])||delete this.data[a.id],this.save(),a},find:function(a){return this.data[a]},findAll:function(){return this.fetch(),_.values(this.data)},findAllRootSorted:function(){var a=_.filter(_.values(this.data),function(a){return!1===a.parent_id});return _.sortBy(a,function(a){return a.order})},escapeParam:function(b){return"array"!==a.type(b)?_.isUndefined(b)||_.isNull(b)||!b.toString?"":b.toString().replace(/"/g,"``").replace(/\[/g,"`{`").replace(/\]/g,"`}`"):b},unescapeParam:function(a){return a.replace("`{`","[").replace("`}`","]").replace(/(\`{2})/g,'"')},storageCreateShortcodeString:function(a){var b,c,d,e,f,g,h,i;return d=a.get("shortcode"),e=_.extend({},a.get("params")),g={},h=vc.getMergedParams(d,e),_.each(h,function(a,b){g[b]=this.escapeParam(a)},this),b=vc.getMapped(d),i=_.isObject(b)&&(_.isBoolean(b.is_container)&&!0===b.is_container||!_.isEmpty(b.as_parent)),f=this._storageGetShortcodeContent(a),c={tag:d,attrs:g,content:f,type:_.isUndefined(vc.getParamSettings(d,"content"))&&!i?"single":""},a.trigger("stringify",a,c),wp.shortcode.string(c)},save:function(){if(this.locked)return this.locked=!1,!1;var a=_.reduce(this.findAllRootSorted(),function(a,b){var c=vc.shortcodes.get(b);return a+this.storageCreateShortcodeString(c)},"",this);return this.setContent(a),this.checksum=vc_globalHashCode(a),this},_storageGetShortcodeContent:function(a){var b,c;return b=_.sortBy(_.filter(this.data,function(b){return b.parent_id===a.get("id")}),function(a){return a.order}),b.length?_.reduce(b,function(a,b){var c=vc.shortcodes.get(b);return a+this.storageCreateShortcodeString(c)},"",this):(c=_.extend({},a.get("params")),_.isUndefined(c.content)?"":c.content)},getContent:function(){return _.isObject(window.tinymce)&&tinymce.editors.content&&tinymce.editors.content.save(),window.vc_wpnop(a("#content").val()||"")},setContent:function(b){var c=_.isObject(window.tinymce)&&tinymce.editors.content&&!_.isUndefined(window.switchEditors),d=c&&window.tinyMCE.get("content")&&window.tinyMCE.get("content").isHidden();c&&window.switchEditors.go("content","html"),a("#content").val(b),c&&!d&&window.switchEditors.go("content","tmce")},parseContent:function(a,b,c){var d=_.keys(vc.map).join("|"),e=window.wp.shortcode.regexp(d),f=b.trim().match(e);return _.isNull(f)?a:(_.each(f,function(b){var e,f,g=b.match(this.regexp(d)),h=g[5],i=new RegExp("^[\\s]*\\[\\[?("+_.keys(vc.map).join("|")+")(?![\\w-])"),j=window.vc_guid(),k=window.wp.shortcode.attrs(g[3]),l={};_.each(k.named,function(a,b){l[b]=this.unescapeParam(a)},this),e={id:j,shortcode:g[2],order:this.order,params:_.extend({},l),parent_id:!!_.isObject(c)&&c.id,root_id:_.isObject(c)?c.root_id:j},f=vc.map[e.shortcode],this.order+=1,a[j]=e,j==e.root_id&&(a[j].html=b),_.isString(h)&&h.match(i)&&(_.isBoolean(f.is_container)&&!0===f.is_container||!_.isEmpty(f.as_parent)&&!1!==f.as_parent)?a=this.parseContent(a,h,a[j]):_.isString(h)&&h.length&&"vc_row"===g[2]?a=this.parseContent(a,'[vc_column width="1/1"][vc_column_text]'+h+"[/vc_column_text][/vc_column]",a[j]):_.isString(h)&&h.length&&"vc_column"===g[2]?a=this.parseContent(a,"[vc_column_text]"+h+"[/vc_column_text]",a[j]):_.isString(h)&&(a[j].params.content=h)},this),a)},isContentChanged:function(){return!1===this.checksum||this.checksum!==vc_globalHashCode(this.getContent())},wrapData:function(a){var b=_.keys(vc.map).join("|"),c=this.regexp_split("vc_row"),d=new RegExp("^\\[(\\[?)("+b+")","g"),e=this,f={},g=0;a=wp.shortcode.replace("vc_section",a,function(a){var b={attrs:a.attrs.named,content:e.wrapData(a.content)};g++;var c="vc_pseudo_section_"+g+"_"+VCS4()+VCS4();return f[c]={tag:c,data:b},'[vc_row][vc_pseudo_section id="'+c+'"][/vc_pseudo_section][/vc_row]'});var h=_.filter(a.trim().split(c),function(a){if(!_.isEmpty(a))return a});return a=_.reduce(h,function(a,b){b.trim().indexOf("vc_pseudo_section_")!==-1||b.trim().match(d)||(b="[vc_row][vc_column][vc_column_text]"+b+"[/vc_column_text][/vc_column][/vc_row]");var c=b.match(vc_regexp_shortcode());return!_.isArray(c)||_.isUndefined(c[2])||c[2].indexOf("vc_pseudo_section_")!==-1||_.isUndefined(vc.map[c[2]])||!_.isUndefined(vc.map[c[2]].is_container)&&vc.map[c[2]].is_container||!_.isEmpty(vc.map[c[2]].as_parent)||(b="[vc_row][vc_column]"+b+"[/vc_column][/vc_row]"),a+b},""),Object.keys(f).length>0&&(a=a.replace(/\[vc_row\]\[vc_pseudo_section/g,"[vc_pseudo_section"),a=a.replace(/\[\/vc_pseudo_section\]\[\/vc_row\]/g,"[/vc_pseudo_section]"),
a=wp.shortcode.replace("vc_pseudo_section",a,function(a){var b=f[a.attrs.named.id];return wp.shortcode.string({tag:"vc_section",attrs:b.data.attrs,content:b.data.content})})),a},fetch:function(){if(!this.isContentChanged())return this;this.order=0;var a=this.getContent();this.checksum=vc_globalHashCode(a),a=this.wrapData(a),this.data=this.parseContent({},a)},append:function(a){this.data={},this.order=0;try{var b=this.getContent();this.setContent(b+""+a)}catch(a){window.console&&window.console.error&&window.console.error(a)}},regexp_split:_.memoize(function(a){return new RegExp("(\\[(\\[?)["+a+"]+(?![\\w-])[^\\]\\/]*[\\/(?!\\])[^\\]\\/]*]?(?:\\/]\\]|\\](?:[^\\[]*(?:\\[(?!\\/"+a+"\\])[^\\[]*)*\\[\\/"+a+"\\])?)\\]?)","g")}),regexp:_.memoize(function(a){return new RegExp("\\[(\\[?)("+a+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")})},vc.storage=new vc.Storage}(window.jQuery),function(a){var b=vc.storage;vc.shortcode=Backbone.Model.extend({settings:!1,defaults:function(){var a=window.vc_guid();return{id:a,shortcode:"vc_text_block",order:vc.shortcodes.getNextOrder(),params:{},parent_id:!1,root_id:a,cloned:!1,html:!1,view:!1}},initialize:function(){this.bind("remove",this.removeChildren,this),this.bind("remove",this.removeEvents,this)},removeEvents:function(a){vc.events.triggerShortcodeEvents("destroy",a)},sync:function(a,c,d){if(d&&d.silent)return d.success(c);var e;switch(a){case"read":e=c.id?b.find(c):b.findAll();break;case"create":e=b.create(c);break;case"update":e=b.update(c);break;case"delete":e=b.destroy(c)}e?d.success(e):d.error("Record not found")},getParam:function(a){return _.isObject(this.get("params"))&&!_.isUndefined(this.get("params")[a])?this.get("params")[a]:""},removeChildren:function(a){var b=vc.shortcodes.where({parent_id:a.id});_.each(b,function(a){vc.storage.lock(),a.destroy(),this.removeChildren(a)},this),b.length&&vc.storage.save()},setting:function(a){return!1===this.settings&&(this.settings=vc.getMapped(this.get("shortcode"))||{}),this.settings[a]}}),vc.shortcodes_collection=Backbone.Collection.extend({model:vc.shortcode,last_index:0,getNextOrder:function(){return this.last_index++},comparator:function(a){return a.get("order")},initialize:function(){},createFromString:function(a,b){var c;c=vc.storage.parseContent({},a,!!_.isObject(b)&&b.toJSON()),_.each(_.values(c),function(a){vc.shortcodes.create(a)},this)},sync:function(a,c,d){var e;switch(a){case"read":e=c.id?b.find(c):b.findAll();break;case"create":e=b.create(c);break;case"update":e=b.update(c);break;case"delete":e=b.destroy(c)}e?d.success(e):d.error("Record not found")},stringify:function(a){var b=_.sortBy(vc.shortcodes.where({parent_id:!1}),function(a){return a.get("order")});return this.modelsToString(b,a)},singleStringify:function(a,b){return this.modelsToString([vc.shortcodes.get(a)],b)},createShortcodeString:function(a,b){var c,d,e,f,g,h,i,j;return e=a.get("shortcode"),f=_.extend({},a.get("params")),h={},i=vc.getMergedParams(e,f),_.each(i,function(a,b){h[b]=vc.storage.escapeParam(a)},this),c=vc.getMapped(e),j=_.isObject(c)&&(_.isBoolean(c.is_container)&&!0===c.is_container||!_.isEmpty(c.as_parent)),g=this._getShortcodeContent(a,b),d={tag:e,attrs:h,content:g,type:_.isUndefined(vc.getParamSettings(e,"content"))&&!j?"single":""},_.isUndefined(b)?a.trigger("stringify",a,d):a.trigger("stringify:"+b,a,d),wp.shortcode.string(d)},modelsToString:function(a,b){var c=_.reduce(a,function(a,c){return a+this.createShortcodeString(c,b)},"",this);return c},_getShortcodeContent:function(a,b){var c,d;return c=_.sortBy(vc.shortcodes.where({parent_id:a.get("id")}),function(a){return a.get("order")}),c.length?_.reduce(c,function(a,c){return a+this.createShortcodeString(c,b)},"",this):(d=_.extend({},a.get("params")),_.isUndefined(d.content)?"":d.content)}}),vc.shortcodes=new vc.shortcodes_collection,vc.getDefaults=vc.memoizeWrapper(function(a){var b,c;return b={},c=_.isObject(vc.map[a])&&_.isArray(vc.map[a].params)?vc.map[a].params:[],_.each(c,function(a){_.isObject(a)&&(_.isUndefined(a.std)?vc.atts[a.type]&&vc.atts[a.type].defaults?b[a.param_name]=vc.atts[a.type].defaults(a):_.isUndefined(a.value)||(_.isObject(a.value)?b[a.param_name]=_.values(a.value)[0]:_.isArray(a.value)?b[a.param_name]=a.value[0]:b[a.param_name]=a.value):b[a.param_name]=a.std)}),b}),vc.getDefaultsAndDependencyMap=vc.memoizeWrapper(function(a){var b,c,d;return c={},b={},d=_.isObject(vc.map[a])&&_.isArray(vc.map[a].params)?vc.map[a].params:[],_.each(d,function(a){_.isObject(a)&&"content"!==a.param_name&&(_.isUndefined(a.std)?_.isUndefined(a.value)||(vc.atts[a.type]&&vc.atts[a.type].defaults?b[a.param_name]=vc.atts[a.type].defaults(a):_.isObject(a.value)?b[a.param_name]=_.values(a.value)[0]:_.isArray(a.value)?b[a.param_name]=a.value[0]:b[a.param_name]=a.value):b[a.param_name]=a.std,_.isUndefined(a.dependency)||_.isUndefined(a.dependency.element)||(c[a.param_name]=a.dependency))}),{defaults:b,dependencyMap:c}}),vc.getMergedParams=function(a,b){var c,d,e;return c=vc.getDefaultsAndDependencyMap(a),d={},b=_.extend({},c.defaults,b),e=_.extend({},c.dependencyMap),_.each(b,function(f,g){if("content"!==g){var h;if(!_.isUndefined(e[g])){if(!_.isUndefined(e[e[g].element])&&_.isBoolean(e[e[g].element].failed)&&!0===e[e[g].element].failed)return void(e[g].failed=!0);var i,j,k,l;if(k=e[g].element,l=b[k],j=_.isEmpty(l),i=_.omit(e[g],"element"),_.isBoolean(i.not_empty)&&!0===i.not_empty&&j||_.isBoolean(i.is_empty)&&!0===i.is_empty&&!j||i.value&&!_.intersection(_.isArray(i.value)?i.value:[i.value],_.isArray(l)?l:[l]).length||i.value_not_equal_to&&_.intersection(_.isArray(i.value_not_equal_to)?i.value_not_equal_to:[i.value_not_equal_to],_.isArray(l)?l:[l]).length)return void(e[g].failed=!0)}h=vc.getParamSettings(a,g),_.isUndefined(h)?d[g]=f:(!_.isUndefined(c.defaults[g])&&c.defaults[g]!==f||_.isUndefined(c.defaults[g])&&""!==f||!_.isUndefined(h.save_always)&&!0===h.save_always)&&(d[g]=f)}}),d},vc.getParamSettings=vc.memoizeWrapper(function(a,b){var c,d;return c=_.isObject(vc.map[a])&&_.isArray(vc.map[a].params)?vc.map[a].params:[],d=_.find(c,function(a){return _.isObject(a)&&a.param_name===b},this)},function(){return arguments[0]+","+arguments[1]}),vc.getParamSettingsByType=vc.memoizeWrapper(function(a,b){var c,d;return c=_.isObject(vc.map[a])&&_.isArray(vc.map[a].params)?vc.map[a].params:[],d=_.find(c,function(a){return _.isObject(a)&&a.type===b},this)},function(){return arguments[0]+","+arguments[1]}),vc.shortcodeHasIdParam=vc.memoizeWrapper(function(a){return vc.getParamSettingsByType(a,"el_id")})}(window.jQuery),function(a){vc.clone_index=1,vc.shortcode_view=Backbone.View.extend({tagName:"div",$content:"",use_default_content:!1,params:{},events:{"click .column_delete,.vc_control-btn-delete":"deleteShortcode","click .column_add,.vc_control-btn-prepend":"addElement","click .column_edit,.vc_control-btn-edit, .column_edit_trigger":"editElement","click .column_clone,.vc_control-btn-clone":"clone",mousemove:"checkControlsPosition"},removeView:function(){vc.closeActivePanel(this.model),this.remove()},checkControlsPosition:function(){if(this.$controls_buttons){var b,c,d,e=this.$el.height(),f=a(window).height();e>f&&(b=a(window).scrollTop(),c=this.$el.offset().top,d=b-c+a(window).height()/2,40<d&&d<e?this.$controls_buttons.css("top",d):d>e?this.$controls_buttons.css("top",e-40):this.$controls_buttons.css("top",40))}},initialize:function(){this.model.bind("destroy",this.removeView,this),this.model.bind("change:params",this.changeShortcodeParams,this),this.model.bind("change_parent_id",this.changeShortcodeParent,this),this.createParams()},hasUserAccess:function(){var a;return a=this.model.get("shortcode"),-1<_.indexOf(["vc_row","vc_column","vc_row_inner","vc_column_inner"],a)||!!_.every(vc.roles.current_user,function(b){return!(!_.isUndefined(vc.roles[b])&&!_.isUndefined(vc.roles[b].shortcodes)&&_.isUndefined(vc.roles[b].shortcodes[a]))})},canCurrentUser:function(a){var b,c=!1;return b=this.model.get("shortcode"),c=void 0===a||"all"===a?vc_user_access().shortcodeAll(b):vc_user_access().shortcodeEdit(b)},createParams:function(){var a,b,c;a=this.model.get("shortcode"),b=_.isObject(vc.map[a])&&_.isArray(vc.map[a].params)?vc.map[a].params:[],c=this.model.get("params"),this.params={},_.each(b,function(a){this.params[a.param_name]=a},this)},setContent:function(){this.$content=this.$el.find("> .wpb_element_wrapper > .vc_container_for_children, > .vc_element-wrapper > .vc_container_for_children")},setEmpty:function(){},unsetEmpty:function(){},checkIsEmpty:function(){this.model.get("parent_id")&&vc.app.views[this.model.get("parent_id")].checkIsEmpty()},html2element:function(b){var c,d={},e=vc.template(b);c=a(e(this.model.toJSON()).trim()),_.each(c.get(0).attributes,function(a){d[a.name]=a.value}),this.$el.attr(d).html(c.html()),this.setContent(),this.renderContent()},render:function(){var b=a("#vc_shortcode-template-"+this.model.get("shortcode"));return b.is("script")&&this.html2element(b.html()),this.model.view=this,this.$controls_buttons=this.$el.find(".vc_controls > :first"),this},renderContent:function(){return this.$el.attr("data-model-id",this.model.get("id")),this.$el.data("model",this.model),this},changedContent:function(a){},_loadDefaults:function(){var a,b;a=this.model.get("shortcode"),b=!!vc.shortcodes.where({parent_id:this.model.get("id")}).length,!b&&!0===this.use_default_content&&_.isObject(vc.map[a])&&_.isString(vc.map[a].default_content)&&vc.map[a].default_content.length&&(this.use_default_content=!1,vc.shortcodes.createFromString(vc.map[a].default_content,this.model))},_callJsCallback:function(){var a=this.model.get("shortcode");if(_.isObject(vc.map[a])&&_.isObject(vc.map[a].js_callback)&&!_.isUndefined(vc.map[a].js_callback.init)){var b=vc.map[a].js_callback.init;window[b](this.$el)}},ready:function(a){return this._loadDefaults(),this._callJsCallback(),this.model.get("parent_id")&&_.isObject(vc.app.views[this.model.get("parent_id")])&&vc.app.views[this.model.get("parent_id")].changedContent(this),_.defer(_.bind(function(){vc.events.trigger("shortcodeView:ready",this),vc.events.trigger("shortcodeView:ready:"+this.model.get("shortcode"),this)},this)),this},addShortcode:function(a,b){var c;c=_.last(vc.shortcodes.filter(function(a){return a.get("parent_id")===this.get("parent_id")&&parseFloat(a.get("order"))<parseFloat(this.get("order"))},a.model)),c?a.render().$el.insertAfter("[data-model-id="+c.id+"]"):"append"===b?this.$content.append(a.render().el):this.$content.prepend(a.render().el)},changeShortcodeParams:function(b){var c,d,e,f;c=b.get("shortcode"),d=b.get("params"),e=vc.map[c],_.defer(function(){vc.events.trigger("backend.shortcodeViewChangeParams:"+c)}),_.isArray(e.params)&&_.each(e.params,function(b){var c,e,f,g,h;if(c=b.param_name,e=d[c],f=this.$el.find("> .wpb_element_wrapper, > .vc_element-wrapper"),g=e,h=f.children(".admin_label_"+c),_.isObject(vc.atts[b.type])&&_.isFunction(vc.atts[b.type].render)&&(e=vc.atts[b.type].render.call(this,b,e)),f.children("."+b.param_name).is("input,textarea,select"))f.children("[name="+b.param_name+"]").val(e);else if(f.children("."+b.param_name).is("iframe"))f.children("[name="+b.param_name+"]").attr("src",e);else if(f.children("."+b.param_name).is("img")){var i;i=f.children("[name="+b.param_name+"]"),e&&e.match(/^\d+$/)?a.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:e,size:"thumbnail",_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(a){i.attr("src",a)}):e&&i.attr("src",e)}else f.children("[name="+b.param_name+"]").html(e?e:"");if(h.length){var j;""===e||_.isUndefined(e)?h.hide().addClass("hidden-label"):(_.isObject(b.value)&&!_.isArray(b.value)&&"checkbox"===b.type?(j=_.invert(b.value),g=_.map(e.split(/[\s]*\,[\s]*/),function(a){return _.isString(j[a])?j[a]:a}).join(", ")):_.isObject(b.value)&&!_.isArray(b.value)&&(j=_.invert(b.value),g=_.isString(j[e])?j[e]:e),h.html("<label>"+h.find("label").text()+"</label>: "+g),h.show().removeClass("hidden-label"))}},this),f=vc.app.views[b.get("parent_id")],!1!==b.get("parent_id")&&_.isObject(f)&&f.checkIsEmpty()},changeShortcodeParent:function(b){if(!1===this.model.get("parent_id"))return b;var c=a("[data-model-id="+this.model.get("parent_id")+"]"),d=vc.app.views[this.model.get("parent_id")];this.$el.appendTo(c.find("> .wpb_element_wrapper > .wpb_column_container, > .vc_element-wrapper > .wpb_column_container")),d.checkIsEmpty()},deleteShortcode:function(a){_.isObject(a)&&a.preventDefault();var b=confirm(window.i18nLocale.press_ok_to_delete_section);!0===b&&this.model.destroy()},addElement:function(b){_.isObject(b)&&b.preventDefault(),vc.add_element_block_view.render(this.model,!_.isObject(b)||!a(b.currentTarget).closest(".bottom-controls").hasClass("bottom-controls"))},editElement:function(a){_.isObject(a)&&a.preventDefault(),(!vc.active_panel||!vc.active_panel.model||!this.model||vc.active_panel.model&&this.model&&vc.active_panel.model.get("id")!=this.model.get("id"))&&(vc.closeActivePanel(),vc.edit_element_block_view.render(this.model))},clone:function(a){return _.isObject(a)&&a.preventDefault(),vc.clone_index/=10,this.cloneModel(this.model,this.model.get("parent_id"))},cloneModel:function(a,b,c){var d,e,f,g;return d=_.isBoolean(c)&&!0===c?a.get("order"):parseFloat(a.get("order"))+vc.clone_index,f=_.extend({},a.get("params")),g=a.get("shortcode"),e=vc.shortcodes.create({shortcode:g,id:window.vc_guid(),parent_id:b,order:d,cloned:!0,cloned_from:a.toJSON(),params:f}),_.each(vc.shortcodes.where({parent_id:a.id}),function(a){this.cloneModel(a,e.get("id"),!0)},this),e},remove:function(){this.$content&&this.$content.data("uiSortable")&&this.$content.sortable("destroy"),this.$content&&this.$content.data("uiDroppable")&&this.$content.droppable("destroy"),delete vc.app.views[this.model.id],window.vc.shortcode_view.__super__.remove.call(this)}}),vc.shortcodes.on("sync",function(a){_.isObject(a)&&!_.isEmpty(a.models)&&_.each(a.models,function(a){vc.events.triggerShortcodeEvents("sync",a)})}),vc.shortcodes.on("add",function(a){_.isObject(a)&&vc.events.triggerShortcodeEvents("add",a)})}(window.jQuery),function(a){vc.saved_custom_css=!1,vc.visualComposerView=Backbone.View.extend({el:a("#wpb_visual_composer"),views:{},disableFixedNav:!1,events:{"click #wpb-add-new-row":"createRow","click #vc_post-settings-button":"editSettings",'click #vc_add-new-element, [data-vc-element="add-element-action"]':"addElement","click #vc_fullscreen-button":"enterFullscreen","click #vc_windowed-button":"leaveFullscreen",'click [data-vc-element="add-text-block-action"]':"addTextBlock","click .wpb_switch-to-composer":"switchComposer","click #vc_templates-editor-button":"openTemplatesWindow","click #vc_templates-more-layouts":"openTemplatesWindow","click .vc_template[data-template_id] > .wpb_wrapper":"loadDefaultTemplate","click #wpb-save-post":"save","click .vc_control-preview":"preview"},initializeAccessPolicy:function(){this.accessPolicy={be_editor:vc_user_access().editor("backend_editor"),fe_editor:vc_frontend_enabled&&vc_user_access().editor("frontend_editor"),classic_editor:!vc_user_access().check("backend_editor","disabled_ce_editor",void 0,!0)}},accessPolicyActions:function(){var b="",c="";if(this.accessPolicy.fe_editor&&(b='<span class="vc_spacer"></span><a class="wpb_switch-to-front-composer" href="'+a("#wpb-edit-inline").attr("href")+'">'+window.i18nLocale.main_button_title_frontend_editor+"</a>"),this.accessPolicy.classic_editor)this.accessPolicy.be_editor&&(c='<span class="vc_spacer"></span><a class="wpb_switch-to-composer" href="#">'+window.i18nLocale.main_button_title_backend_editor+"</a>");else if(a("#postdivrich").hide(),this.accessPolicy.be_editor){var d=this;_.defer(function(){d.show(),d.status="shown"})}(b||c)&&(this.$buttonsContainer=a('<div class="composer-switch"><span class="logo-icon"></span>'+c+b+"</div>").insertAfter("div#titlediv"),this.accessPolicy.classic_editor&&(this.$switchButton=this.$buttonsContainer.find(".wpb_switch-to-composer"),this.$switchButton.click(this.switchComposer)))},initialize:function(){var b=this;_.bindAll(this,"switchComposer","dropButton","processScroll","updateRowsSorting","updateElementsSorting"),this.accessPolicy=vc.accessPolicy,this.buildRelevance(),vc.events.on("shortcodes:add",vcAddShortcodeDefaultParams,this),vc.events.on("shortcodes:add",vc.atts.addShortcodeIdParam,this),vc.events.on("shortcodes:sync",vc.atts.addShortcodeIdParam,this),vc.events.on("shortcodes:add",this.addShortcode,this),vc.events.on("shortcodes:destroy",this.checkEmpty,this),vc.shortcodes.on("change:params",this.changeParamsEvents,this),vc.shortcodes.on("reset",this.addAll,this),a(document).on("wp-collapse-menu",function(a,c){"open"===c.state&&b.leaveFullscreen()}),this.render()},changeParamsEvents:function(a){vc.events.triggerShortcodeEvents("update",a)},render:function(){return this.$buttonsContainer=a(".composer-switch"),this.$switchButton=this.$buttonsContainer.find(".wpb_switch-to-composer"),this.$vcStatus=a("#wpb_vc_js_status"),this.$metablock_content=a(".metabox-composer-content"),this.$content=a("#visual_composer_content"),this.$post=a("#postdivrich"),this.$loading_block=a("#vc_logo"),vc.add_element_block_view=new vc.AddElementUIPanelBackendEditor({el:"#vc_ui-panel-add-element"}),vc.edit_element_block_view=new vc.EditElementUIPanel({el:"#vc_ui-panel-edit-element"}),vc.templates_panel_view=new vc.TemplateWindowUIPanelBackendEditor({el:"#vc_ui-panel-templates"}),vc.post_settings_view=new vc.PostSettingsUIPanelBackendEditor({el:"#vc_ui-panel-post-settings"}),this.setSortable(),vc.is_mobile=0<a("body.mobile").length,vc.saved_custom_css=a("#wpb_custom_post_css_field").val(),vc.updateSettingsBadge(),_.defer(function(){vc.events.trigger("app.render")}),this},addAll:function(){this.views={},this.$content.removeClass("loading").empty(),this.addChild(!1),this.checkEmpty(),this.$loading_block.removeClass("vc_ui-wp-spinner"),this.$metablock_content.removeClass("vc_loading-shortcodes"),_.defer(function(){vc.events.trigger("app.addAll")})},addChild:function(a){_.each(vc.shortcodes.where({parent_id:a}),function(a){this.appendShortcode(a),this.addChild(a.get("id"))},this),this.setSortable()},getView:function(a){var b;return b=_.isObject(vc.map[a.get("shortcode")])&&_.isString(vc.map[a.get("shortcode")].js_view)&&vc.map[a.get("shortcode")].js_view.length&&!_.isUndefined(window[window.vc.map[a.get("shortcode")].js_view])?new(window[window.vc.map[a.get("shortcode")].js_view])({model:a}):new vc.shortcode_view({model:a}),a.set({view:b}),b},setDraggable:function(){a("#wpb-add-new-element, #wpb-add-new-row").draggable({helper:function(){return a('<div id="drag_placeholder"></div>').appendTo("body")},zIndex:99999,cursor:"move",revert:"invalid",start:function(b,c){a("#drag_placeholder").addClass("column_placeholder").html(window.i18nLocale.drag_drop_me_in_column)}})},setDropable:function(){this.$content.droppable({greedy:!0,accept:".dropable_el,.dropable_row",hoverClass:"wpb_ui-state-active",drop:this.dropButton})},dropButton:function(a,b){b.draggable.is("#wpb-add-new-element")?this.addElement():b.draggable.is("#wpb-add-new-row")&&this.createRow()},appendShortcode:function(a){var b,c,d;if(b=this.getView(a),d=_.extend(vc.getDefaults(a.get("shortcode")),a.get("params")),a.set("params",d,{silent:!0}),c=!1!==a.get("parent_id")&&this.views[a.get("parent_id")],this.views[a.id]=b,a.get("parent_id")){var e;e=this.views[a.get("parent_id")],e.unsetEmpty()}c?c.addShortcode(b,"append"):this.$content.append(b.render().el),b.ready(),b.changeShortcodeParams(a),b.checkIsEmpty(),this.setNotEmpty()},addShortcode:function(a){var b,c,d;if(d=_.extend(vc.getDefaults(a.get("shortcode")),a.get("params")),a.set("params",d,{silent:!0}),b=this.getView(a),c=!1!==a.get("parent_id")&&this.views[a.get("parent_id")],b.use_default_content=!0!==a.get("cloned"),this.views[a.id]=b,c){c.addShortcode(b),c.checkIsEmpty();var e;e=this,_.defer(function(){b.changeShortcodeParams&&b.changeShortcodeParams(a),b.ready(),b.checkIsEmpty(),e.setSortable(),e.setNotEmpty()})}else this.addRow(b),_.defer(function(){b.changeShortcodeParams&&b.changeShortcodeParams(a),b.ready(),b.checkIsEmpty()})},addRow:function(a){var b;b=_.last(vc.shortcodes.filter(function(a){return!1===a.get("parent_id")&&parseFloat(a.get("order"))<parseFloat(this.get("order"))},a.model)),b?a.render().$el.insertAfter("[data-model-id="+b.id+"]"):this.$content.append(a.render().el)},addTextBlock:function(a){var b,c,d,e,f;return a.preventDefault(),e={},"undefined"!=typeof window.vc_settings_presets.vc_row&&(e=_.extend(e,window.vc_settings_presets.vc_row)),b=vc.shortcodes.create({shortcode:"vc_row",params:e}),f={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column&&(f=_.extend(f,window.vc_settings_presets.vc_column)),c=vc.shortcodes.create({shortcode:"vc_column",params:f,parent_id:b.id,root_id:b.id}),d=vc.getDefaults("vc_column_text"),"undefined"!=typeof window.vc_settings_presets.vc_column_text&&(d=_.extend(d,window.vc_settings_presets.vc_column_text)),vc.shortcodes.create({shortcode:"vc_column_text",parent_id:c.id,root_id:b.id,params:d})},createRow:function(){var a,b,c;return b={},"undefined"!=typeof window.vc_settings_presets.vc_row&&(b=_.extend(b,window.vc_settings_presets.vc_row)),a=vc.shortcodes.create({shortcode:"vc_row",params:b}),c={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column&&(c=_.extend(c,window.vc_settings_presets.vc_column)),vc.shortcodes.create({shortcode:"vc_column",params:c,parent_id:a.id,root_id:a.id}),a},addElement:function(a){_.isObject(a)&&a.preventDefault(),vc.add_element_block_view.render(!1)},openTemplatesWindow:function(b){b&&b.preventDefault(),a(b.currentTarget).is("#vc_templates-more-layouts")&&vc.templates_panel_view.once("show",function(){a('[data-vc-ui-element-target="[data-tab=default_templates]"]').click()}),vc.templates_panel_view.render().show()},loadDefaultTemplate:function(a){a&&a.preventDefault(),vc.templates_panel_view.loadTemplate(a)},editSettings:function(a){a&&a.preventDefault(),vc.post_settings_view.render().show()},enterFullscreen:function(){var b=a("body");b.hasClass("folded")?(b.data("vcKeepMenuFolded",!0),b.addClass("vc_fullscreen")):b.addClass("vc_fullscreen folded")},leaveFullscreen:function(){var b=a("body");b.hasClass("vc_fullscreen")&&(b.data("vcKeepMenuFolded")?(b.removeClass("vc_fullscreen"),b.removeData("vcKeepMenuFolded")):b.removeClass("vc_fullscreen folded"))},sortingStarted:function(b,c){a("#visual_composer_content").addClass("vc_sorting-started")},sortingStopped:function(b,c){var d=c.item.data("element_type"),e=c.placeholder.closest("[data-element_type]").data("element_type")||"";vc.check_relevance(e,d)&&e!=d||(c.placeholder.addClass("vc_hidden-placeholder"),a(b.target).sortable("cancel")),a("#visual_composer_content").removeClass("vc_sorting-started")},updateElementsSorting:function(b,c){_.defer(function(b){var d=c.item.parent().closest("[data-model-id]"),e=d.data("model"),f=c.item.data("model"),g=b.views[e.id].$content.find("> [data-model-id]"),h=0;if(!_.isNull(c.sender)){var i=f.get("parent_id");vc.storage.lock(),f.save({parent_id:e.id}),i&&b.views[i].checkIsEmpty(),b.views[e.id].checkIsEmpty()}g.each(function(){var b=a(this).data("model");vc.storage.lock(),b.save({order:h++})}),f.save()},this)},updateRowsSorting:function(b,c){_.defer(function(d){var e=c.item.parent(),f=e.closest("[data-model-id]"),g=!!f.length&&f.data("model").get("id"),h=c.item.data("model"),i=c.item.data("element_type"),j=c.item.parent().closest("[data-element_type]").data("element_type")||"";if(!vc.check_relevance(j,i)||j==i)return void a(b.target).sortable("cancel");var k=h.get("parent_id"),l=e.find(d.rowSortableSelector);l.each(function(){var b=a(this).index();vc.storage.lock(),a(this).data("model").save({order:b})}),h.save({parent_id:g}),k&&d.views[k].checkIsEmpty(),g&&d.views[g].checkIsEmpty()},this)},renderPlaceholder:function(b,c){var d=a(c).data("element_type"),e=_.isObject(vc.map[d])&&(_.isBoolean(vc.map[d].is_container)&&!0===vc.map[d].is_container||!_.isEmpty(vc.map[d].as_parent)),f=a('<div class="vc_helper vc_helper-'+d+'"><i class="vc_general vc_element-icon'+(vc.map[d].icon?" "+vc.map[d].icon:"")+'"'+(e?' data-is-container="true"':"")+"></i> "+vc.map[d].name+"</div>").prependTo("body");return f},rowSortableSelector:"> .wpb_vc_row, > .vc_main-sortable-element",setSortable:function(){return a(".wpb_main_sortable").sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder",cursor:"move",connectWith:".vc_section_container",items:this.rowSortableSelector,handle:".vc_column-move",cancel:".vc-non-draggable-row",distance:.5,start:this.sortingStarted,stop:this.sortingStopped,update:this.updateRowsSorting,tolerance:"intersect",over:function(a,b){var c=b.item.data("element_type"),d=b.placeholder.closest("[data-element_type]").data("element_type")||"";return vc.check_relevance(d,c)&&d!=c?void b.placeholder.css({maxWidth:b.placeholder.parent().width()}):(b.placeholder.addClass("vc_hidden-placeholder"),!1)},out:function(a,b){b.placeholder.removeClass("vc_hidden-placeholder"),b.placeholder.css({maxWidth:b.placeholder.parent().width()})}}),a(".wpb_column_container").sortable({forcePlaceholderSize:!0,forceHelperSize:!1,connectWith:".wpb_column_container",placeholder:"vc_placeholder",items:"> div.wpb_sortable,> div.vc-non-draggable",helper:this.renderPlaceholder,distance:3,cancel:".vc-non-draggable",scroll:!0,scrollSensitivity:70,cursor:"move",cursorAt:{top:20,left:16},tolerance:"intersect",start:function(){a("#visual_composer_content").addClass("vc_sorting-started"),a(".vc_not_inner_content").addClass("dragging_in")},stop:function(b,c){a("#visual_composer_content").removeClass("vc_sorting-started"),a(".dragging_in").removeClass("dragging_in");var d=c.item.data("element_type"),e=c.item.parent().closest("[data-element_type]").data("element_type")||"",f=!!_.isUndefined(vc.map[e].allowed_container_element)||vc.map[e].allowed_container_element;vc.check_relevance(e,d)&&e!=d||a(this).sortable("cancel");var g=_.isObject(vc.map[d])&&(_.isBoolean(vc.map[d].is_container)&&!0===vc.map[d].is_container||!_.isEmpty(vc.map[d].as_parent));g&&!0!==f&&f!==c.item.data("element_type").replace(/_inner$/,"")&&a(this).sortable("cancel"),a(".vc_sorting-empty-container").removeClass("vc_sorting-empty-container")},update:this.updateElementsSorting,over:function(a,b){var c=b.item.data("element_type"),d=b.placeholder.closest("[data-element_type]").data("element_type"),e=!!_.isUndefined(vc.map[d].allowed_container_element)||vc.map[d].allowed_container_element;vc.check_relevance(d,c)&&d!=c||b.placeholder.addClass("vc_hidden-placeholder");var f=_.isObject(vc.map[c])&&(_.isBoolean(vc.map[c].is_container)&&!0===vc.map[c].is_container||!_.isEmpty(vc.map[c].as_parent));f&&!0!==e&&e!==b.item.data("element_type").replace(/_inner$/,"")&&b.placeholder.addClass("vc_hidden-placeholder"),_.isNull(b.sender)||!b.sender.length||b.sender.find("> [data-element_type]:not(.ui-sortable-helper):visible").length||b.sender.addClass("vc_sorting-empty-container"),b.placeholder.css({maxWidth:b.placeholder.parent().width()})},out:function(a,b){b.placeholder.removeClass("vc_hidden-placeholder"),b.placeholder.css({maxWidth:b.placeholder.parent().width()})}}).disableSelection(),this},setNotEmpty:function(){a("#vc_no-content-helper").addClass("vc_not-empty")},setIsEmpty:function(){vc.views={},a("#vc_no-content-helper").removeClass("vc_not-empty")},checkEmpty:function(a){if(_.isObject(a)&&!1!==a.get("parent_id")&&a.get("parent_id")!=a.id){var b=this.views[a.get("parent_id")];if(!b)return;b.checkIsEmpty()}0===vc.shortcodes.length?this.setIsEmpty():this.setNotEmpty()},switchComposer:function(a){_.isObject(a)&&a.preventDefault(),"shown"===this.status?(this.accessPolicy.can("classic_editor")&&(!_.isUndefined(this.$switchButton)&&this.$switchButton.text(window.i18nLocale.main_button_title_backend_editor),!_.isUndefined(this.$buttonsContainer)&&this.$buttonsContainer.removeClass("vc_backend-status")),this.close(),this.status="closed"):(this.accessPolicy.can("classic_editor")&&(!_.isUndefined(this.$switchButton)&&this.$switchButton.text(window.i18nLocale.main_button_title_revert),!_.isUndefined(this.$buttonsContainer)&&this.$buttonsContainer.addClass("vc_backend-status")),this.show(),this.status="shown")},show:function(){this.$el.show(),this.$post.hide(),this.$vcStatus.val("true"),this.navOnScroll(),vc.storage.isContentChanged()&&(vc.app.setLoading(),vc.app.views={},_.defer(function(){vc.shortcodes.fetch({reset:!0}),vc.events.trigger("backendEditor.show")}))},setLoading:function(){this.setNotEmpty(),this.$loading_block.addClass("vc_ui-wp-spinner"),this.$metablock_content.addClass("vc_loading-shortcodes")},close:function(){this.$vcStatus.val("false"),this.$el.hide(),_.isObject(window.editorExpand)&&_.defer(function(){window.editorExpand.on(),window.editorExpand.on()}),this.$post.show(),_.defer(function(){vc.events.trigger("backendEditor.close")})},checkVcStatus:function(){!vc.accessPolicy.can("be_editor")||vc.accessPolicy.can("classic_editor")&&"true"!==this.$vcStatus.val()||this.switchComposer()},setNavTop:function(){this.navTop=this.$nav.length&&this.$nav.offset().top-28},save:function(){a("#wpb-save-post").text(window.i18nLocale.loading),a("#publish").click()},preview:function(){a("#post-preview").click()},navOnScroll:function(){this.$nav=a("#vc_navbar"),this.setNavTop(),this.processScroll(),a(window).unbind("scroll.composer").on("scroll.composer",this.processScroll)},processScroll:function(b){return!0===this.disableFixedNav?void this.$nav.removeClass("vc_subnav-fixed"):((!this.navTop||0>this.navTop)&&this.setNavTop(),this.scrollTop=a(window).scrollTop()+80,void(0<this.navTop&&this.scrollTop>=this.navTop&&!this.isFixed?(this.isFixed=1,this.$nav.addClass("vc_subnav-fixed")):this.scrollTop<=this.navTop&&this.isFixed&&(this.isFixed=0,this.$nav.removeClass("vc_subnav-fixed"))))},buildRelevance:function(){vc.shortcode_relevance={},_.map(vc.map,function(a){_.isObject(a.as_parent)&&_.isString(a.as_parent.only)&&(vc.shortcode_relevance["parent_only_"+a.base]=a.as_parent.only.replace(/\s/,"").split(",")),_.isObject(a.as_parent)&&_.isString(a.as_parent.except)&&(vc.shortcode_relevance["parent_except_"+a.base]=a.as_parent.except.replace(/\s/,"").split(",")),_.isObject(a.as_child)&&_.isString(a.as_child.only)&&(vc.shortcode_relevance["child_only_"+a.base]=a.as_child.only.replace(/\s/,"").split(",")),_.isObject(a.as_child)&&_.isString(a.as_child.except)&&(vc.shortcode_relevance["child_except_"+a.base]=a.as_child.except.replace(/\s/,"").split(","))}),vc.check_relevance=function(a,b){return!(_.isArray(vc.shortcode_relevance["parent_only_"+a])&&!_.contains(vc.shortcode_relevance["parent_only_"+a],b)||_.isArray(vc.shortcode_relevance["parent_except_"+a])&&_.contains(vc.shortcode_relevance["parent_except_"+a],b)||_.isArray(vc.shortcode_relevance["child_only_"+b])&&!_.contains(vc.shortcode_relevance["child_only_"+b],a)||_.isArray(vc.shortcode_relevance["child_except_"+b])&&_.contains(vc.shortcode_relevance["child_except"+b],a))}}}),a(function(){var b;b=a("#wpb_visual_composer"),b.is("div")&&(vc.app=new vc.visualComposerView({el:b}),vc.accessPolicy.can("be_editor")?vc.app.checkVcStatus():vc.app.$el.remove(),vc.events.on("vc:backend_editor:show",function(){vc.app.show(),vc.app.status="shown"}),vc.events.on("vc:backend_editor:switch",function(){vc.app.switchComposer()}))})}(window.jQuery),function(a){var b=vc.shortcodes;window.VcRowView=vc.shortcode_view.extend({change_columns_layout:!1,events:{'click > .vc_controls [data-vc-control="delete"]':"deleteShortcode","click > .vc_controls .set_columns":"setColumns",'click > .vc_controls [data-vc-control="add"]':"addElement",'click > .vc_controls [data-vc-control="edit"]':"editElement",'click > .vc_controls [data-vc-control="clone"]':"clone",'click > .vc_controls [data-vc-control="move"]':"moveElement",'click > .vc_controls [data-vc-control="toggle"]':"toggleElement",
"click > .wpb_element_wrapper .vc_controls":"openClosedRow"},convertRowColumns:function(a){var c=a.toString().split(/_/),d=b.where({parent_id:this.model.id}),e=[],f=[],g="";return _.each(c,function(a,c){var h,i,j=_.map(a.toString().split(""),function(a,b){return parseInt(a,10)});g=3<j.length?j[0]+""+j[1]+"/"+j[2]+j[3]:2<j.length?j[0]+"/"+j[1]+j[2]:j[0]+"/"+j[1],f.push(g),h=_.extend(_.isUndefined(d[c])?{}:d[c].get("params"),{width:g}),"undefined"!=typeof window.vc_settings_presets[this.getChildTag()]&&(h=_.extend(h,window.vc_settings_presets[this.getChildTag()])),vc.storage.lock(),i=b.create({shortcode:this.getChildTag(),params:h,parent_id:this.model.id}),_.isObject(d[c])&&_.each(b.where({parent_id:d[c].id}),function(a){vc.storage.lock(),a.save({parent_id:i.id}),vc.storage.lock(),a.trigger("change_parent_id")}),e.push(i)},this),c.length<d.length&&_.each(d.slice(c.length),function(a){_.each(b.where({parent_id:a.id}),function(a){vc.storage.lock(),a.save({parent_id:_.last(e).id}),vc.storage.lock(),a.trigger("change_parent_id")})}),_.each(d,function(a){vc.storage.lock(),a.destroy()},this),this.model.save(),this.setActiveLayoutButton(""+a),f},changeShortcodeParams:function(a){window.VcRowView.__super__.changeShortcodeParams.call(this,a),this.buildDesignHelpers(),this.setRowClasses()},setRowClasses:function(){var a=this.model.getParam("disable_element"),b="vc_hidden-xs vc_hidden-sm  vc_hidden-md vc_hidden-lg";this.disable_element_class&&this.$el.removeClass(this.disable_element_class),_.isEmpty(a)||(this.$el.addClass(b),this.disable_element_class=b)},designHelpersSelector:"> .vc_controls .column_toggle",buildDesignHelpers:function(){var b,c,d,e,f,g;b=this.model.getParam("css"),c=this.$el.find(this.designHelpersSelector),this.$el.find("> .vc_controls .vc_row_color").remove(),this.$el.find("> .vc_controls .vc_row_image").remove(),g=b.match(/background\-image:\s*url\(([^\)]+)\)/),g&&!_.isUndefined(g[1])&&(d=g[1]),g=b.match(/background\-color:\s*([^\s\;]+)\b/),g&&!_.isUndefined(g[1])&&(e=g[1]),g=b.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/),g&&!_.isUndefined(g[1])&&(e=g[1],d=g[2]),f=this.model.getParam("el_id"),this.$el.find("> .vc_controls .vc_row-hash-id").remove(),_.isEmpty(f)||a('<span class="vc_row-hash-id"></span>').text("#"+f).insertAfter(c),d&&a('<span class="vc_row_image" style="background-image: url('+d+');" title="'+window.i18nLocale.row_background_image+'"></span>').insertAfter(c),e&&a('<span class="vc_row_color" style="background-color: '+e+'" title="'+window.i18nLocale.row_background_color+'"></span>').insertAfter(c)},addElement:function(a){a&&a.preventDefault(),b.create({shortcode:this.getChildTag(),params:{},parent_id:this.model.id}),this.setActiveLayoutButton(),this.$el.removeClass("vc_collapsed-row")},getChildTag:function(){return"vc_row_inner"===this.model.get("shortcode")?"vc_column_inner":"vc_column"},sortingSelector:"> [data-element_type=vc_column], > [data-element_type=vc_column_inner]",sortingSelectorCancel:".vc-non-draggable-column",setSorting:function(){var b=this;1<this.$content.find(this.sortingSelector).length?this.$content.removeClass("wpb-not-sortable").sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder-column",tolerance:"pointer",cursor:"move",items:this.sortingSelector,cancel:this.sortingSelectorCancel,distance:.5,start:function(b,c){a("#visual_composer_content").addClass("vc_sorting-started"),c.placeholder.width(c.item.width())},stop:function(b,c){a("#visual_composer_content").removeClass("vc_sorting-started")},update:function(){var c=a(b.sortingSelector,b.$content);c.each(function(){var b=a(this).data("model"),d=a(this).index();b.set("order",d),c.length-1>d&&vc.storage.lock(),b.save()})},over:function(a,b){b.placeholder.css({maxWidth:b.placeholder.parent().width()}),b.placeholder.removeClass("vc_hidden-placeholder")},beforeStop:function(a,b){}}):(this.$content.hasClass("ui-sortable")&&this.$content.sortable("destroy"),this.$content.addClass("wpb-not-sortable"))},validateCellsList:function(a){var b,c=[],d=a.replace(/\s/g,"").split("+"),e=_.reduce(_.map(d,function(a){if(a.match(/^(vc_)?span\d?$/)){var d=vc_convert_column_span_size(a);return!1===d?1e3:(b=d.split(/\//),c.push(b[0]+""+b[1]),12*parseInt(b[0],10)/parseInt(b[1],10))}return a.match(/^[1-9]|1[0-2]\/[1-9]|1[0-2]$/)?(b=a.split(/\//),c.push(b[0]+""+b[1]),12*parseInt(b[0],10)/parseInt(b[1],10)):1e4}),function(a,b){return b+=a},0);return 12===e&&c.join("_")},setActiveLayoutButton:function(a){a||(a=_.map(vc.shortcodes.where({parent_id:this.model.get("id")}),function(a){var b=a.getParam("width");return b?b.replace(/\//,""):"11"}).join("_")),this.$el.find("> .vc_controls .vc_active").removeClass("vc_active");var b=this.$el.find('> .vc_ [data-cells-mask="'+vc_get_column_mask(a)+'"] [data-cells="'+a+'"], > .vc_controls [data-cells-mask="'+vc_get_column_mask(a)+'"][data-cells="'+a+'"]');b.length?b.addClass("vc_active"):this.$el.find("> .vc_controls [data-cells-mask=custom]").addClass("vc_active")},layoutEditor:function(){return _.isUndefined(vc.row_layout_editor)&&(vc.row_layout_editor=new vc.RowLayoutUIPanelBackendEditor({el:a("#vc_ui-panel-row-layout")})),vc.row_layout_editor},setColumns:function(b){_.isObject(b)&&b.preventDefault();var c=a(b.currentTarget);if("custom"===c.data("cells"))this.layoutEditor().render(this.model).show();else{if(vc.is_mobile){var d=c.parent();d.hasClass("vc_visible")||(d.addClass("vc_visible"),a(document).off("click.vcRowColumnsControl").on("click.vcRowColumnsControl",function(a){d.removeClass("vc_visible")}))}c.is(".vc_active")||(this.change_columns_layout=!0,_.defer(function(a,b){a.convertRowColumns(b)},this,c.data("cells")))}this.$el.removeClass("vc_collapsed-row")},sizeRows:function(){var b=45;a("> .wpb_vc_column, > .wpb_vc_column_inner",this.$content).each(function(){var c=a(this).find("> .wpb_element_wrapper > .wpb_column_container").css({minHeight:0}).height();c>b&&(b=c)}).each(function(){a(this).find("> .wpb_element_wrapper > .wpb_column_container").css({minHeight:b})})},ready:function(a){return window.VcRowView.__super__.ready.call(this,a),this},checkIsEmpty:function(){window.VcRowView.__super__.checkIsEmpty.call(this),this.setSorting()},changedContent:function(a){return this.change_columns_layout?this:void this.setActiveLayoutButton()},moveElement:function(a){a.preventDefault()},toggleElement:function(a){a&&a.preventDefault(),this.$el.toggleClass("vc_collapsed-row")},openClosedRow:function(a){this.$el.removeClass("vc_collapsed-row")},remove:function(){this.$content&&this.$content.data("uiSortable")&&this.$content.sortable("destroy"),this.$content&&this.$content.data("uiDroppable")&&this.$content.droppable("destroy"),delete vc.app.views[this.model.id],window.VcRowView.__super__.remove.call(this)}}),window.VcColumnView=vc.shortcode_view.extend({events:{'click > .vc_controls [data-vc-control="delete"]':"deleteShortcode",'click > .vc_controls [data-vc-control="add"]':"addElement",'click > .vc_controls [data-vc-control="edit"]':"editElement",'click > .vc_controls [data-vc-control="clone"]':"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},current_column_width:!1,initialize:function(a){window.VcColumnView.__super__.initialize.call(this,a),_.bindAll(this,"setDropable","dropButton")},ready:function(a){return window.VcColumnView.__super__.ready.call(this,a),this},render:function(){return window.VcColumnView.__super__.render.call(this),this.current_column_width=this.model.get("params").width||"1/1",this.$el.attr("data-width",this.current_column_width),this.setEmpty(),this},changeShortcodeParams:function(a){window.VcColumnView.__super__.changeShortcodeParams.call(this,a),this.setColumnClasses(),this.buildDesignHelpers()},designHelpersSelector:"> .vc_controls .column_add",buildDesignHelpers:function(){var b,c,d,e=this.model.getParam("css"),f=this.$el.find(this.designHelpersSelector).get(0);this.$el.find("> .vc_controls .vc_column_color").remove(),this.$el.find("> .vc_controls .vc_column_image").remove(),b=e.match(/background\-image:\s*url\(([^\)]+)\)/),b&&!_.isUndefined(b[1])&&(c=b[1]),b=e.match(/background\-color:\s*([^\s\;]+)\b/),b&&!_.isUndefined(b[1])&&(d=b[1]),b=e.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/),b&&!_.isUndefined(b[1])&&(d=b[1],c=b[2]),c&&a('<span class="vc_column_image" style="background-image: url('+c+');" title="'+i18nLocale.column_background_image+'"></span>').insertBefore(f),d&&a('<span class="vc_column_color" style="background-color: '+d+'" title="'+i18nLocale.column_background_color+'"></span>').insertBefore(f)},setColumnClasses:function(){var a,b=this.model.getParam("offset")||"",c=this.model.getParam("width")||"1/1",d=this.convertSize(c);this.current_offset_class&&this.$el.removeClass(this.current_offset_class),this.current_column_width!==c&&(a=this.convertSize(this.current_column_width),this.$el.attr("data-width",c).removeClass(a).addClass(d),this.current_column_width=c),b.match(/vc_col\-sm\-\d+/)&&this.$el.removeClass(d),_.isEmpty(b)||this.$el.addClass(b),this.current_offset_class=b},addToEmpty:function(b){b.preventDefault(),a(b.target).hasClass("vc_empty-container")&&this.addElement(b)},setDropable:function(){return this.$content.droppable({greedy:!0,accept:"vc_column_inner"===this.model.get("shortcode")?".dropable_el":".dropable_el,.dropable_row",hoverClass:"wpb_ui-state-active",drop:this.dropButton}),this},dropButton:function(a,b){b.draggable.is("#wpb-add-new-element")?vc.add_element_block_view({model:{position_to_add:"end"}}).show(this):b.draggable.is("#wpb-add-new-row")&&this.createRow()},setEmpty:function(){this.$el.addClass("vc_empty-column"),"edit"!==vc_user_access().getState("shortcodes")&&this.$content.addClass("vc_empty-container")},unsetEmpty:function(){this.$el.removeClass("vc_empty-column"),this.$content.removeClass("vc_empty-container")},checkIsEmpty:function(){b.where({parent_id:this.model.id}).length?this.unsetEmpty():this.setEmpty(),window.VcColumnView.__super__.checkIsEmpty.call(this)},createRow:function(){var a,c,d;return a={},"undefined"!=typeof window.vc_settings_presets.vc_row_inner&&(a=_.extend(a,window.vc_settings_presets.vc_row_inner)),c={width:"1/1"},"undefined"!=typeof window.vc_settings_presets.vc_column_inner&&(c=_.extend(c,window.vc_settings_presets.vc_column_inner)),d=b.create({shortcode:"vc_row_inner",params:a,parent_id:this.model.id}),b.create({shortcode:"vc_column_inner",params:c,parent_id:d.id}),d},convertSize:function(a){var b="vc_col-sm-",c=a?a.split("/"):[1,1],d=_.range(1,13),e=!_.isUndefined(c[0])&&0<=_.indexOf(d,parseInt(c[0],10))&&parseInt(c[0],10),f=!_.isUndefined(c[1])&&0<=_.indexOf(d,parseInt(c[1],10))&&parseInt(c[1],10);return!1!==e&&!1!==f?b+12*e/f:b+"12"},deleteShortcode:function(a){var b,c=this.model.get("parent_id");_.isObject(a)&&a.preventDefault();var d=confirm(window.i18nLocale.press_ok_to_delete_section);return!0===d&&(this.model.destroy(),void(c&&!vc.shortcodes.where({parent_id:c}).length?(b=vc.shortcodes.get(c),_.contains(["vc_column","vc_column_inner"],b.get("shortcode"))||b.destroy()):c&&(b=vc.shortcodes.get(c),b&&b.view&&b.view.setActiveLayoutButton&&b.view.setActiveLayoutButton())))},remove:function(){this.$content&&this.$content.data("uiSortable")&&this.$content.sortable("destroy"),this.$content&&this.$content.data("uiDroppable")&&this.$content.droppable("destroy"),delete vc.app.views[this.model.id],window.VcColumnView.__super__.remove.call(this)}}),window.VcSectionView=VcColumnView.extend({designHelpersSelector:"> .vc_controls-row .vc_column-edit",setColumnClasses:function(){var a=this.model.getParam("disable_element"),b="vc_hidden-xs vc_hidden-sm  vc_hidden-md vc_hidden-lg";this.disable_element_class&&this.$el.removeClass(this.disable_element_class),_.isEmpty(a)||(this.$el.addClass(b),this.disable_element_class=b)},buildDesignHelpers:function(){var b,c,d,e,f,g;b=this.model.getParam("css"),c=this.$el.find(this.designHelpersSelector),this.$el.find("> .vc_controls-row .vc_row_color").remove(),this.$el.find("> .vc_controls-row .vc_row_image").remove(),g=b.match(/background\-image:\s*url\(([^\)]+)\)/),g&&!_.isUndefined(g[1])&&(d=g[1]),g=b.match(/background\-color:\s*([^\s\;]+)\b/),g&&!_.isUndefined(g[1])&&(e=g[1]),g=b.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/),g&&!_.isUndefined(g[1])&&(e=g[1],d=g[2]),f=this.model.getParam("el_id"),this.$el.find("> .vc_controls-row .vc_row-hash-id").remove(),_.isEmpty(f)||a('<span class="vc_row-hash-id"></span>').text("#"+f).insertAfter(c),d&&a('<span class="vc_row_image" style="background-image: url('+d+');" title="'+window.i18nLocale.row_background_image+'"></span>').insertAfter(c),e&&a('<span class="vc_row_color" style="background-color: '+e+'" title="'+window.i18nLocale.row_background_color+'"></span>').insertAfter(c)},checkIsEmpty:function(){window.VcSectionView.__super__.checkIsEmpty.call(this),this.setSorting()},setSorting:function(){var b=this;this.$content.sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder",connectWith:".wpb_main_sortable,.wpb_vc_section .vc_section_container",cursor:"move",items:"> .wpb_vc_row",handle:".vc_column-move",cancel:".vc-non-draggable-row",distance:.5,scroll:!0,scrollSensitivity:70,tolerance:"intersect",update:function(c,d){var e=a("> div.wpb_sortable,> div.vc-non-draggable",b.$content);e.each(function(){var b=a(this).data("model"),c=a(this).index();if(b.set("order",c),e.length-1>c&&vc.storage.lock(),!_.isNull(d.sender)){var f=d.item.parent().closest("[data-model-id]"),g=f.data("model"),h=b.get("parent_id");vc.storage.lock(),b.save({parent_id:g.id}),h&&vc.app.views[h].checkIsEmpty(),vc.app.views[g.id].checkIsEmpty()}b.save()})},stop:function(b,c){a("#visual_composer_content").removeClass("vc_sorting-started"),a(".dragging_in").removeClass("dragging_in");var d=c.item.data("element_type"),e=c.item.parent().closest("[data-element_type]").data("element_type");vc.check_relevance(e,d)&&e!=d||a(this).sortable("cancel"),a(".vc_sorting-empty-container").removeClass("vc_sorting-empty-container")},over:function(a,b){var c=b.item.data("element_type"),d=b.placeholder.closest("[data-element_type]").data("element_type")||"",e=!!_.isUndefined(vc.map[d].allowed_container_element)||vc.map[d].allowed_container_element;if(!vc.check_relevance(d,c)||d==c)return b.placeholder.addClass("vc_hidden-placeholder"),!1;var f=_.isObject(vc.map[c])&&(_.isBoolean(vc.map[c].is_container)&&!0===vc.map[c].is_container||!_.isEmpty(vc.map[c].as_parent));return f&&!0!==e&&e!==b.item.data("element_type").replace(/_inner$/,"")?(b.placeholder.addClass("vc_hidden-placeholder"),!1):(_.isNull(b.sender)||!b.sender.length||b.sender.find("> [data-element_type]:not(.ui-sortable-helper):visible").length||b.sender.addClass("vc_sorting-empty-container"),void b.placeholder.css({maxWidth:b.placeholder.parent().width()}))},out:function(a,b){b.placeholder.removeClass("vc_hidden-placeholder"),b.placeholder.css({maxWidth:b.placeholder.parent().width()}),_.isNull(b.sender)||!b.sender.length||b.sender.find("> [data-element_type]:not(.ui-sortable-helper):visible").length||b.sender.addClass("vc_sorting-empty-container")}})}}),window.VcAccordionView=vc.shortcode_view.extend({adding_new_tab:!1,events:{'click .tab_controls:not(".nested_tab_controls") .add_tab':"addTab","click > .vc_controls .column_delete, > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .column_edit, > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .column_clone,> .vc_controls .vc_control-btn-clone":"clone"},render:function(){return window.VcAccordionView.__super__.render.call(this),vc_user_access().shortcodeAll("vc_accordion_tab")?(this.$content.sortable({axis:"y",handle:"h3",stop:function(b,c){c.item.prev().triggerHandler("focusout"),a(this).find("> .wpb_sortable").each(function(){var b=a(this).data("model");b.save({order:a(this).index()})})}}),this):(this.$el.find(".tab_controls").hide(),this)},changeShortcodeParams:function(a){var b,c;window.VcAccordionView.__super__.changeShortcodeParams.call(this,a),b=a.get("params"),c=!(!_.isString(b.collapsible)||"yes"!==b.collapsible),this.$content.hasClass("ui-accordion")&&this.$content.accordion("option","collapsible",c)},changedContent:function(a){this.$content.hasClass("ui-accordion")&&this.$content.accordion("destroy");var b=!(!_.isString(this.model.get("params").collapsible)||"yes"!==this.model.get("params").collapsible);this.$content.accordion({header:"h3:not('.wpb_vc_accordion_tab h3')",navigation:!1,autoHeight:!0,heightStyle:"content",collapsible:b,active:!1===this.adding_new_tab&&!0!==a.model.get("cloned")?0:a.$el.index()}),this.adding_new_tab=!1},addTab:function(a){return a.preventDefault(),!!vc_user_access().shortcodeAll("vc_accordion_tab")&&(this.adding_new_tab=!0,void vc.shortcodes.create({shortcode:"vc_accordion_tab",params:{title:window.i18nLocale.section},parent_id:this.model.id}))},_loadDefaults:function(){window.VcAccordionView.__super__._loadDefaults.call(this)}}),window.VcAccordionTabView=window.VcColumnView.extend({events:{"click > [data-element_type] > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > [data-element_type] >  .vc_controls .vc_control-btn-prepend":"addElement","click > [data-element_type] >  .vc_controls .vc_control-btn-edit":"editElement","click > [data-element_type] > .vc_controls .vc_control-btn-clone":"clone","click > [data-element_type] > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},setContent:function(){this.$content=this.$el.find("> [data-element_type] > .wpb_element_wrapper > .vc_container_for_children")},changeShortcodeParams:function(a){var b;window.VcAccordionTabView.__super__.changeShortcodeParams.call(this,a),b=a.get("params"),_.isObject(b)&&_.isString(b.title)&&this.$el.find("> h3 .tab-label").text(b.title)},setEmpty:function(){a("> [data-element_type]",this.$el).addClass("vc_empty-column"),"edit"!==vc_user_access().getState("shortcodes")&&this.$content.addClass("vc_empty-container")},unsetEmpty:function(){a("> [data-element_type]",this.$el).removeClass("vc_empty-column"),this.$content.removeClass("vc_empty-container")}}),window.VcNestedAccordionView=vc.shortcode_view.extend({adding_new_tab:!1,events:{"click .nested_tab_controls .add_tab":"addTab","click > .vc_controls .column_delete, > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .column_edit, > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .column_clone,> .vc_controls .vc_control-btn-clone":"clone"},render:function(){return window.VcNestedAccordionView.__super__.render.call(this),this.$content.sortable({axis:"y",handle:"h3",stop:function(b,c){c.item.prev().triggerHandler("focusout"),a(this).find("> .wpb_sortable").each(function(){var b=a(this).data("model");b.save({order:a(this).index()})})}}),this},changeShortcodeParams:function(a){window.VcNestedAccordionView.__super__.changeShortcodeParams.call(this,a);var b=!(!_.isString(this.model.get("params").collapsible)||"yes"!==this.model.get("params").collapsible);this.$content.hasClass("ui-accordion")&&this.$content.accordion("option","collapsible",b)},changedContent:function(a){this.$content.hasClass("ui-accordion")&&this.$content.accordion("destroy");var b=!(!_.isString(this.model.get("params").collapsible)||"yes"!==this.model.get("params").collapsible);this.$content.accordion({header:"h3",navigation:!1,autoHeight:!0,heightStyle:"content",collapsible:b,active:this.adding_new_tab===!1&&a.model.get("cloned")!==!0?0:a.$el.index()}),this.adding_new_tab=!1},addTab:function(a){this.adding_new_tab=!0,a.preventDefault(),vc.shortcodes.create({shortcode:"vc_nested_accordion_tab",params:{title:window.i18nLocale.section},parent_id:this.model.id})},_loadDefaults:function(){window.VcNestedAccordionView.__super__._loadDefaults.call(this)}}),window.VcNestedAccordionTabView=window.VcColumnView.extend({events:{"click > [data-element_type] > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > [data-element_type] >  .vc_controls .vc_control-btn-prepend":"addElement","click > [data-element_type] >  .vc_controls .vc_control-btn-edit":"editElement","click > [data-element_type] > .vc_controls .vc_control-btn-clone":"clone","click > [data-element_type] > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},setContent:function(){this.$content=this.$el.find("> [data-element_type] > .wpb_element_wrapper > .vc_container_for_children")},changeShortcodeParams:function(a){var b=a.get("params");window.VcNestedAccordionTabView.__super__.changeShortcodeParams.call(this,a),_.isObject(b)&&_.isString(b.title)&&this.$el.find("> h3 .tab-label").text(b.title)},setEmpty:function(){a("> [data-element_type]",this.$el).addClass("vc_empty-column"),this.$content.addClass("vc_empty-container")},unsetEmpty:function(){a("> [data-element_type]",this.$el).removeClass("vc_empty-column"),this.$content.removeClass("vc_empty-container")}}),window.VcMessageView=vc.shortcode_view.extend({changeShortcodeParams:function(a){var b,c;window.VcMessageView.__super__.changeShortcodeParams.call(this,a),b=a.get("params"),c=this.$el.find("> .wpb_element_wrapper").removeClass(_.values(this.params.color.value).join(" ")),_.isObject(b)&&_.isString(b.color)&&c.addClass(b.color)}}),window.VcMessageView_Backend=vc.shortcode_view.extend({changeShortcodeParams:function(b){var c,d,e,f,g;switch(window.VcMessageView_Backend.__super__.changeShortcodeParams.call(this,b),c=b.get("params"),d=this.$el.find("> .wpb_element_wrapper"),e=["vc_message_box"],_.isUndefined(c.message_box_style)&&(c.message_box_style="classic"),_.isUndefined(c.message_box_color)&&(c.message_box_color="alert-info"),c.style?"3d"===c.style?(c.message_box_style="3d",c.style="rounded"):"outlined"===c.style?(c.message_box_style="outline",c.style="rounded"):"square_outlined"===c.style&&(c.message_box_style="outline",c.style="square"):c.style="rounded",e.push("vc_message_box-"+c.style),c.message_box_style&&e.push("vc_message_box-"+c.message_box_style),d.attr("class","wpb_element_wrapper"),d.find(".vc_message_box-icon").remove(),f=_.isUndefined(c["icon_"+c.icon_type])?"fa fa-info-circle":c["icon_"+c.icon_type],g=c.color,c.color){case"info":f="fa fa-info-circle";break;case"alert-info":f="vc_pixel_icon vc_pixel_icon-info";break;case"success":f="fa fa-check";break;case"alert-success":f="vc_pixel_icon vc_pixel_icon-tick";break;case"warning":f="fa fa-exclamation-triangle";break;case"alert-warning":f="vc_pixel_icon vc_pixel_icon-alert";break;case"danger":f="fa fa-times";break;case"alert-danger":f="vc_pixel_icon vc_pixel_icon-explanation";break;case"alert-custom":default:g=c.message_box_color}e.push("vc_color-"+g),d.addClass(e.join(" ")),d.prepend(a('<div class="vc_message_box-icon"><i class="'+f+'"></i></div>'))}}),window.VcTextSeparatorView=vc.shortcode_view.extend({changeShortcodeParams:function(b){var c,d;window.VcTextSeparatorView.__super__.changeShortcodeParams.call(this,b),c=b.get("params");var e=this.$el.find("> .wpb_element_wrapper");_.isObject(c)&&_.isString(c.title_align)&&e.removeClass(_.values(this.params.title_align.value).join(" ")).addClass(c.title_align),_.isObject(c)&&_.isString(c.add_icon)&&"true"===c.add_icon&&(d=a('<i class="'+c["i_icon_"+c.i_type]+'" ></i>'),d.prependTo(e.find("[name=title]")),d.after(" "))}}),window.VcCallToActionView=vc.shortcode_view.extend({changeShortcodeParams:function(a){var b;window.VcCallToActionView.__super__.changeShortcodeParams.call(this,a),b=a.get("params"),_.isObject(b)&&_.isString(b.position)&&this.$el.find("> .wpb_element_wrapper").removeClass(_.values(this.params.position.value).join(" ")).addClass(b.position)}}),window.VcCallToActionView3=vc.shortcode_view.extend({changeShortcodeParams:function(a){var b,c,d;window.VcCallToActionView3.__super__.changeShortcodeParams.call(this,a),b=_.extend({add_icon:"",i_type:""},a.get("params")),d=this.$el.find(".vc_admin_label.admin_label_i_type"),_.isEmpty(b.add_icon)?d.addClass("hidden-label").hide():_.isEmpty(b.i_type)||_.isEmpty(b["i_icon_"+b.i_type])||(c=vc_toTitleCase(b.i_type)+' - <i class="'+b["i_icon_"+b.i_type]+'"></i>',d.html("<label>"+d.find("label").text()+"</label>: "+c),d.show().removeClass("hidden-label"))}}),window.VcToggleView=vc.shortcode_view.extend({events:function(){return _.extend({"click .vc_toggle_title":"toggle","click .toggle_title":"toggle"},window.VcToggleView.__super__.events)},toggle:function(b){b&&b.preventDefault(),a(b.currentTarget).toggleClass("vc_toggle_title_active"),a(".vc_toggle_content",this.$el).slideToggle(500)},changeShortcodeParams:function(b){var c;window.VcToggleView.__super__.changeShortcodeParams.call(this,b),c=b.get("params"),_.isObject(c)&&_.isString(c.open)&&"true"===c.open&&a(".vc_toggle_title",this.$el).addClass("vc_toggle_title_active").next().show()}}),window.VcButtonView=vc.shortcode_view.extend({events:function(){return _.extend({"click button":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(a){a.preventDefault()},changeShortcodeParams:function(a){var b;if(window.VcButtonView.__super__.changeShortcodeParams.call(this,a),b=a.get("params"),_.isObject(b)){var c;c=b.color+" "+b.size+" "+b.icon,this.$el.find(".wpb_element_wrapper").removeClass(c),this.$el.find("button.title").attr({class:"title textfield wpb_button "+c}),"none"!==b.icon&&0===this.$el.find("button i.icon").length?this.$el.find("button.title").append('<i class="icon"></i>'):this.$el.find("button.title i.icon").remove()}}}),window.VcButton2View=vc.shortcode_view.extend({events:function(){return _.extend({"click button":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(a){a.preventDefault()},changeShortcodeParams:function(a){var b;if(window.VcButton2View.__super__.changeShortcodeParams.call(this,a),b=a.get("params"),_.isObject(b)){var c;c=(b.color?"vc_btn_"+b.color:"")+" "+(b.color?"vc_btn-"+b.color:"")+" "+(b.size?"vc_btn-"+b.size:"")+" "+(b.size?"vc_btn_"+b.size:"")+" "+(b.style?"vc_btn_"+b.style:""),this.$el.find(".wpb_element_wrapper").removeClass(c),this.$el.find("button.title").attr({class:"title textfield vc_btn  "+c})}}}),window.VcButton3View=vc.shortcode_view.extend({buttonTemplate:!1,buttonTemplateCompiled:!1,$wrapper:!1,events:function(){return _.extend({"click .vc_btn3":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(a){a.preventDefault()},changeShortcodeParams:function(b){var c;if(window.VcButton3View.__super__.changeShortcodeParams.call(this,b),c=_.extend({},b.get("params")),this.buttonTemplate||(this.buttonTemplate=this.$el.find(".vc_btn3-container").html(),this.buttonTemplateCompiled=vc.template(this.buttonTemplate,vc.templateOptions.custom)),this.$wrapper||(this.$wrapper=this.$el.find(".wpb_element_wrapper")),_.isObject(c)){c.title&&_.isEmpty(c.title.trim())&&(c.title='<span class="vc_btn3-placeholder">&nbsp;</span>'),"custom"===c.style?(c.color=void 0,_.isEmpty(c.custom_background)&&_.isEmpty(c.custom_text)&&(c.color="grey")):"outline-custom"===c.style&&(c.color=void 0,_.isEmpty(c.outline_custom_color)&&_.isEmpty(c.outline_custom_hover_background)&&_.isEmpty(c.outline_custom_hover_text)&&(c.style="outline",c.color="grey"));var d=a(this.buttonTemplateCompiled({params:c}));"custom"===c.style?("undefined"!==c.custom_background&&d.css("background-color",c.custom_background),"undefined"!==c.custom_text&&d.css("color",c.custom_text)):"outline-custom"===c.style&&d.css({"background-color":"transparent","border-color":c.outline_custom_color,color:c.outline_custom_color}).hover(function(){a(this).css({"background-color":c.outline_custom_hover_background,"border-color":c.outline_custom_hover_background,color:c.outline_custom_hover_text})},function(){a(this).css({"background-color":"transparent","border-color":c.outline_custom_color,color:c.outline_custom_color})}),this.$wrapper.find(".vc_btn3-container").html(d)}}}),window.VcTabsView=vc.shortcode_view.extend({new_tab_adding:!1,events:{'click .tabs_controls .add_tab:not(".nested_tab_controls .add_tab")':"addTab","click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone"},initialize:function(a){window.VcTabsView.__super__.initialize.call(this,a),_.bindAll(this,"stopSorting")},render:function(){return window.VcTabsView.__super__.render.call(this),this.$tabs=this.$el.find(".wpb_tabs_holder"),this.createAddTabButton(),this},ready:function(a){window.VcTabsView.__super__.ready.call(this,a)},createAddTabButton:function(){var b=Date.now()+"-"+Math.floor(11*Math.random());this.$tabs.append('<div id="new-tab-'+b+'" class="new_element_button"></div>'),this.$add_button=a('<li class="add_tab_block"><a href="#new-tab-'+b+'" class="add_tab" title="'+window.i18nLocale.add_tab+'"></a></li>').appendTo(this.$tabs.find(".tabs_controls")),vc_user_access().shortcodeAll("vc_tab")||this.$add_button.hide()},addTab:function(a){if(a.preventDefault(),!vc_user_access().shortcodeAll("vc_tab"))return!1;this.new_tab_adding=!0;var b=window.i18nLocale.tab,c=this.$tabs.find("[data-element_type=vc_tab]").length,d=Date.now()+"-"+c+"-"+Math.floor(11*Math.random());return vc.shortcodes.create({shortcode:"vc_tab",params:{title:b,tab_id:d},parent_id:this.model.id}),!1},stopSorting:function(b,c){var d;this.$tabs.find("ul.tabs_controls li:not(.add_tab_block)").each(function(b){a(this).find("a").attr("href").replace("#",""),d=vc.shortcodes.get(a("[id="+a(this).attr("aria-controls")+"]").data("model-id")),vc.storage.lock(),d.save({order:a(this).index()})}),d&&d.save()},changedContent:function(b){var c=b.model.get("params");if(this.$tabs.hasClass("ui-tabs")||(this.$tabs.tabs({activate:function(b,c){var d=c.newPanel.selector.replace(/\\/gi,"").replace("#",""),e=c.oldPanel.selector.replace(/\\/gi,"").replace("#","");"http"==d.substr(4,4)&&a("[id='"+d+"']").css("display","block"),"http"==e.substr(4,4)&&a("[id='"+e+"']").css("display","none")},select:function(b,c){return!a(c.tab).hasClass("add_tab")}}),this.$tabs.find(".ui-tabs-nav").prependTo(this.$tabs),vc_user_access().shortcodeAll("vc_tab")&&this.$tabs.find(".ui-tabs-nav").sortable({axis:"vc_tour"===this.$tabs.closest("[data-element_type]").data("element_type")?"y":"x",update:this.stopSorting,items:"> li:not(.add_tab_block)"})),!0===b.model.get("cloned")){var d=(b.model.get("cloned_from"),a(".tabs_controls > .add_tab_block",this.$content)),e=a("<li><a href='#tab-"+c.tab_id+"'>"+c.title+"</a></li>").insertBefore(d);this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",e.index())}else a("<li><a href='#tab-"+c.tab_id+"'>"+c.title+"</a></li>").insertBefore(this.$add_button),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",this.new_tab_adding?a(".ui-tabs-nav li",this.$content).length-2:0);this.new_tab_adding=!1},cloneModel:function(a,c,d){var e,f,g,h;return e=_.isBoolean(d)&&!0===d?a.get("order"):parseFloat(a.get("order"))+vc.clone_index,g=_.extend({},a.get("params")),h=a.get("shortcode"),"vc_tab"===h&&_.extend(g,{tab_id:Date.now()+"-"+this.$tabs.find("[data-element-type=vc_tab]").length+"-"+Math.floor(11*Math.random())}),f=b.create({shortcode:h,id:vc_guid(),parent_id:c,order:e,cloned:"vc_tab"!==h,cloned_from:a.toJSON(),params:g}),_.each(b.where({parent_id:a.id}),function(a){this.cloneModel(a,f.get("id"),!0)},this),f}}),window.VcNestedTabsView=vc.shortcode_view.extend({new_tab_adding:!1,events:{"click .add_tab":"addTab","click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone"},initialize:function(a){window.VcNestedTabsView.__super__.initialize.call(this,a),_.bindAll(this,"stopSorting")},render:function(){return window.VcNestedTabsView.__super__.render.call(this),this.$tabs=this.$el.find(".wpb_nested_tabs_holder"),this.createAddTabButton(),this},ready:function(a){window.VcNestedTabsView.__super__.ready.call(this,a)},createAddTabButton:function(){var b=+new Date+"-"+Math.floor(11*Math.random());this.$tabs.append('<div id="new-tab-'+b+'" class="new_element_button"></div>'),
this.$add_button=a('<li class="add_tab_block"><a href="#new-tab-'+b+'" class="add_tab" title="'+window.i18nLocale.add_tab+'"></a></li>').appendTo(this.$tabs.find(".nested_tabs_controls"))},addTab:function(a){a.preventDefault(),this.new_tab_adding=!0;var b=window.i18nLocale.tab,c=this.$tabs.find("[data-element_type=vc_nested_tab]").length,d=+new Date+"-"+c+"-"+Math.floor(11*Math.random());return vc.shortcodes.create({shortcode:"vc_nested_tab",params:{title:b,tab_id:d},parent_id:this.model.id}),!1},stopSorting:function(b,c){var d;this.$tabs.find("ul.nested_tabs_controls li:not(.add_tab_block)").each(function(b){a(this).find("a").attr("href").replace("#","");d=vc.shortcodes.get(a("[id="+a(this).attr("aria-controls")+"]").data("model-id")),vc.storage.lock(),d.save({order:a(this).index()})}),d.save()},changedContent:function(b){var c=b.model.get("params");if(this.$tabs.hasClass("ui-tabs")||(this.$tabs.tabs({activate:function(b,c){var d=c.newPanel.selector.replace(/\\/gi,"").replace("#",""),e=c.oldPanel.selector.replace(/\\/gi,"").replace("#","");"http"==d.substr(4,4)&&a("[id='"+d+"']").css("display","block"),"http"==e.substr(4,4)&&a("[id='"+e+"']").css("display","none")},select:function(b,c){return!a(c.tab).hasClass("add_tab")}}),this.$tabs.find(".ui-tabs-nav").prependTo(this.$tabs),this.$tabs.find(".ui-tabs-nav").sortable({axis:"vc_tour"==this.$tabs.closest("[data-element_type]").data("element_type")?"y":"x",update:this.stopSorting,items:"> li:not(.add_tab_block)"})),b.model.get("cloned")===!0){var f,d=b.model.get("cloned_from"),e=a('[href="#tab-'+d.params.tab_id+'"]',this.$content).parent();f="undefined"!=typeof e.prop("tagName")?a("<li><a href='#tab-"+c.tab_id+"'>"+c.title+"</a></li>").insertAfter(e):a("<li><a href='#tab-"+c.tab_id+"'>"+c.title+"</a></li>").insertBefore(this.$add_button),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",f.index())}else a("<li><a href='#tab-"+c.tab_id+"'>"+c.title+"</a></li>").insertBefore(this.$add_button),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",this.new_tab_adding?a(".nested_tabs_controls li",this.$content).length-2:0);this.new_tab_adding=!1},cloneModel:function(a,c,d){var g,f=_.isBoolean(d)&&d===!0?a.get("order"):parseFloat(a.get("order"))+vc.clone_index,h=_.extend({},a.get("params"));return"vc_nested_tab"===a.get("shortcode")&&_.extend(h,{tab_id:+new Date+"-"+this.$tabs.find("[data-element-type=vc_nested_tab]").length+"-"+Math.floor(11*Math.random())}),g=b.create({shortcode:a.get("shortcode"),id:vc_guid(),parent_id:c,order:f,cloned:"vc_nested_tab"!==a.get("shortcode"),cloned_from:a.toJSON(),params:h}),_.each(b.where({parent_id:a.id}),function(a){this.cloneModel(a,g.get("id"),!0)},this),g}}),window.VcTabView=window.VcColumnView.extend({events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-prepend":"addElement","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},render:function(){var a=this.model.get("params");return window.VcTabView.__super__.render.call(this),a.tab_id||(a.tab_id=Date.now()+"-"+Math.floor(11*Math.random()),this.model.save("params",a)),this.id="tab-"+a.tab_id,this.$el.attr("id",this.id),this},ready:function(a){return window.VcTabView.__super__.ready.call(this,a),this.$tabs=this.$el.closest(".wpb_tabs_holder"),this.model.get("params"),this},changeShortcodeParams:function(b){var c;window.VcTabView.__super__.changeShortcodeParams.call(this,b),c=b.get("params"),_.isObject(c)&&_.isString(c.title)&&_.isString(c.tab_id)&&a('.ui-tabs-nav [href="#tab-'+c.tab_id+'"]').text(c.title)},deleteShortcode:function(b){_.isObject(b)&&b.preventDefault();var c=confirm(window.i18nLocale.press_ok_to_delete_section),d=this.model.get("parent_id");if(!0!==c)return!1;if(this.model.destroy(),!vc.shortcodes.where({parent_id:d}).length){var e=vc.shortcodes.get(d);return e.destroy(),!1}var f=this.model.get("params"),g=a('[href="#tab-'+f.tab_id+'"]',this.$tabs).parent().index();a('[href="#tab-'+f.tab_id+'"]').parent().remove();var h=this.$tabs.find(".ui-tabs-nav li:not(.add_tab_block)").length;0<h&&this.$tabs.tabs("refresh"),g<h?this.$tabs.tabs("option","active",g):0<h&&this.$tabs.tabs("option","active",h-1)},cloneModel:function(a,c,d){var e,f,g,h;return e=_.isBoolean(d)&&!0===d?a.get("order"):parseFloat(a.get("order"))+vc.clone_index,g=_.extend({},a.get("params")),h=a.get("shortcode"),"vc_tab"===h&&_.extend(g,{tab_id:Date.now()+"-"+this.$tabs.find("[data-element_type=vc_tab]").length+"-"+Math.floor(11*Math.random())}),f=b.create({shortcode:h,parent_id:c,order:e,cloned:!0,cloned_from:a.toJSON(),params:g}),_.each(b.where({parent_id:a.id}),function(a){this.cloneModel(a,f.get("id"),!0)},this),f}}),window.VcNestedTabView=window.VcColumnView.extend({events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-prepend":"addElement","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},render:function(){var a=this.model.get("params");return window.VcNestedTabView.__super__.render.call(this),a.tab_id&&a.tab_id.indexOf("def")==-1||(a.tab_id=+new Date+"-"+Math.floor(11*Math.random()),this.model.save("params",a)),this.id="tab-"+a.tab_id,this.$el.attr("id",this.id),this},ready:function(a){window.VcNestedTabView.__super__.ready.call(this,a),this.$tabs=this.$el.closest(".wpb_nested_tabs_holder");this.model.get("params");return this},changeShortcodeParams:function(b){var c=b.get("params");window.VcNestedTabView.__super__.changeShortcodeParams.call(this,b),_.isObject(c)&&_.isString(c.title)&&_.isString(c.tab_id)&&a('.ui-tabs-nav [href="#tab-'+c.tab_id+'"]').text(c.title)},deleteShortcode:function(b){_.isObject(b)&&b.preventDefault();var c=confirm(window.i18nLocale.press_ok_to_delete_section),d=this.model.get("parent_id");if(c!==!0)return!1;if(this.model.destroy(),!vc.shortcodes.where({parent_id:d}).length)return vc.shortcodes.get(d).destroy(),!1;var e=this.model.get("params"),f=a('[href="#tab-'+e.tab_id+'"]',this.$tabs).parent().index();a('[href="#tab-'+e.tab_id+'"]').parent().remove();var g=this.$tabs.find(".ui-tabs-nav li:not(.add_tab_block)").length;g>0&&this.$tabs.tabs("refresh"),f<g?this.$tabs.tabs("option","active",f):g>0&&this.$tabs.tabs("option","active",g-1)},cloneModel:function(a,c,d){var f=_.isBoolean(d)&&d===!0?a.get("order"):parseFloat(a.get("order"))+vc.clone_index,g=_.extend({},a.get("params"));"vc_nested_tab"===a.get("shortcode")&&_.extend(g,{tab_id:+new Date+"-"+this.$tabs.find("[data-element_type=vc_nested_tab]").length+"-"+Math.floor(11*Math.random())});var h=b.create({shortcode:a.get("shortcode"),parent_id:c,order:f,cloned:!0,cloned_from:a.toJSON(),params:g});return _.each(b.where({parent_id:a.id}),function(a){this.cloneModel(a,h.id,!0)},this),h}}),window.VcIconElementView_Backend=vc.shortcode_view.extend({changeShortcodeParams:function(a){var b,c,d,e;b=a.get("shortcode"),c=a.get("params"),d=vc.map[b],_.isArray(d.params)&&_.each(d.params,function(a){if(!_.isUndefined(a.admin_label)&&a.admin_label){var b,d,e,f;b=a.param_name,d=c[b],e=this.$el.find("> .wpb_element_wrapper"),f=e.children(".admin_label_"+b),f.length&&(""===d||_.isUndefined(d)?f.hide().addClass("hidden-label"):("type"===b&&(_.isUndefined(c["icon_"+d])||(d=vc_toTitleCase(d)+" - <i class='"+c["icon_"+d]+"'></i>")),f.html("<label>"+f.find("label").text()+"</label>: "+d),f.show().removeClass("hidden-label")))}},this),e=vc.app.views[this.model.get("parent_id")],!1!==a.get("parent_id")&&_.isObject(e)&&e.checkIsEmpty()}}),window.VcBackendTtaViewInterface=vc.shortcode_view.extend({sortableSelector:!1,$sortable:!1,$navigation:!1,defaultSectionTitle:window.i18nLocale.tab,sortableUpdateModelIdSelector:"data-vc-target-model-id",activeClass:"vc_active",sortingPlaceholder:"vc_placeholder",events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .vc_controls .vc_control-btn-prepend":"clickPrependSection","click .vc_tta-section-append":"clickAppendSection"},initialize:function(a){window.VcBackendTtaViewInterface.__super__.initialize.call(this,a),_.bindAll(this,"updateSorting")},render:function(){return window.VcBackendTtaViewInterface.__super__.render.call(this),this.$el.addClass("vc_tta-container vc_tta-o-non-responsive"),this},setContent:function(){this.$content=this.$el.find("> .wpb_element_wrapper .vc_tta-panels")},clickAppendSection:function(a){a.preventDefault(),this.addSection()},clickPrependSection:function(a){a.preventDefault(),this.addSection(!0)},addSection:function(a){var b,c,d;return b=this.defaultSectionTitle,c={shortcode:"vc_tta_section",params:{title:b},parent_id:this.model.get("id"),order:_.isBoolean(a)&&a?vc.add_element_block_view.getFirstPositionIndex():vc.shortcodes.getNextOrder(),prepend:a},d=vc.shortcodes.create(c)},findSection:function(a){return this.$content.children('[data-model-id="'+a+'"]')},getIndex:function(a){return a.index()},buildSortable:function(a){return!("edit"===vc_user_access().getState("shortcodes")||!vc_user_access().shortcodeAll("vc_tta_section"))&&a.sortable({forcePlaceholderSize:!0,placeholder:this.sortingPlaceholder,helper:this.renderSortingPlaceholder,scroll:!0,cursor:"move",cursorAt:{top:20,left:16},start:function(a,b){},over:function(a,b){},stop:function(a,b){b.item.attr("style","")},update:this.updateSorting,items:this.sortableSelector})},updateSorting:function(b,c){var d;return!!vc_user_access().shortcodeAll("vc_tta_section")&&(d=this,this.$sortable.find(this.sortableSelector).each(function(){var b,c,e;e=a(this),c=e.attr(d.sortableUpdateModelIdSelector),b=vc.shortcodes.get(c),vc.storage.lock(),b.save({order:d.getIndex(e)})}),vc.storage.unlock(),void vc.storage.save())},makeFirstSectionActive:function(){this.$content.children(":first-child").addClass(this.activeClass)},checkForActiveSection:function(){var a;a=this.$content.children("."+this.activeClass),a.length||this.makeFirstSectionActive()},changeActiveSection:function(a){this.$content.children(".vc_tta-panel."+this.activeClass).removeClass(this.activeClass),this.findSection(a).addClass(this.activeClass)},changedContent:function(a){var b;return b=window.VcBackendTtaViewInterface.__super__.changedContent.call(this,a),this.checkForActiveSection(),this.buildSortable(this.$sortable),b},notifySectionChanged:function(a){var b,c;b=a.get("view"),_.isObject(b)&&(c=a.getParam("title"),_.isString(c)&&c.length||(c=this.defaultSectionTitle),b.$el.find(".vc_tta-panel-title a .vc_tta-title-text").text(c))},notifySectionRendered:function(a){},getNextTab:function(a){var b,c,d,e;return e=this.$navigation.children(),b=e.length-2,c=a.index(),d=c!==b?e.eq(c+1):e.eq(c-1)},renderSortingPlaceholder:function(a,b){return vc.app.renderPlaceholder(a,b)}}),window.VcBackendTtaTabsView=window.VcBackendTtaViewInterface.extend({sortableSelector:"> [data-vc-tab]",sortableSelectorCancel:".vc-non-draggable-container",sortablePlaceholderClass:"vc_placeholder-tta-tab",navigationSectionTemplate:null,navigationSectionTemplateParsed:null,$navigationSectionAdd:null,sortingPlaceholder:"vc_placeholder-tab vc_tta-tab",render:function(){return window.VcBackendTtaTabsView.__super__.render.call(this),this.$navigation=this.$el.find("> .wpb_element_wrapper .vc_tta-tabs-list"),this.$sortable=this.$navigation,this.$navigationSectionAdd=this.$navigation.children(".vc_tta-tab:first-child"),this.setNavigationSectionTemplate(this.$navigationSectionAdd.prop("outerHTML")),vc_user_access().shortcodeAll("vc_tta_section")?this.$navigationSectionAdd.addClass("vc_tta-section-append").removeAttr("data-vc-target-model-id").removeAttr("data-vc-tab").find("[data-vc-target]").html('<i class="vc_tta-controls-icon vc_tta-controls-icon-plus"></i>').removeAttr("data-vc-tabs").removeAttr("data-vc-target").removeAttr("data-vc-target-model-id").removeAttr("data-vc-toggle"):this.$navigationSectionAdd.hide(),this},setNavigationSectionTemplate:function(a){this.navigationSectionTemplate=a,this.navigationSectionTemplateParsed=vc.template(this.navigationSectionTemplate,vc.templateOptions.custom)},getNavigationSectionTemplate:function(){return this.navigationSectionTemplate},getParsedNavigationSectionTemplate:function(a){return this.navigationSectionTemplateParsed(a)},changeNavigationSectionTitle:function(a,b){this.findNavigationTab(a).find("[data-vc-target]").text(b)},changeActiveSection:function(a){window.VcBackendTtaTabsView.__super__.changeActiveSection.call(this,a),this.$navigation.children("."+this.activeClass).removeClass(this.activeClass),this.findNavigationTab(a).addClass(this.activeClass)},notifySectionRendered:function(b){var c,d,e,f;window.VcBackendTtaTabsView.__super__.notifySectionRendered.call(this,b),d=b.getParam("title"),c=a(this.getParsedNavigationSectionTemplate({model_id:b.get("id"),section_title:_.isString(d)&&0<d.length?d:this.defaultSectionTitle})),b.get("cloned")?(f=b.get("cloned_from"),_.isObject(f)&&(e=this.$navigation.children('[data-vc-target-model-id="'+f.id+'"]'),e.length?c.insertAfter(e):c.insertBefore(this.$navigation.children(".vc_tta-section-append")))):b.get("prepend")?c.insertBefore(this.$navigation.children(":first-child")):c.insertBefore(this.$navigation.children(":last-child"))},notifySectionChanged:function(a){var b;window.VcBackendTtaTabsView.__super__.notifySectionChanged.call(this,a),b=a.getParam("title"),_.isString(b)&&b.length||(b=this.defaultSectionTitle),this.changeNavigationSectionTitle(a.get("id"),b),a.view.$el.find("> .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_element-name").removeClass("vc_element-move"),a.view.$el.find("> .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_element-name .vc-c-icon-dragndrop").hide()},makeFirstSectionActive:function(){var a;a=this.$navigation.children(":first-child:not(.vc_tta-section-append)").addClass(this.activeClass),a.length&&this.findSection(a.data("vc-target-model-id")).addClass(this.activeClass)},findNavigationTab:function(a){return this.$navigation.children('[data-vc-target-model-id="'+a+'"]')},removeSection:function(a){var b,c,d;b=this.findNavigationTab(a.get("id")),d=b.hasClass(this.activeClass),d&&(c=this.getNextTab(b),c.addClass(this.activeClass),this.changeActiveSection(c.data("vc-target-model-id"))),b.remove()},renderSortingPlaceholder:function(a,b){var c,d,e;return c=b,d=b.width()+1,e=b.height(),c.width(d),c.height(e),c}}),window.VcBackendTtaAccordionView=VcBackendTtaViewInterface.extend({sortableSelector:"> .vc_tta-panel:not(.vc_tta-section-append)",sortableSelectorCancel:".vc-non-draggable",sortableUpdateModelIdSelector:"data-model-id",defaultSectionTitle:window.i18nLocale.section,render:function(){return window.VcBackendTtaTabsView.__super__.render.call(this),this.$navigation=this.$content,this.$sortable=this.$content,vc_user_access().shortcodeAll("vc_tta_section")||this.$content.find(".vc_tta-section-append").hide(),this},removeSection:function(a){var b,c,d;b=this.findSection(a.get("id")),d=b.hasClass(this.activeClass),d&&(c=this.getNextTab(b),c.addClass(this.activeClass))},addShortcode:function(a){var b;b=_.last(vc.shortcodes.filter(function(a){return a.get("parent_id")===this.get("parent_id")&&parseFloat(a.get("order"))<parseFloat(this.get("order"))},a.model)),b?a.render().$el.insertAfter("[data-model-id="+b.id+"]"):this.$content.prepend(a.render().el)}}),window.VcBackendTtaTourView=window.VcBackendTtaTabsView.extend({defaultSectionTitle:window.i18nLocale.section}),window.VcBackendTtaPageableView=window.VcBackendTtaTabsView.extend({defaultSectionTitle:window.i18nLocale.section}),window.VcBackendTtaSectionView=window.VcColumnView.extend({parentObj:null,events:{"click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-prepend":"addElement","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-edit":"editElement","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_empty-container":"addToEmpty"},setContent:function(){this.$content=this.$el.find("> .wpb_element_wrapper > .vc_tta-panel-body > .vc_container_for_children")},render:function(){var a;return window.VcBackendTtaSectionView.__super__.render.call(this),a=vc.shortcodes.get(this.model.get("parent_id")),_.isObject(a)&&!_.isUndefined(a.view)&&(this.parentObj=a),this.$el.addClass("vc_tta-panel"),this.$el.attr("style",""),this.$el.attr("data-vc-toggle","tab"),this.replaceTemplateVars(),this},replaceTemplateVars:function(){var a,b;a=this.model.getParam("title"),_.isEmpty(a)&&(a=this.parentObj&&this.parentObj.defaultSectionTitle&&this.parentObj.defaultSectionTitle.length?this.parentObj.defaultSectionTitle:window.i18nLocale.section),b=this.$el.find(".vc_tta-panel-heading");var c=vc.template(b.html(),vc.templateOptions.custom);b.html(c({model_id:this.model.get("id"),section_title:a}))},getIndex:function(){return this.$el.index()},ready:function(){this.updateParentNavigation(),window.VcBackendTtaSectionView.__super__.ready.call(this)},updateParentNavigation:function(){_.isObject(this.parentObj)&&this.parentObj.view&&this.parentObj.view.notifySectionRendered&&this.parentObj.view.notifySectionRendered(this.model)},deleteShortcode:function(a){var b;return _.isObject(a)&&a.preventDefault(),b=confirm(window.i18nLocale.press_ok_to_delete_section),!0===b&&(1===vc.shortcodes.where({parent_id:this.model.get("parent_id")}).length?(this.model.destroy(),this.parentObj&&this.parentObj.destroy()):(this.parentObj&&this.parentObj.view&&this.parentObj.view.removeSection&&this.parentObj.view.removeSection(this.model),this.model.destroy()),!0)},changeShortcodeParams:function(a){window.VcBackendTtaSectionView.__super__.changeShortcodeParams.call(this,a),_.isObject(this.parentObj)&&this.parentObj.view&&this.parentObj.view.notifySectionChanged&&this.parentObj.view.notifySectionChanged(a)}}),vc.addTemplateFilter(function(a){var b=VCS4()+"-"+VCS4();return a.replace(/tab\_id\=\"([^\"]+)\"/g,'tab_id="$1'+b+'"')})}(window.jQuery),function(a,b){"use strict";function c(b,c){var d=b.models?b.pluck("id"):b;a.ajax({dataType:"json",type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:d,vc_inline:!0,_vcnonce:window.vcAdminNonce}}).done(function(d){var e,f,h,i;if("function"==typeof c){for(e=[],h=[],i=0;i<d.data.ids.length;i++)f=b[d.data.ids[i]],f||(f=g.model.Attachment.get(d.data.ids[i]),h.push(f.fetch())),e.push(f);a.when.apply(a,h).done(function(){c(e)})}}).fail(function(b){a(".media-modal-close").click(),f=[],window.vc&&window.vc.active_panel&&window.i18nLocale&&window.i18nLocale.error_while_saving_image_filtered&&vc.active_panel.showMessage(window.i18nLocale.error_while_saving_image_filtered,"error"),window.console&&window.console.error&&window.console.error(b)}).always(function(){a(".media-modal").removeClass("processing-media")})}function d(b){var c,d,e;if(e=a(".media-frame:visible [data-vc-preview-image-filter="+b+"]"),e.length)return c=a(".media-frame:visible .attachment-info .thumbnail-image").eq(-1),d=c.find("img"),c.addClass("loading"),d.data("original-src")||d.data("original-src",d.attr("src")),e.val().length?void a.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"vc_media_editor_preview_image",filter:e.val(),attachment_id:b,preferred_size:window.getUserSetting("imgsize","medium"),_vcnonce:window.vcAdminNonce}}).done(function(a){a.success&&a.data.src.length&&d.attr("src",a.data.src)}).fail(function(a,b,c){window.console&&window.console.error&&window.console.error("Filter preview failed:",b,c)}).always(function(){c.removeClass("loading")}):(d.attr("src",d.data("original-src")),void c.removeClass("loading"))}var e,f=[],g=wp.media,h=g.featuredImage.set,i=g.editor.send.attachment,j=i18nLocale,k={};e=b.extend(g.view.AttachmentCompat.prototype.render),g.view.AttachmentCompat.prototype.render=function(){var c,f=this;return c=this.model.get("id"),e.call(this),b.defer(function(){var b,e,g,h,i;b=f.controller.$el.find(".attachment-info"),i=f.controller.$el.find("[data-vc-preview-image-filter]"),b.length&&i.length&&(h=i.parent().find(".vc-filter-label").text(),e='<label class="setting vc-image-filter-setting">',e+='<span class="name">'+h+"</span>",e+=i[0].outerHTML,e+="</label>",b.before(e),i.parents("tr").remove()),"undefined"!=typeof window.vc_selectedFilters&&"undefined"!=typeof window.vc_selectedFilters[c]&&(g=a(".media-frame:visible [data-vc-preview-image-filter="+c+"]"),g.length&&g.val(window.vc_selectedFilters[c]).change()),d(c)}),this},g.editor.send.attachment=function(a,b){function d(b){var c=b.slice(0).pop().attributes;i(a,c).done(function(a){e(a,c.id)})}function e(a,b){f&&f[0]!==b?setTimeout(function(){e(a,b)},50):(f.shift(),g.editor.insert(a))}f.push(b.id),c([b.id],d)},g.featuredImage.set=function(b){var c=[b];-1!==b?a.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:c,_vcnonce:window.vcAdminNonce}}).done(function(a){var c;!0===a.success&&a.data.ids.length?(c=a.data.ids.pop(),h(c)):h(b)}).fail(function(){h(b)}):h(b)},g.controller.VcSingleImage=g.controller.FeaturedImage.extend({defaults:b.defaults({id:"vc_single-image",filterable:"uploaded",multiple:!1,toolbar:"vc_single-image",title:j.set_image,priority:60,syncSelection:!1},g.controller.Library.prototype.defaults),updateSelection:function(){var a,c=this.get("selection"),d=g.vc_editor.getData();this.get("library"),"undefined"!=typeof d&&""!==d&&-1!==d&&(a=b.map(d.toString().split(/,/),function(a){var b=g.model.Attachment.get(a);return b.fetch(),b})),c.reset(a)}}),g.controller.VcGallery=g.controller.VcSingleImage.extend({defaults:b.defaults({id:"vc_gallery",title:j.add_images,toolbar:"main-insert",filterable:"uploaded",library:g.query({type:"image"}),multiple:"add",editable:!0,priority:60,syncSelection:!1},g.controller.Library.prototype.defaults)}),g.VcSingleImage={getData:function(){return this.$hidden_ids.val()},set:function(b){var c=vc.template(a("#vc_settings-image-block").html(),vc.templateOptions.custom);return this.$img_ul.html(c(b)),this.$clear_button.show(),this.$hidden_ids.val(b.id).trigger("change"),!1},frame:function(b){return window.vc_selectedFilters={},this.element=b,this.$button=a(this.element),this.$block=this.$button.closest(".edit_form_line"),this.$hidden_ids=this.$block.find(".gallery_widget_attached_images_ids"),this.$img_ul=this.$block.find(".gallery_widget_attached_images_list"),this.$clear_button=this.$img_ul.next(),this._frame?this._frame:(this._frame=g({state:"vc_single-image",states:[new g.controller.VcSingleImage]}),this._frame.on("toolbar:create:vc_single-image",function(a){this.createSelectToolbar(a,{text:j.set_image,close:!1})},this._frame),this._frame.state("vc_single-image").on("select",this.select),this._frame)},select:function(){var a=this.get("selection");vc.events.trigger("click:media_editor:add_image",a,"single")}},g.view.MediaFrame.VcGallery=g.view.MediaFrame.Post.extend({createStates:function(){this.states.add([new g.controller.VcGallery])},bindHandlers:function(){g.view.MediaFrame.Select.prototype.bindHandlers.apply(this,arguments),this.on("toolbar:create:main-insert",this.createToolbar,this);var a={content:{embed:"embedContent","edit-selection":"editSelectionContent"},toolbar:{"main-insert":"mainInsertToolbar"}};b.each(a,function(a,c){b.each(a,function(a,b){this.on(c+":render:"+b,this[a],this)},this)},this)},mainInsertToolbar:function(a){var b=this;this.selectionStatusToolbar(a),a.set("insert",{style:"primary",priority:80,text:j.add_images,requires:{selection:!0},click:function(){var a=b.state(),c=a.get("selection");vc.events.trigger("click:media_editor:add_image",c,"gallery"),a.trigger("insert",c).reset()}})}}),g.vc_editor=b.clone(g.editor),b.extend(g.vc_editor,{$vc_editor_element:null,getData:function(){var a=g.vc_editor.$vc_editor_element,b=a.closest(".edit_form_line"),c=b.find(".gallery_widget_attached_images_ids");return c.val()},insert:function(c){var d=g.vc_editor.$vc_editor_element,e=d.closest(".edit_form_line"),f=e.find(".gallery_widget_attached_images_ids"),h=e.find(".gallery_widget_attached_images_list"),i="",j=vc.template(a("#vc_settings-image-block").html(),vc.templateOptions.custom);b.each(c,function(a){i+=j(a)}),f.val(b.map(c,function(a){return a.id}).join(",")).trigger("change"),h.html(i)},open:function(a){var b;return a=this.id(a),b=this.get(a),b||(b=this.add(a)),window.vc_selectedFilters={},b.open()},add:function(a,c){var d=this.get(a);return d?d:k[a]?k[a]:d=k[a]=new g.view.MediaFrame.VcGallery(b.defaults(c||{},{state:"vc_gallery",title:j.add_images,library:{type:"image"},multiple:!0}))},init:function(){a("body").unbind("click.vcGalleryWidget").on("click.vcGalleryWidget",".gallery_widget_add_images",function(b){b.preventDefault();var c=a(this),d="visual-composer";return g.vc_editor.$vc_editor_element=a(this),"true"===c.attr("use-single")?void g.VcSingleImage.frame(this).open("vc_editor"):(c.blur(),void g.vc_editor.open(d))})}}),b.bindAll(g.vc_editor,"open"),a(document).ready(function(){g.vc_editor.init()}),vc.events.on("click:media_editor:add_image",function(d,e){function f(c){var f,h;switch(f=b.map(c,function(a){return a.attributes}),d.reset(f),h=b.map(d.models,function(a){return a.attributes}),"undefined"==typeof e&&(e=""),e){case"gallery":g.vc_editor.insert(h);break;case"single":g.VcSingleImage.set(h[0])}a(".media-modal").removeClass("processing-media"),a(".media-modal-close").click()}a(".media-modal").addClass("processing-media"),c(b.extend({},d),f)}),a("body").on("change","[data-vc-preview-image-filter]",function(){var b;b=a(this).data("vcPreviewImageFilter"),"undefined"==typeof window.vc_selectedFilters&&(window.vc_selectedFilters={}),window.vc_selectedFilters[b]=a(this).val(),d(b)})}(window.jQuery,window._);var vcPointerMessage;!function(a){"use strict";vcPointerMessage=function(a,b,c){this.target=a,this.$pointer=null,this.texts=c,this.pointerOptions=b,this.init()},vcPointerMessage.prototype={init:function(){_.bindAll(this,"openedEvent","reposition")},show:function(){this.$pointer=a(this.target),this.$pointer.data("vcPointerMessage",this),this.pointerOptions.opened=this.openedEvent,this.$pointer.addClass("vc-with-vc-pointer").pointer(this.pointerOptions).pointer("open"),a(window).on("resize.vcPointer",this.reposition)},domButtonsWrapper:function(){return a('<div class="vc_wp-pointer-controls" />')},domCloseBtn:function(){return a('<a class="vc_pointer-close close">'+this.texts.finish+"</a>")},domNextBtn:function(){return a('<button class="button button-primary button-large vc_wp-pointers-next">'+this.texts.next+'<i class="vc_pointer-icon"></i></button>')},domPrevBtn:function(){return a('<button class="button button-primary button-large vc_wp-pointers-prev"><i class="vc_pointer-icon"></i>'+this.texts.prev+"</button> ")},openedEvent:function(b,c){var d=c.pointer.offset();d&&d.top&&a("body").scrollTop(80<d.top?d.top-80:0)},reposition:function(){this.$pointer.pointer("reposition")},close:function(){this.$pointer&&this.$pointer.removeClass("vc-with-vc-pointer").pointer("close"),a(window).off("resize.vcPointer")}}}(window.jQuery);var vcPointersController;!function(a){"use strict";vcPointersController=function(a,b){this.pointers=a&&a.messages||[],this._texts=b,this.pointerId=a&&a.pointer_id?a.pointer_id:"",this.pointerData={},this._index=0,this.messagesDismissed=!1,this.init()},vcPointersController.prototype={init:function(){_.bindAll(this,"show","clickEventClose","clickEventNext","clickEventPrev","buttonsEvent"),this.build()},getPointer:function(a){return this.pointerData=this.pointers[a]&&this.pointers[a].target?this.pointers[a]:null,this.pointerData&&this.pointerData.options?new vcPointerMessage(this.pointerData.target,this.buildOptions(this.pointerData.options),this._texts):null},buildOptions:function(a){return a.buttonsEvent&&_.isFunction(window[a.buttonsEvent])?a.buttons=_.bind(window[a.buttonsEvent],this):a.buttons=this.buttonsEvent,a.vcPointerController=this,a},build:function(){return this.pointer=this.getPointer(this._index),vc.events.once("backendEditor.close",this.close,this),!!this.pointer&&void this.setShowEventHandler()},show:function(){this.pointer.show(),this.setCloseEventHandler(),vc.events.trigger("vcPointer:show")},setShowEventHandler:function(){var b;this.pointerData.showCallback&&window[this.pointerData.showCallback]?window[this.pointerData.showCallback].call(this):this.pointerData.showEvent?this.pointerData.showEvent.match(/\s/)?(b=this.pointerData.closeEvent.split(/\s+(.+)?/),1<b.length&&a(b[1]).one(b[0],this.show)):vc.events.once(this.pointerData.showEvent,this.show):this.show()},setCloseEventHandler:function(){var b;this.pointerData.closeCallback&&window[this.pointerData.closeCallback]?window[this.pointerData.closeCallback].call(this):this.pointerData.closeEvent?this.pointerData.closeEvent.match(/\s/)?(b=this.pointerData.closeEvent.split(/\s+(.+)?/),a(b[1]||this.$pointer).one(b[1]&&b[0]?b[0]:"click",this.clickEventNext)):vc.events.once(this.pointerData.closeEvent,this.nextOnEvent,this):this.pointer.$pointer&&0<this.pointer.$pointer.length&&a(this.pointer.$pointer).one("click",this.clickEventNext)},nextOnEvent:function(){this.close(),this.next()},next:function(){this._index++,this.build()},prev:function(){this._index--,this.build()},close:function(){this.pointer&&(this.pointer.close(),this.pointerData=null,this.pointer=null,vc.events.trigger("vcPointer:close",this))},buttonsEvent:function(){var a,b,c,d;return a=this.pointer.domCloseBtn(),b=this.pointer.domNextBtn(),c=this.pointer.domPrevBtn(),a.bind("click.vcPointer",this.clickEventClose),d=this.pointer.domButtonsWrapper().append(a),0<this._index&&(c.bind("click.vcPointer",this.clickEventPrev),d.addClass("vc_wp-pointer-controls-prev").append(c)),this._index+1<this.pointers.length&&(b.bind("click.vcPointer",this.clickEventNext),d.addClass("vc_wp-pointer-controls-next").append(b)),d},clickEventClose:function(){this.close(),this.dismissMessages()},clickEventNext:function(){this.close(),this.next()},clickEventPrev:function(){this.close(),this.prev()},dismissMessages:function(){return!this.messagesDismissed&&(a.post(window.ajaxurl,{pointer:this.pointerId,action:"dismiss-wp-pointer"}),void(this.messagesDismissed=!0))}}}(window.jQuery),function(a){"use strict";vc.events.on("app.render",function(){window.vcPointer&&window.vcPointer.pointers&&window.vcPointer.pointers.length&&_.each(vcPointer.pointers,function(a){new vcPointersController(a,vcPointer.texts)},this)}),vc.events.on("vcPointer:show",function(){vc.app.disableFixedNav=!0}),vc.events.on("vcPointer:close",function(){vc.app.disableFixedNav=!1}),window.vcPointersEditorsTourEvents=function(){var a;return a=this.pointer.domCloseBtn(),a.bind("click.vcPointer",this.clickEventClose),this.dismissMessages(),a},window.vcPointersShowOnContentElementControls=function(){this.pointer&&a(this.pointer.target).length?(a(this.pointer.target).parent().addClass("vc-with-vc-pointer-controls"),this.show(),a("#wpb_visual_composer").one("click",function(){a(".vc-with-vc-pointer-controls").removeClass("vc-with-vc-pointer-controls")})):vc.events.once("shortcodes:add",vcPointersShowOnContentElementControls,this)},window.vcPointersSetInIFrame=function(){this.pointerData&&vc.frame_window.jQuery(this.pointerData.target).length?(this.pointer=new vc.frame_window.vcPointerMessage(this.pointerData.target,this.buildOptions(this.pointerData.options),this._texts),this.show(),this.pointer.$pointer.closest(".vc_controls").addClass("vc-with-vc-pointer-controls")):vc.events.once("shortcodeView:ready",vcPointersSetInIFrame,this)},window.vcPointersCloseInIFrame=function(){
var a,b;a=this,b=vc.frame_window.jQuery,b("body").one("click",function(){b(".vc-with-vc-pointer-controls").removeClass("vc-with-vc-pointer-controls"),a.nextOnEvent()})}}(window.jQuery);