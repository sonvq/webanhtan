"use strict";window.bt_rc={};window.bt_rc.cache={};window.bt_rc.min_width=125;window.bt_rc.padding=10;window.bt_rc_drag_opacity=.3;window.bt_rc_state=[];window.bt_rc_state_pointer=-1;window.bt_rc_state_current=null;(function(t){var e=React.createClass({displayName:"BTRCElement",render:function(){var a="";var _="bt_rc_wrap";var i="bt_rc_item";if(this.props.data.has_alert!==undefined){i=i+" bt_rc_item_alert"}if(this.props.data.extra_class!==undefined){i=i+" "+this.props.data.extra_class}if(window.bt_rc_map[this.props.data.base]!==undefined){if(window.bt_rc_map[this.props.data.base].container!==undefined){if(window.bt_rc_map[this.props.data.base].container=="horizontal"){a="bt_rc_is_horizontal bt_rc_horizontal"}}if(window.bt_rc_map[this.props.data.base].width_param!==undefined){if(this.props.data.attr!==undefined){var n=JSON.parse(this.props.data.attr);var c=n[window.bt_rc_map[this.props.data.base].width_param];if(c!==undefined){c=c.split("/");c=Math.round(12*c[0]/c[1]);_=_+" "+"bt_rc_is_width bt_rc_width bt_rc_width"+c}}}}var o=this.props.data.key;var s=this.props.data.base;var d=this.props.data.children.map(function(t,a){if(t.key===undefined){t.key="bt_rc_"+bt_rc_get_key()}return React.createElement(e,{key:t.key,data:t,p_key:o,p_base:s})});this.props.data["p_key"]=this.props.p_key;this.props.data["p_base"]=this.props.p_base;if(this.props.data.base=="_content"){return React.createElement("div",{className:_},React.createElement("div",{className:i,"data-base":this.props.data.base},React.createElement("div",{className:"bt_rc_toolbar"},"]...[",React.createElement(r,{has_params:"true"})),React.createElement("div",{className:"bt_rc_content",dangerouslySetInnerHTML:{__html:window.switchEditors.wpautop(this.props.data.content)}})))}else{var l=window.bt_rc_map[this.props.data.base]!==undefined&&window.bt_rc_map[this.props.data.base].params!==undefined&&window.bt_rc_map[this.props.data.base].params.length>0?"true":"false";var b="";var p=[];if(l=="true"){var w=bt_rc_get_param(this.props.data.base,"params");for(var m=0;m<w.length;m++){if(w[m].preview!==undefined||w[m].holder!==undefined&&w[m].holder!=""){var f="";if(this.props.data.attr!==undefined){var n=JSON.parse(this.props.data.attr)}if(this.props.data.attr!==undefined&&n[w[m].param_name]!==undefined){f=n[w[m].param_name]}else{if(typeof w[m].value=="object"){var u=Object.keys(w[m].value);f=w[m].value[u[0]]}else if(w[m].value!==undefined){f=w[m].value}}if(w[m].type=="attach_image"){if(f!=""){var h=Date.now();var v=f;if(window.bt_rc.cache[v]!==undefined){f='<span style="background-image:url('+window.bt_rc.cache[v].url+')" class="bt_rc_preview_image bt_rc_preview_image_'+h+'" title="'+f+'"></span>'}else{f='<span class="bt_rc_preview_image bt_rc_preview_image_'+h+'" title="'+f+'"></span>';wp.media.ajax({data:{action:"get-attachment",id:v}}).done(function(e,a,_){if(e.sizes!==undefined){var r="";if(e.sizes.thumbnail!==undefined){r=e.sizes.thumbnail.url}else if(e.sizes.full!==undefined){if(e.sizes.full.width<=300&&e.sizes.full.height<=300){r=e.sizes.full.url}}if(r!=""){t(".bt_rc_preview_image_"+h).css("background-image","url("+r+")");window.bt_rc.cache[v]={};window.bt_rc.cache[v].url=r}}})}}}else if(w[m].type=="iconpicker"){if(typeof f=="string"&&f!=""&&f!="no_icon"){var g=f;if(g.length==4&&g.startsWith("f")){g="fa_"+g}var y=g.substr(0,2);var k=g.substr(3);f='<span class="bt_rc_icon_preview bt_rc_icon_preview_'+y+'" data-icon-code="&#x'+k+'"></span>'}else{f=""}}else if(w[m].type=="colorpicker"){if(f!=""){f='<span style="background-color:'+f+';" class="bt_rc_color_preview" title="'+f+'"></span>'}}else if(w[m].type=="textarea_object"){try{f=atob(f)}catch(t){}}f=f.replace(/``/gim,'"');if(f!=""){p.push(f)}}}if(p.length>0){b=p.join(" / ");if(b!=""){b=" / "+b}}}var x=window.bt_rc_map[this.props.data.base]!==undefined&&window.bt_rc_map[this.props.data.base].toggle==true>0?"true":"false";var N=this.props.data.base;if(window.bt_rc_map[this.props.data.base]!==undefined&&window.bt_rc_map[this.props.data.base].name!==undefined&&window.bt_rc_settings.tag_as_name!="1"){N=window.bt_rc_map[this.props.data.base].name}if(window.bt_rc_map[this.props.data.base]!==undefined&&window.bt_rc_map[this.props.data.base].container!==undefined){var E=window.bt_rc_map[this.props.data.base].container;return React.createElement("div",{className:_},React.createElement("div",{className:i,"data-base":this.props.data.base,"data-container":E},React.createElement("div",{className:"bt_rc_toolbar"},N,React.createElement("span",{className:"bt_rc_preview",dangerouslySetInnerHTML:{__html:b}}),React.createElement(r,{container:E,mapped:"true",has_params:l,toggle:x})),React.createElement("div",{className:a},d)))}else{var C=window.bt_rc_map[this.props.data.base];var R="bt_rc_toolbar";var S="true";if(C==undefined||C.is_mapped===false){S="false";window.bt_rc_map[this.props.data.base]={};window.bt_rc_map[this.props.data.base].is_mapped=false;window.bt_rc_map[this.props.data.base].show_settings_on_create=false;window.bt_rc_map[this.props.data.base].base=this.props.data.base;window.bt_rc_map[this.props.data.base].description=this.props.data.base;window.bt_rc_map[this.props.data.base].name=this.props.data.base;window.bt_rc_map[this.props.data.base].params=[];R="bt_rc_toolbar bt_rc_alert"}return React.createElement("div",{className:_},React.createElement("div",{className:i,"data-base":this.props.data.base},React.createElement("div",{className:R},N,b!=""?React.createElement("span",{className:"bt_rc_preview",dangerouslySetInnerHTML:{__html:b}}):"",React.createElement(r,{has_params:l,toggle:x,mapped:S})),React.createElement("div",{className:a},d)))}}}});var a=React.createClass({displayName:"BTRCElementList",getInitialState:function(){return{data:this.props.data}},render:function(){var t=this.state.data.children.map(function(t,a){return React.createElement(e,{key:t.key,data:t})});return React.createElement("div",{className:"bt_rc_item_list"},t)},componentDidMount:function(){this.getDOMNode().addEventListener("bt_rc_event",this.handle);window.bt_rc_state_current=this.state.data},componentDidUpdate:function(){var e=0;var a=t(".bt_rc_item_list").children(".bt_rc_wrap").each(function(){e++;var a=t(this).find(".bt_rc_toolbar span").first().data("title");if(a===undefined){a=t(this).find(".bt_rc_toolbar span").first().html();t(this).find(".bt_rc_toolbar span").first().data("title",a)}t(this).find(".bt_rc_toolbar span").first().html(e+". "+a)})},componentWillUnmount:function(){this.getDOMNode().removeEventListener("bt_rc_event",this.handle)},handle:function(t){window.bt_rc_callback_action=null;if(window.bt_rc_action=="move_up"){var e=bt_rc_get_obj_copy_by_id(this.state.data,window.bt_rc_from);bt_rc_insert_before(this.state.data,window.bt_rc_to,e);if(!window.bt_rc_ctrl){bt_rc_delete_obj(this.state.data,window.bt_rc_from)}}else if(window.bt_rc_action=="move_down"){var e=bt_rc_get_obj_copy_by_id(this.state.data,window.bt_rc_from);bt_rc_insert_after(this.state.data,window.bt_rc_to,e);if(!window.bt_rc_ctrl){bt_rc_delete_obj(this.state.data,window.bt_rc_from)}}else if(window.bt_rc_action=="move_inside"){if(bt_rc_insert_inside(this.state.data,window.bt_rc_to,bt_rc_get_obj_copy_by_id(this.state.data,window.bt_rc_from))){if(!window.bt_rc_ctrl){bt_rc_delete_obj(this.state.data,window.bt_rc_from)}}}else if(window.bt_rc_action=="delete"){bt_rc_delete_obj(this.state.data,window.bt_rc_from)}else if(window.bt_rc_action=="add_root"||window.bt_rc_action=="add_root_from_dialog"){if(window.bt_rc_action=="add_root"){var a=bt_rc_add_root(this.state.data);if(a!==undefined&&window.bt_rc_map[a[1]]["auto_add"]!==undefined){var _={};_.title=window.bt_rc_map[a[1]]["auto_add"];_.base=window.bt_rc_map[a[1]]["auto_add"];_.key=bt_rc_get_key();_.children=[];bt_rc_insert_inside(this.state.data,a[0],_)}}else{var a=bt_rc_add_root(this.state.data,window.bt_rc_base)}if(a!==undefined&&bt_rc_get_param(a[1],"show_settings_on_create")!==false){window.bt_rc_from=a[0];window.bt_rc_callback_action="edit"}}else if(window.bt_rc_action=="add"||window.bt_rc_action=="add_from_dialog"){if(window.bt_rc_action=="add"){var a=bt_rc_add(this.state.data)}else{var a=bt_rc_add(this.state.data,window.bt_rc_base)}if(a!==undefined&&bt_rc_get_param(a[1],"show_settings_on_create")!==false){window.bt_rc_from=a[0];window.bt_rc_callback_action="edit"}else if(a!==undefined&&bt_rc_get_param(a[1],"show_settings_on_create")!==true){var r=bt_rc_get_param(a[1],"accept");var i,n=0;for(i in r){if(r.hasOwnProperty(i)){n++}}if(r!==undefined&&r._content===true&&n==1){window.bt_rc_from=a[0];window.bt_rc_base=a[1];window.bt_rc_callback_action="add"}}}else if(window.bt_rc_action=="add_horizontal"){bt_rc_add_horizontal(this.state.data)}else if(window.bt_rc_action=="edit"){bt_rc_edit(this.state.data,window.bt_rc_from)}else if(window.bt_rc_action=="clone"){bt_rc_clone(this.state.data,window.bt_rc_from)}else if(window.bt_rc_action=="update_state"){this.replaceState({data:window.bt_rc_state_current},window.bt_rc_state_callback)}else if(window.bt_rc_action=="copy"){bt_rc_copy(this.state.data,window.bt_rc_from)}else if(window.bt_rc_action=="copy_plus"){bt_rc_copy_plus(this.state.data,window.bt_rc_from)}else if(window.bt_rc_action=="paste"){bt_rc_paste(this.state.data,window.bt_rc_from)}if(window.bt_rc_action!=null&&window.bt_rc_action!="edit"&&window.bt_rc_action!="copy"&&window.bt_rc_action!="copy_plus"){bt_rc_resize_h(this.state.data);if(window.bt_rc_action!="update_state"){bt_rc_push_state(this.state.data);this.replaceState({data:this.state.data},window.bt_rc_state_callback)}if(this.state.data.children.length>=0&&window.bt_rc_action=="update_wp_editor"){bt_rc_parse_data(this.state.data)}bt_rc_item_mousedown();bt_rc_toolbar()}}});var r=React.createClass({displayName:"BTRCToolbar",render:function(){var t=window.bt_rc_text.add;if(this.props.container=="horizontal"){t=window.bt_rc_text.add+" / "+window.bt_rc_text.select_layout}if(window.bt_rc_settings.toolbar_style=="shortcuts"){return React.createElement("div",{className:"bt_rc_toolbar_tools"},this.props.toggle=="true"?React.createElement("span",{className:"bt_rc_toggle_button",title:window.bt_rc_text.toggle},"T"):"",this.props.container=="vertical"||this.props.container=="horizontal"?React.createElement("span",{className:"bt_rc_add",title:t},"A"):"",this.props.has_params=="true"?React.createElement("span",{className:"bt_rc_edit",title:window.bt_rc_text.edit},"E"):"",React.createElement("span",{className:"bt_rc_clone",title:window.bt_rc_text.duplicate},"D"),this.props.mapped=="true"?React.createElement("span",{className:"bt_rc_copy",title:window.bt_rc_text.copy},"C"):"",this.props.mapped=="true"?React.createElement("span",{className:"bt_rc_copy_plus",title:window.bt_rc_text.copy_plus},"F"):"",this.props.mapped=="true"?React.createElement("span",{className:"bt_rc_paste",title:window.bt_rc_text.paste},"V"):"",React.createElement("span",{className:"bt_rc_delete",title:window.bt_rc_text.delete},"X"))}else{return React.createElement("div",{className:"bt_rc_toolbar_tools bt_rc_toolbar_tools_icons"},this.props.toggle=="true"?React.createElement("span",{className:"bt_rc_toggle_button",title:window.bt_rc_text.toggle},React.createElement("i",{className:"fa fa-compress","aria-hidden":"true"})):"",this.props.container=="vertical"||this.props.container=="horizontal"?React.createElement("span",{className:"bt_rc_add",title:t},React.createElement("i",{className:"fa fa-plus-square","aria-hidden":"true"})):"",this.props.has_params=="true"?React.createElement("span",{className:"bt_rc_edit",title:window.bt_rc_text.edit},React.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"})):"",React.createElement("span",{className:"bt_rc_clone",title:window.bt_rc_text.duplicate},React.createElement("i",{className:"fa fa-rc fa-rc-duplicate","aria-hidden":"true"})),this.props.mapped=="true"?React.createElement("span",{className:"bt_rc_copy",title:window.bt_rc_text.copy},React.createElement("i",{className:"fa fa-rc fa-rc-copy","aria-hidden":"true"})):"",this.props.mapped=="true"?React.createElement("span",{className:"bt_rc_copy_plus",title:window.bt_rc_text.copy_plus},React.createElement("i",{className:"fa fa-rc fa-rc-copy-plus","aria-hidden":"true"})):"",this.props.mapped=="true"?React.createElement("span",{className:"bt_rc_paste",title:window.bt_rc_text.paste},React.createElement("i",{className:"fa fa-paste","aria-hidden":"true"})):"",React.createElement("span",{className:"bt_rc_delete",title:window.bt_rc_text.delete},React.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"})))}}});window.bt_rc_parse_data=function(t){window.bt_rc_parse_data_str="";if(t.children.length>0){bt_rc_parse_data_helper(t);window.switchEditors.go("content","tmce");tinyMCE.get("content").setContent(window.switchEditors.wpautop(window.bt_rc_parse_data_str))}};window.bt_rc_parse_data_helper=function(t){if(t.title=="_root"){t=t.children}for(var e=0;e<t.length;e++){var a=false;if(t[e].title=="_content"){a=true}if(!a){window.bt_rc_parse_data_str+="["+t[e].title;if(t[e].attr!==undefined){var _=attr_to_arr(t[e].attr);for(var r=0;r<_.length;r++){window.bt_rc_parse_data_str+=" "+_[r][0]+'="'+_[r][1]+'"'}}window.bt_rc_parse_data_str+="]"}else{window.bt_rc_parse_data_str+=t[e].content}if(t[e].children!==undefined){bt_rc_parse_data_helper(t[e].children)}if(!a){window.bt_rc_parse_data_str+="[/"+t[e].title+"]"}}};window.attr_to_arr=function(t){var e=JSON.parse(t);var a=[];for(var _ in e){a.push([_,e[_]])}return a};window.attr_to_obj=function(t){var e=JSON.parse(t);return e};window.bt_rc_resize_h=function(t){if(t.title=="_root"){t=t.children}for(var e=0;e<t.length;e++){if(window.bt_rc_map[t[e].title]!==undefined){if(window.bt_rc_map[t[e].title].container=="horizontal"){if(t[e].children!==undefined){var a=false;var _=false;var r=[];var i=[];for(var n=0;n<t[e].children.length;n++){if(window.bt_rc_map[t[e].children[n].title]!==undefined&&window.bt_rc_map[t[e].children[n].title].width_param!==undefined){var c=window.bt_rc_map[t[e].children[n].title].width_param;if(t[e].children[n].attr===undefined){t[e].children[n].attr="{}"}var o=attr_to_obj(t[e].children[n].attr);if(!o.hasOwnProperty(c)){o[c]="1/12"}var s=o[c].split("/");r.push(parseInt(s[0]));i.push(parseInt(s[1]))}else{a=true;break}}var d=0;for(var l=0;l<r.length;l++){var b=12*r[l]/i[l];if(b!=Math.floor(b)){_=true;break}d=d+b}if(!a&&(d!=12||_)){for(var n=0;n<t[e].children.length;n++){var c=window.bt_rc_map[t[e].children[n].title].width_param;var o=attr_to_obj(t[e].children[n].attr);o[c]="1/"+t[e].children.length;r[n]=1;i[n]=t[e].children.length;t[e].children[n].attr=JSON.stringify(o)}}_=false;for(var l=0;l<r.length;l++){var b=12*r[l]/i[l];if(b!=Math.floor(b)){_=true;break}}if(_){t[e].has_alert="bt_rc_item_alert"}else{t[e].has_alert=undefined}}}}if(t[e].children!==undefined){bt_rc_resize_h(t[e].children)}}};window.bt_rc_get_obj_copy_by_id=function(t,e){var a=bt_rc_get_obj_by_id(t,e);var _=JSON.parse(JSON.stringify(a));if(_!=null){_=bt_rc_set_new_keys(_)}return _};window.bt_rc_set_new_keys=function(t){t.key=bt_rc_get_key();for(var e=0;e<t.children.length;e++){bt_rc_set_new_keys(t.children[e])}return t};window.bt_rc_delete_obj=function(t,e,a){if(t.title!="_content"){for(var _=0;_<t.children.length;_++){if(e.bt_ends_with(t.children[_].key)){if(a!==undefined){t.children.splice(_,a)}else{t.children.splice(_,1)}break}bt_rc_delete_obj(t.children[_],e,a)}}};window.bt_rc_insert_before=function(t,e,a){if(t.title!="_content"){for(var _=0;_<t.children.length;_++){if(e.bt_ends_with(t.children[_].key)){t.children.splice(_,0,a);break}bt_rc_insert_before(t.children[_],e,a)}}};window.bt_rc_insert_after=function(t,e,a){if(t.title!="_content"){for(var _=0;_<t.children.length;_++){if(e.bt_ends_with(t.children[_].key)){t.children.splice(_+1,0,a);break}bt_rc_insert_after(t.children[_],e,a)}}};window.bt_rc_insert_inside=function(t,e,a){if(t.title!="_content"){for(var _=0;_<t.children.length;_++){if(e.bt_ends_with(t.children[_].key)){if(t.children[_].children!==undefined){t.children[_].children.push(a);if(window.bt_rc_map[a.base]!==undefined&&window.bt_rc_map[a.base]["auto_add"]!==undefined){var r={};r.title=window.bt_rc_map[a.base]["auto_add"];r.base=window.bt_rc_map[a.base]["auto_add"];r.key=bt_rc_get_key();r.children=[];a.children.push(r)}return true}}var i=bt_rc_insert_inside(t.children[_],e,a);if(i===true){return true}}}};window.bt_rc_add_root=function(e,a){var _=[];if(a!==undefined){_.push(a)}else{t.each(window.bt_rc_map,function(t,e){if(e.root==true){_.push(e.base)}})}if(_.length==1){var r={};r.title=_[0];r.base=_[0];r.key=bt_rc_get_key();r.children=[];e.children.push(r);return[r.key,r.base]}else if(_.length>1){window.bt_rc_dialog.show("add_root")}};window.bt_rc_add=function(e,a){var _=[];if(a!==undefined){_.push(a)}else{t.each(window.bt_rc_map,function(t,e){var a;if(window.bt_rc_map[window.bt_rc_base].accept!==undefined){a=window.bt_rc_map[window.bt_rc_base].accept[e.base]}if(a===true||window.bt_rc_map[window.bt_rc_base].accept_all===true&&a!==false){_.push(e.base)}});if(window.bt_rc_map[window.bt_rc_base].accept!==undefined&&window.bt_rc_map[window.bt_rc_base].accept["_content"]===true){_=[];_.push("_content")}}if(_.length==1){var r={};r.title=_[0];r.base=_[0];if(r.base=="_content"){r.content=""}r.key=bt_rc_get_key();r.children=[];bt_rc_insert_inside(e,window.bt_rc_from,r);return[r.key,r.base]}else if(_.length>1){window.bt_rc_dialog.show("add")}};window.bt_rc_add_horizontal=function(t,e){if(e!==undefined){var a=false;e=e.replace(/\s/gm,"").replace(/<\/?[^>]+(>|$)/gm,"");if(e==""){a=true}else{var _=e.split("+");if(_.length>12){a=true}else{var r=0;var i=[];var n=[];for(var c=0;c<_.length;c++){var o=_[c].split("/");if(o.length!=2){a=true;break}var s=parseInt(o[0]);i.push(s);var d=parseInt(o[1]);n.push(d);if(s<1||s>12||d<1||d>12){a=true;break}}if(!a){for(var l=0;l<i.length;l++){var b=12*i[l]/n[l];if(b!=Math.floor(b)){a=true;break}r=r+b}if(r!=12){a=true}}}}if(a){alert(window.bt_rc_text.layout_error);return}var p=window.bt_rc_from;for(var c=0;c<t.children.length;c++){if(p.bt_ends_with(t.children[c].key)){var w=t.children[c].children.length;if(w>0){if(_.length>=w){for(var l=0;l<w;l++){for(var m in window.bt_rc_map[window.bt_rc_base].accept){}var f=window.bt_rc_map[m].width_param;var u=attr_to_obj(t.children[c].children[l].attr);u[f]=_[l];t.children[c].children[l].attr=JSON.stringify(u)}for(var l=w;l<_.length;l++){var h={};for(var m in window.bt_rc_map[window.bt_rc_base].accept){}h.title=m;h.base=m;h.key=bt_rc_get_key();h.children=[];var f=window.bt_rc_map[m].width_param;h.attr='{"'+f+'":'+bt_json_encode(_[l])+"}";bt_rc_insert_inside(t,window.bt_rc_from,h)}}else{for(var l=0;l<_.length;l++){for(var m in window.bt_rc_map[window.bt_rc_base].accept){}var f=window.bt_rc_map[m].width_param;var u=attr_to_obj(t.children[c].children[l].attr);u[f]=_[l];t.children[c].children[l].attr=JSON.stringify(u)}bt_rc_delete_obj(t,t.children[c].children[_.length].key,w-_.length)}}else{for(var l=0;l<_.length;l++){var h={};for(var m in window.bt_rc_map[window.bt_rc_base].accept){}h.title=m;h.base=m;h.key=bt_rc_get_key();h.children=[];var f=window.bt_rc_map[m].width_param;h.attr='{"'+f+'":'+bt_json_encode(_[l])+"}";bt_rc_insert_inside(t,window.bt_rc_from,h)}}window.bt_rc_action="refresh";bt_rc_dispatch(".bt_rc_item_list","bt_rc_event");return true}var v=bt_rc_add_horizontal(t.children[c],e);if(v===true){return true}}}else{window.bt_rc_dialog.show("add_horizontal")}};window.bt_rc_edit=function(t,e){for(var a=0;a<t.children.length;a++){if(e.bt_ends_with(t.children[a].key)){if(t.children[a].title=="_content"){window.bt_rc_content=t.children[a].content;window.bt_rc_dialog.show("edit_content")}else{window.bt_rc_dialog.show("edit")}break}bt_rc_edit(t.children[a],e)}};window.bt_rc_clone=function(t,e){for(var a=0;a<t.children.length;a++){if(e.bt_ends_with(t.children[a].key)){if(t.title=="_root"||window.bt_rc_map[t.base]===undefined||window.bt_rc_map[t.base].container!="horizontal"||window.bt_rc_map[t.base].container=="horizontal"&&t.children.length<12){var _=bt_rc_get_obj_copy_by_id(t,e);t.children.splice(a+1,0,_)}break}bt_rc_clone(t.children[a],e)}};window.bt_rc_init_number_items=function(){window.bt_rc_cb_items=localStorage.getItem("bt_rc_cb_items");if(window.bt_rc_cb_items===null)window.bt_rc_cb_items=0;t(".bt_rc_cb_items").html(window.bt_rc_cb_items)};window.bt_rc_set_number_items=function(e){localStorage.setItem("bt_rc_cb_items",e);t(".bt_rc_cb_items").html(e);window.bt_rc_cb_items=e};window.bt_rc_allowed=function(t,e){if(e===undefined)return false;var a=window.bt_rc_map[e];var _=false;if(a.accept[t]===true||a.accept[t]===undefined&&a.accept_all===true||a.accept===undefined&&a.accept_all===true){_=true}return _};window.bt_rc_cb_import=function(t){var e=decodeURIComponent(window.atob(t));var a=JSON.parse(e);for(var _=1;_<=a.length;_++){localStorage.setItem("bt_rc_cb_"+_,decodeURIComponent(window.atob(a[_-1].bt_rc_cb)));bt_rc_set_number_items(a.length)}};window.bt_rc_copy=function(t,e){if(window.bt_rc_cb_items>1){for(var a=2;a<=window.bt_rc_cb_items;a++){localStorage.removeItem("bt_rc_cb_"+a)}}var t=bt_rc_get_obj_by_id(t,e);localStorage.setItem("bt_rc_cb_1",JSON.stringify(t));bt_rc_set_number_items(1)};window.bt_rc_copy_plus=function(t,e){var a=bt_rc_get_obj_by_id(t,e);if(window.bt_rc_cb_items==0){localStorage.setItem("bt_rc_cb_1",JSON.stringify(a));bt_rc_set_number_items(1)}else{var _=JSON.parse(localStorage.getItem("bt_rc_cb_1"));var r=false;if(a.p_base!==undefined){r=bt_rc_allowed(_.base,a.p_base)}else if(window.bt_rc_map[a.base].root!==undefined&&window.bt_rc_map[_.base].root!==undefined){r=true}if(r){window.bt_rc_cb_items++;localStorage.setItem("bt_rc_cb_"+window.bt_rc_cb_items,JSON.stringify(a));bt_rc_set_number_items(window.bt_rc_cb_items)}else{alert(window.bt_rc_text.not_allowed)}}};window.bt_rc_paste=function(t,e){if(window.bt_rc_cb_items>0){var a=bt_rc_get_obj_by_id(t,e);var _=JSON.parse(localStorage.getItem("bt_rc_cb_1"));if(window.bt_rc_map[a.base].root!==undefined&&window.bt_rc_map[_.base].root!==undefined){for(var r=window.bt_rc_cb_items;r>=1;r--){_=JSON.parse(localStorage.getItem("bt_rc_cb_"+r));_=bt_rc_set_new_keys(_);bt_rc_insert_after(t,e,_)}}else if(bt_rc_allowed(_.base,a.p_base)){for(var r=window.bt_rc_cb_items;r>=1;r--){_=JSON.parse(localStorage.getItem("bt_rc_cb_"+r));_=bt_rc_set_new_keys(_);bt_rc_insert_after(t,e,_)}}else if(bt_rc_allowed(_.base,a.base)){for(var r=1;r<=window.bt_rc_cb_items;r++){_=JSON.parse(localStorage.getItem("bt_rc_cb_"+r));_=bt_rc_set_new_keys(_);bt_rc_insert_inside(t,e,_)}}else{alert(window.bt_rc_text.not_allowed)}}};window.bt_rc_paste_main_toolbar=function(){var t=JSON.parse(localStorage.getItem("bt_rc_cb_1"));if(window.bt_rc_map[t.base].root!==undefined){for(var e=1;e<=window.bt_rc_cb_items;e++){t=JSON.parse(localStorage.getItem("bt_rc_cb_"+e));t=bt_rc_set_new_keys(t);window.bt_rc_state_current.children.push(t)}bt_rc_event("refresh")}else{alert(window.bt_rc_text.not_allowed)}};window.bt_rc_dialog={};window.bt_rc_dialog.show=function(e){window.bt_rc_dialog.is_showing=true;var a="";if(e=="add_root"){var r=window.bt_rc_text.add_element;var i=[];t.each(window.bt_rc_map,function(t,e){if(e.root==true){i.push({base:e.base,name:e.name,description:e.description})}});i.sort(function(t,e){return t.name.toLowerCase().localeCompare(e.name.toLowerCase())});t.each(i,function(t,e){a+='<div class="bt_rc_dialog_item bt_rc_dialog_add_element" data-base="'+e.base+'"><b>'+e.name+"</b><br>"+e.description+"</div>"});t("#bt_rc_dialog .bt_rc_dialog_content").html(a);t(".bt_rc_dialog_add_element").click(function(e){window.bt_rc_base=t(this).data("base");window.bt_rc_dialog.hide();bt_rc_event("add_root_from_dialog")})}else if(e=="add"){var r=window.bt_rc_text.add_element;var i=[];t.each(window.bt_rc_map,function(t,e){var a;if(window.bt_rc_map[window.bt_rc_base].accept!==undefined){a=window.bt_rc_map[window.bt_rc_base].accept[e.base]}if(a===true||window.bt_rc_map[window.bt_rc_base].accept_all===true&&a!==false){if(window.bt_rc_map[e.base].is_mapped!==false){i.push({base:e.base,name:e.name,description:e.description})}}});i.sort(function(t,e){return t.name.toLowerCase().localeCompare(e.name.toLowerCase())});var n="";n+='<div class="bt_rc_dialog_item bt_rc_add_filter_container">';n+='<input type="text" class="bt_rc_filter" placeholder="'+window.bt_rc_text.filter+'">';n+="</div>";t("#bt_rc_dialog .bt_rc_dialog_header_tools").append(n);var c=document.createDocumentFragment();var o,s,d,l;t.each(i,function(t,e){o=bt_rc_create_dom_element("div",[["class","bt_rc_dialog_item bt_rc_dialog_add_element"],["data-base",e.base]]);s=bt_rc_create_dom_element("b",[]);l=document.createTextNode(e.name);s.appendChild(l);o.appendChild(s);d=bt_rc_create_dom_element("br",[]);o.appendChild(d);l=document.createTextNode(e.description);o.appendChild(l);c.appendChild(o)});t("#bt_rc_dialog .bt_rc_dialog_content")[0].appendChild(c);t(".bt_rc_dialog_add_element").click(function(e){window.bt_rc_base=t(this).data("base");window.bt_rc_dialog.hide();bt_rc_event("add_from_dialog")});t(".bt_rc_filter").keyup(function(e){var a=t(this).val();t(".bt_rc_dialog_item").not(".bt_rc_add_filter_container").each(function(){var e=t(this).html().replace(/(<([^>]+)>)/gi,"");var _=new RegExp(a,"i");if(!_.test(e)){t(this).hide()}else{t(this).show()}})})}else if(e=="add_horizontal"){var b=bt_rc_get_obj_by_id(window.bt_rc_state_current,window.bt_rc_from);var p="";for(var w=0;w<b.children.length;w++){var m=window.bt_rc_map[b.children[w].base].width_param;var f=attr_to_obj(b.children[w].attr);p+=f[m];if(w<b.children.length-1)p+="+"}var r=window.bt_rc_text.select_layout;t("#bt_rc_dialog").addClass("bt_rc_dialog_add_horizontal");a+='<div class="bt_rc_dialog_pick_layout_container">';a+='<span class="bt_rc_dialog_pick_layout" title="1/1"><span class="bt_rc_layout_12"></span></span>';a+='<span class="bt_rc_dialog_pick_layout" title="1/2+1/2"><span class="bt_rc_layout_6"></span><span class="bt_rc_layout_6"></span></span>';a+='<span class="bt_rc_dialog_pick_layout" title="1/3+1/3+1/3"><span class="bt_rc_layout_4"></span><span class="bt_rc_layout_4"></span><span class="bt_rc_layout_4"></span></span>';a+='<span class="bt_rc_dialog_pick_layout" title="1/4+1/4+1/4+1/4"><span class="bt_rc_layout_3"></span><span class="bt_rc_layout_3"></span><span class="bt_rc_layout_3"></span><span class="bt_rc_layout_3"></span></span>';a+='<span class="bt_rc_dialog_pick_layout" title="2/3+1/3"><span class="bt_rc_layout_8"></span><span class="bt_rc_layout_4"></span></span>';a+='<span class="bt_rc_dialog_pick_layout" title="1/3+2/3"><span class="bt_rc_layout_4"></span><span class="bt_rc_layout_8"></span></span>';a+='<span class="bt_rc_dialog_pick_layout" title="3/4+1/4"><span class="bt_rc_layout_9"></span><span class="bt_rc_layout_3"></span></span>';a+='<span class="bt_rc_dialog_pick_layout" title="1/4+3/4"><span class="bt_rc_layout_3"></span><span class="bt_rc_layout_9"></span></span>';a+='<span class="bt_rc_dialog_pick_layout" title="1/4+2/4+1/4"><span class="bt_rc_layout_3"></span><span class="bt_rc_layout_6"></span><span class="bt_rc_layout_3"></span></span>';a+="</div>";a+='<div class="bt_rc_dialog_enter_layout_container">';a+='<div contenteditable="true" class="bt_rc_dialog_enter_layout">1/1</div>';if(!window.bt_rc_compatibility_mode){a+='<div contenteditable="true" class="bt_rc_dialog_enter_layout">1/1</div>'}a+="</div>";t("#bt_rc_dialog .bt_rc_dialog_content").html(a);t("#bt_rc_dialog").append('<input type="button" class="bt_rc_dialog_button bt_rc_edit button button-large" value="'+window.bt_rc_text.submit+'">');if(p!=""){t(".bt_rc_dialog_enter_layout").html(p)}t(".bt_rc_dialog_pick_layout").click(function(e){t(".bt_rc_dialog_enter_layout").html(t(this).attr("title").replace(/\s/gm,""));t(".bt_rc_dialog_enter_layout").focus()});t(".bt_rc_dialog_enter_layout").keypress(function(e){if(e.which==13){e.preventDefault();bt_rc_add_horizontal(window.bt_rc_state_current,t(this).html());window.bt_rc_dialog.hide()}});t(".bt_rc_dialog_add_horizontal .bt_rc_dialog_button").click(function(e){bt_rc_add_horizontal(window.bt_rc_state_current,t(".bt_rc_dialog_enter_layout").html());window.bt_rc_dialog.hide()})}else if(e=="edit_content"){var r=window.bt_rc_text.edit_content;t("#bt_rc_dialog").addClass("bt_rc_dialog_tinymce_container");t("#bt_rc_dialog").append('<input type="button" class="bt_rc_dialog_button bt_rc_edit button button-large" value="'+window.bt_rc_text.submit+'">');t(".bt_rc_dialog_tinymce").show();t(".bt_rc_dialog_button").unbind("click");t(".bt_rc_dialog_button").click(function(){window.switchEditors.go("bt_rc_tinymce","tmce");var t=bt_rc_get_obj_by_id(window.bt_rc_state_current,window.bt_rc_from);t.content=tinyMCE.get("bt_rc_tinymce").getContent();if(t.content.startsWith("<p>[")&&t.content.endsWith("]</p>")){t.content=t.content.substring(3);t.content=t.content.substring(0,t.content.length-4)}window.bt_rc_action="refresh";bt_rc_dispatch(".bt_rc_item_list","bt_rc_event");window.bt_rc_dialog.hide()});t("#bt_rc_dialog").css("visibility","visible")}else if(e=="edit"){var r=window.bt_rc_text.edit;var b=bt_rc_get_obj_by_id(window.bt_rc_state_current,window.bt_rc_from);var f={};if(b.attr!==undefined){f=attr_to_obj(b.attr)}if(window.bt_rc_map[b.base]!==undefined){r=r+" "+window.bt_rc_map[b.base].name;var u=window.bt_rc_map[b.base].params;if(u!==undefined){var c=document.createDocumentFragment();var h=new Array;var v="";var g="";window.bt_rc.param_groups=[];for(var w=0;w<u.length;w++){a="";var y="";if(f[u[w].param_name]!==undefined){y=f[u[w].param_name]}else{f[u[w].param_name]=""}if(u[w].group!==undefined){v=u[w].group}else{v=window.bt_rc_text.general}g=" bt_rc_group_"+v;if(window.bt_rc.param_groups.indexOf(v)==-1){window.bt_rc.param_groups.push(v)}if(u[w].type=="attach_images"||u[w].type=="attach_image"){var o=bt_rc_create_dom_element("div",[["class","bt_rc_dialog_item"+g],["data-param_name",u[w].param_name],["data-type",u[w].type]]);a+="<b>"+u[w].heading+"</b>";a+='<div class="bt_rc_dialog_image_container">';var k=y.split(",");if(k[0]!=""){for(var x=0;x<k.length;x++){a+='<div class="bt_rc_sortable_item" data-id="'+k[x]+'"><i class="fa fa-times"></i></div>';setTimeout(window.bt_rc_sortable_background,100,k[x])}}a+="</div>";a+='<div class="bt_rc_dialog_inline_buttons bt_rc_left">';a+='<input type="button" class="bt_rc_dialog_select_images_button button button-large" value="'+window.bt_rc_text.select+'">';a+="</div>";o.innerHTML=a}else if(u[w].type=="textfield"){var o=bt_rc_create_dom_element("div",[["class","bt_rc_dialog_item"+g],["data-param_name",u[w].param_name],["data-type",u[w].type]]);var N="";if(y==""){if(u[w].value!==undefined){N=u[w].value;N=N.replace(/``/gim,"&quot;")}}else{N=y.replace(/``/gim,"&quot;")}o.innerHTML="<b>"+u[w].heading+'</b><br><input type="text" value="'+N+'">'}else if(u[w].type=="textarea"){var o=bt_rc_create_dom_element("div",[["class","bt_rc_dialog_item"+g],["data-param_name",u[w].param_name],["data-type",u[w].type]]);o.innerHTML="<b>"+u[w].heading+'</b><br><textarea rows="5">'+y.replace(/``/gim,"&quot;")+"</textarea>"}else if(u[w].type=="textarea_object"){var o=bt_rc_create_dom_element("div",[["class","bt_rc_dialog_item"+g],["data-param_name",u[w].param_name],["data-type",u[w].type]]);try{o.innerHTML="<b>"+u[w].heading+'</b><br><textarea rows="5">'+atob(y)+"</textarea>"}catch(t){o.innerHTML="<b>"+u[w].heading+'</b><br><textarea rows="5">'+y+"</textarea>"}}else if(u[w].type=="dropdown"){var o=bt_rc_create_dom_element("div",[["class","bt_rc_dialog_item"+g],["data-param_name",u[w].param_name],["data-type",u[w].type]]);a+="<b>"+u[w].heading+"</b><br>";a+="<select>";var E=u[w].value;var C=Object.keys(E);for(var R=0;R<C.length;R++){if(y==E[C[R]]||y==""&&R==0){a+='<option value="'+E[C[R]]+'" selected>'+C[R]+"</option>"}else{a+='<option value="'+E[C[R]]+'">'+C[R]+"</option>"}}a+="</select>";o.innerHTML=a}else if(u[w].type=="iconpicker"){var o=bt_rc_create_dom_element("div",[["class","bt_rc_dialog_item"+g],["data-param_name",u[w].param_name],["data-type",u[w].type]]);
a+="<b>"+u[w].heading+"</b><br>";a+='<div class="bt_rc_iconpicker">';var E=u[w].value;var C=Object.keys(E);var S;a+='<div class="bt_rc_iconpicker_select">';var z=y;if(z=="no_icon"){z=""}if(z.length==4&&z.startsWith("f")){z="fa_"+z}var j=z.substr(0,2);var O=z.substr(3);var J="";for(var L=0;L<C.length;L++){S=Object.keys(E[C[L]]);for(var x=0;x<S.length;x++){if(z==E[C[L]][S[x]]){J=S[x]}}}if(O!=""){O="&#x"+O}a+='<div class="bt_rc_icon_preview bt_rc_icon_preview_'+j+'" data-icon="'+z+'" data-icon-code="'+O+'"></div>';a+='<div class="bt_rc_iconpicker_select_text">'+J+"</div>";a+='<i class="fa fa-close bt_rc_iconpicker_clear"></i>';a+='<i class="fa fa-angle-down"></i>';a+="</div>";a+='<div class="bt_rc_iconpicker_filter_container">';a+='<input type="text" class="bt_rc_filter" placeholder="'+window.bt_rc_text.filter+'">';a+="</div>";a+='<div class="bt_rc_iconpicker_icons">';for(var R=0;R<C.length;R++){a+='<div class="bt_rc_iconpicker_title">'+C[R]+"</div>";S=Object.keys(E[C[R]]);for(var T=0;T<S.length;T++){var z=E[C[R]][S[T]];var j=z.substr(0,2);var O=z.substr(3);a+='<div class="bt_rc_icon_preview bt_rc_icon_preview_'+j+'" data-icon="'+z+'" data-icon-code="&#x'+O+'" title="'+S[T]+'"></div>'}}a+="</div>";a+="</div>";o.innerHTML=a}else if(u[w].type=="colorpicker"){var o=bt_rc_create_dom_element("div",[["class","bt_rc_dialog_item bt_rc_colorpicker"+g],["data-param_name",u[w].param_name],["data-type",u[w].type]]);a+="<b>"+u[w].heading+"</b><br>";a+='<input type="text" class="bt_rc_color_picker" value="'+y.replace(/``/gim,"&quot;")+'">';o.innerHTML=a}else if(u[w].type=="checkbox"){var o=bt_rc_create_dom_element("div",[["class","bt_rc_dialog_item"+g],["data-param_name",u[w].param_name],["data-type",u[w].type]]);a+="<b>"+u[w].heading+"</b><br>";var E=u[w].value;var C=Object.keys(E);var M="";if(y==E[C[0]]){M=" "+"checked"}a+='<label for="blog_public"><input name="blog_public" type="checkbox" id="blog_public" value="'+E[C[0]]+'"'+M+">"+C[0]+"</label>";o.innerHTML=a}else if(u[w].type=="hidden"){var I=new Object;I.name=u[w].param_name;I.value=u[w].value;h.push(I)}if(u[w].type!="hidden"){if(u[w].description!==undefined){var H=bt_rc_create_dom_element("i",[["class","bt_rc_param_description"]]);H.innerHTML=u[w].description;o.appendChild(H)}c.appendChild(o)}}t("#bt_rc_dialog").data("hidden",JSON.stringify(h));t("#bt_rc_dialog .bt_rc_dialog_content")[0].appendChild(c);t(".bt_rc_color_picker").wpColorPicker();t(".bt_rc_iconpicker_select").on("click",function(e){t(this).next().toggle();t(this).next().next().toggle()});t(".bt_rc_iconpicker_icons .bt_rc_icon_preview").on("click",function(e){var a=t(this).closest(".bt_rc_iconpicker").find(".bt_rc_iconpicker_select .bt_rc_icon_preview");a.attr("data-icon",t(this).data("icon"));a.attr("data-icon-code",t(this).data("icon-code"));a.removeClass();a.addClass(t(this).attr("class"));t(this).closest(".bt_rc_iconpicker").find(".bt_rc_iconpicker_select .bt_rc_iconpicker_select_text").html(t(this).attr("title"));t(this).closest(".bt_rc_iconpicker").find(".bt_rc_iconpicker_clear").show();t(this).parent().hide();t(this).parent().prev().find("input").val("").trigger("keyup");t(this).parent().prev().hide()});t(".bt_rc_iconpicker").each(function(){var e=t(this).find(".bt_rc_icon_preview");var a=t(this).find(".bt_rc_iconpicker_clear");if(e.attr("data-icon")!=""){a.show()}});t(".bt_rc_iconpicker .bt_rc_iconpicker_clear").on("click",function(e){e.stopPropagation();var a=t(this).closest(".bt_rc_iconpicker").find(".bt_rc_iconpicker_select .bt_rc_icon_preview");a.attr("data-icon","");a.attr("data-icon-code","");a.parent().find(".bt_rc_iconpicker_select_text").html("");t(this).parent().next().find("input").val("").trigger("keyup");t(this).parent().next().hide();t(this).parent().next().next().hide();t(this).hide()});t(".bt_rc_iconpicker .bt_rc_filter").keyup(function(e){var a=t(this).val();t(this).closest(".bt_rc_iconpicker").find(".bt_rc_iconpicker_icons .bt_rc_icon_preview").each(function(){var e=t(this).attr("title");var _=new RegExp(a,"i");if(!_.test(e)){t(this).hide()}else{t(this).show()}})});t('#bt_rc_dialog .bt_rc_dialog_item[data-type="attach_images"] .bt_rc_dialog_image_container').sortable({cursor:"move",update:function(e,a){var _=t(this).closest(".bt_rc_dialog_item").data("param_name");var r="";t(this).find(".bt_rc_sortable_item").each(function(){r+=t(this).data("id")+","});r=r.slice(0,-1);f[_]=r}});t("#bt_rc_dialog .bt_rc_dialog_image_container").on("click",".fa-times",function(e){var a=t(this).closest(".bt_rc_dialog_item").data("param_name");var _=t(this).closest(".bt_rc_dialog_image_container");t(this).parent().remove();var r="";_.find(".bt_rc_sortable_item").each(function(){r+=t(this).data("id")+","});r=r.slice(0,-1);f[a]=r});t("#bt_rc_dialog .bt_rc_dialog_image_container").disableSelection();t(".bt_rc_dialog_item").on("click",".bt_rc_dialog_select_images_button",function(e){var a=bt_rc_get_key();var r=t(this).closest(".bt_rc_dialog_item").find(".bt_rc_dialog_image_container");var i=t(this).closest(".bt_rc_dialog_item").data("param_name");var n=t(this).closest(".bt_rc_dialog_item").data("type");var c="add";if(n=="attach_image"){c=false}var o=wp.media.controller.Library.extend({defaults:_.defaults({id:a,title:window.bt_rc_text.select_images,allowLocalEdits:false,displaySettings:false,displayUserSettings:false,multiple:c,type:"image"},wp.media.controller.Library.prototype.defaults)});var s=wp.media({button:{text:window.bt_rc_text.select},state:a,states:[new o]});s.on("close",function(){var t=s.state(a).get("selection");var e="";var _="";t.each(function(t){var a="";if(t.attributes.sizes.thumbnail!==undefined){a=t.attributes.sizes.thumbnail.url}else{a=t.attributes.sizes.full.url}_+=t.id+",";window.bt_rc.cache[t.id]={};window.bt_rc.cache[t.id].url=a;window.bt_rc.cache[t.id].title=t.attributes.title;e+='<div class="bt_rc_sortable_item" data-id="'+t.id+'" style="background-image:url(\''+a+'\');"><i class="fa fa-times"></i></div>'});_=_.slice(0,-1);f[i]=_;r.html(e)});s.on("open",function(){var e=s.state(a).get("selection");r.find(".bt_rc_sortable_item").each(function(){var a=wp.media.attachment(t(this).data("id"));e.add(a)})});s.open()})}}if(window.bt_rc.param_groups.length>0){t(".bt_rc_dialog_item").hide()}t.each(window.bt_rc.param_groups,function(e,a){var _="bt_rc_group_tab";if(e==0){_="bt_rc_group_tab bt_rc_group_tab_active";t(".bt_rc_group_"+a).show()}if(window.bt_rc.param_groups.length>1){t(".bt_rc_dialog_header_tools").append('<span class="'+_+'">'+a+"</span>")}});t("#bt_rc_dialog .bt_rc_group_tab").click(function(e){var a=t(this).html();t(".bt_rc_dialog_item").hide();t(".bt_rc_group_"+a).show();t(".bt_rc_group_tab").removeClass("bt_rc_group_tab_active");t(this).addClass("bt_rc_group_tab_active");t(".bt_rc_dialog_item:visible:last").css("border-bottom","none")});t(".bt_rc_dialog_item:visible:last").css("border-bottom","none");t("#bt_rc_dialog").append('<input type="button" class="bt_rc_dialog_button bt_rc_edit button button-large" value="'+window.bt_rc_text.submit+'">');t("#bt_rc_dialog .bt_rc_dialog_button").click(function(e){t("#bt_rc_dialog .bt_rc_dialog_item").each(function(){var e=t(this).data("param_name");var a=t(this).data("type");if(a=="textfield"||a=="colorpicker"){f[e]=t(this).find("input").val().replace(/"/gim,"``")}else if(a=="checkbox"){if(t(this).find("input").attr("checked")){f[e]=t(this).find("input").val()}else{f[e]=""}}else if(a=="textarea"){f[e]=t(this).find("textarea").val().replace(/"/gim,"``")}else if(a=="textarea_object"){try{f[e]=btoa(t(this).find("textarea").val())}catch(a){f[e]=t(this).find("textarea").val()}}else if(a=="dropdown"){f[e]=t(this).find("select :selected").val()}else if(a=="iconpicker"){f[e]=t(this).find(".bt_rc_iconpicker_select .bt_rc_icon_preview").data("icon")}});var a=JSON.parse(t("#bt_rc_dialog").data("hidden"));for(var _=0;_<a.length;_++){f[""+a[_].name]=a[_].value}b.attr=JSON.stringify(f);window.bt_rc_dialog.hide();window.bt_rc_action="refresh";bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")})}else if(e=="manage_cb"){r=window.bt_rc_text.manage_cb;a+='<div class="bt_rc_dialog_item">';a+='<input type="text" class="bt_rc_impex_input">';a+="</div>";t("#bt_rc_dialog .bt_rc_dialog_content").html(a);t("#bt_rc_dialog").append('<div class="bt_rc_dialog_inline_buttons"><input type="button" class="bt_rc_dialog_button bt_rc_edit button button-large bt_rc_button_export" value="'+window.bt_rc_text.export+'"><input type="button" class="bt_rc_dialog_button bt_rc_edit button button-large bt_rc_button_import" value="'+window.bt_rc_text.import+'"></div>');t("#bt_rc_dialog .bt_rc_button_export").click(function(e){if(window.bt_rc_cb_items>0){var a="[";for(var _=1;_<=window.bt_rc_cb_items;_++){a+='{"bt_rc_cb":"'+window.btoa(encodeURIComponent(localStorage.getItem("bt_rc_cb_"+_)))+'"},'}a=a.substring(0,a.length-1);a+="]";t(".bt_rc_impex_input").val(window.btoa(encodeURIComponent(a)));t(".bt_rc_impex_input").select()}});t("#bt_rc_dialog .bt_rc_button_import").click(function(e){if(t(".bt_rc_impex_input").val()){bt_rc_cb_import(t(".bt_rc_impex_input").val())}})}else if(e=="sc_mapper"){r=window.bt_rc_text.sc_mapper;t("#bt_rc_dialog").addClass("bt_rc_dialog_sc_mapper_container");var n="";n+='<div class="bt_rc_dialog_item bt_rc_sc_mapper_filter_container">';n+='<input type="text" class="bt_rc_filter" placeholder="'+window.bt_rc_text.filter+'">';n+="</div>";t("#bt_rc_dialog .bt_rc_dialog_header_tools").append(n);var D=function(t){var e=t;if(window.bt_rc_map_primary[t]!==undefined){e+=" "+"/"+" "+"p"}if(window.bt_rc_map_secondary[t]!==undefined){e+=" "+"/"+" "+"s"}return e};var c=document.createDocumentFragment();var o=bt_rc_create_dom_element("div",[["id","bt_rc_sc_mapper_accordion"]]);for(var w=0;w<window.bt_rc.all_sc.length;w++){if(window.bt_rc_map[window.bt_rc.all_sc[w]]!==undefined&&window.bt_rc_map[window.bt_rc.all_sc[w]].is_mapped!==false){var P=bt_rc_create_dom_element("h3",[["class","bt_rc_sc_mapper_item"]]);P.innerHTML='<i class="fa fa-chevron-down"></i><span>'+D(window.bt_rc.all_sc[w])+"</span>";var U=bt_rc_create_dom_element("div",[["data-base",window.bt_rc.all_sc[w]]])}else{var P=bt_rc_create_dom_element("h3",[["class","bt_rc_sc_mapper_item bt_rc_sc_mapper_unmapped"]]);P.innerHTML='<i class="fa fa-chevron-down"></i><span>'+window.bt_rc.all_sc[w]+"</span>";var U=bt_rc_create_dom_element("div",[["data-base",window.bt_rc.all_sc[w]]])}o.appendChild(P);o.appendChild(U)}c.appendChild(o);t("#bt_rc_dialog .bt_rc_dialog_content")[0].appendChild(c);t(".bt_rc_filter").keyup(function(e){var a=t(this).val();t("#bt_rc_sc_mapper_accordion > div").removeClass("bt_rc_map_item_active");t("#bt_rc_sc_mapper_accordion > h3").removeClass("bt_rc_map_header_active");t("#bt_rc_sc_mapper_accordion > h3 > i").removeClass("fa-chevron-up").addClass("fa-chevron-down");t(".bt_rc_sc_mapper_item").each(function(){var e=t(this).html().replace(/(<([^>]+)>)/gi,"");var _=new RegExp(a,"i");if(!_.test(e)){t(this).hide()}else{t(this).show()}})});t(".bt_rc_sc_map").keydown(function(e){if(e.keyCode===9){e.preventDefault();var a=this.selectionStart;var _=this.selectionEnd;var r=t(this);r.val(r.val().substring(0,a)+"\t"+r.val().substring(_));this.selectionStart=this.selectionEnd=a+1;t(this).parent().find(".bt_rc_save_mapping_button").prop("disabled",false)}});t("#bt_rc_sc_mapper_accordion h3").click(function(e){var a=t(this).next();if(a.hasClass("bt_rc_map_item_active")){a[0].innerHTML="";a.removeClass("bt_rc_map_item_active");t(this).removeClass("bt_rc_map_header_active");t(this).find("i").removeClass("fa-chevron-up").addClass("fa-chevron-down")}else{var _='<input type="button" class="button button-large bt_rc_insert_mapping_template_button" value="'+window.bt_rc_text.insert_mapping+'"><input type="button" class="button button-large bt_rc_delete_mapping_button" disabled value="'+window.bt_rc_text.delete+'"><input type="button" class="button button-large bt_rc_save_mapping_button" disabled value="'+window.bt_rc_text.save+'"><span class="spinner" style="display: none;"></span><textarea class="bt_rc_sc_map" rows="10"></textarea>';a[0].innerHTML=_;autosize(t(".bt_rc_sc_map"));a.addClass("bt_rc_map_item_active");t(this).addClass("bt_rc_map_header_active");t(this).find("i").removeClass("fa-chevron-down").addClass("fa-chevron-up");var r=a.data("base");if(window.bt_rc_map_secondary[r]!==undefined){a.find(".bt_rc_delete_mapping_button").prop("disabled",false);a.find(".bt_rc_insert_existing_mapping_button").click();a.find(".bt_rc_save_mapping_button").prop("disabled",true)}}});t("#bt_rc_sc_mapper_accordion").on("keydown",".bt_rc_sc_map",function(){t(this).parent().find(".bt_rc_save_mapping_button").prop("disabled",false)});t("#bt_rc_sc_mapper_accordion").on("click",".bt_rc_insert_mapping_template_button",function(e){var a=t(this).parent().find("textarea");var _=t(this).parent().data("base");if(window.bt_rc_map[_]!==undefined&&window.bt_rc_map[_].is_mapped!==false){var r=JSON.stringify(window.bt_rc_map[_],null,"\t")}else if(window.vc_mapper!==undefined&&window.vc_mapper[_]!==undefined){var i=window.vc_mapper[_];r={};r.name=i.name!==undefined?i.name:"";r.base=i.base!==undefined?i.base:"";r.description=i.description!==undefined?i.description:"";r.show_settings_on_create=i.show_settings_on_create!==undefined?i.show_settings_on_create:true;if(i.is_container===true){if(i.base=="vc_row"){r.root=true;r.container="horizontal";r.accept={vc_column:true};r.toggle=true}else if(i.base=="vc_row_inner"){r.container="horizontal";r.accept={vc_column_inner:true}}else if(i.base=="vc_column"){r.container="vertical";r.width_param="width";r.accept_all=true;r.accept={vc_row:false,vc_column:false,vc_column_inner:false}}else if(i.base=="vc_column_inner"){r.container="vertical";r.width_param="width";r.accept_all=true;r.accept={vc_row:false,vc_column:false,vc_row_inner:false,vc_column_inner:false}}else{r.container="vertical"}}r.params=[];var n="";var c=0;for(var o=0;o<i.params.length;o++){if(i.params[o].type!="textarea_html"&&i.params[o].admin_label!==false){r.params[c]={};r.params[c].type="textfield";n=i.params[o].type;if(n=="textarea"||n=="dropdown"||n=="attach_image"||n=="attach_images"||n=="colorpicker"||n=="checkbox"||n=="hidden"){r.params[c].type=n}r.params[c].heading=i.params[o].heading!==undefined?i.params[o].heading:"";if(i.params[o].description!==undefined)r.params[c].heading+=" "+"("+i.params[o].description+")";r.params[c].param_name=i.params[o].param_name!==undefined?i.params[o].param_name:"";r.params[c].value=i.params[o].value!==undefined?i.params[o].value:"";if(i.params[o].holder!==undefined)r.params[c].preview=true;c++}else if(i.params[o].type=="textarea_html"){r.container="vertical";r.accept={_content:true}}}r=JSON.stringify(r,null,"\t")}else{var r={};r.name=_;r.base=_;r.description="";r.show_settings_on_create=true;r.params=[];r.params[0]={};r.params[0].type="textfield";r.params[0].heading="Param 1";r.params[0].param_name="param_1";r.params[0].value="";r.params[0].preview=true;r.params[1]={};r.params[1].type="dropdown";r.params[1].heading="Param 2";r.params[1].param_name="param_2";r.params[1].value={"Option 1":"value 1","Option 2":"value 2"};r.params[1].preview=true;r=JSON.stringify(r,null,"\t")}a.val(r);var s=document.createEvent("Event");s.initEvent("autosize:update",true,false);a[0].dispatchEvent(s);t(this).parent().find(".bt_rc_save_mapping_button").prop("disabled",false)});t("#bt_rc_sc_mapper_accordion").on("click",".bt_rc_save_mapping_button",function(e){var a=t(this).parent().data("base");var _=t(this);try{var r=JSON.parse(t(this).parent().find(".bt_rc_sc_map").val())}catch(t){alert(t);return false}var i=JSON.stringify(r);_.siblings(".spinner").show();_.siblings(".spinner").css("visibility","visible");var n={action:"bt_rc_save_mapping",base:a,map:i};t.ajax({type:"POST",url:window.BTAJAXURL,data:n,async:true,success:function(t){if(t=="ok"){_.prop("disabled",true);_.siblings(".spinner").hide();_.closest("div").prev(".bt_rc_sc_mapper_item").removeClass("bt_rc_sc_mapper_unmapped");window.bt_rc_map[a]=JSON.parse(i);if(window.bt_rc_map_secondary[a]===undefined){window.bt_rc_map_secondary[a]=true}_.closest("div").prev(".bt_rc_sc_mapper_item").find("span").html(D(a));if(window.bt_rc_map_secondary[a]!==undefined){_.parent("div").find(".bt_rc_delete_mapping_button").prop("disabled",false)}window.bt_rc_action="refresh";bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")}}})});t("#bt_rc_sc_mapper_accordion").on("click",".bt_rc_delete_mapping_button",function(e){var a=t(this).parent().data("base");var _=t(this);_.siblings(".spinner").show();_.siblings(".spinner").css("visibility","visible");var r={action:"bt_rc_delete_mapping",base:a};t.ajax({type:"POST",url:window.BTAJAXURL,data:r,async:true,success:function(t){if(t=="ok"){_.prop("disabled",true);_.siblings(".spinner").hide();if(window.bt_rc_map_secondary[a]!==undefined){delete window.bt_rc_map_secondary[a]}_.parent().find("textarea").val("");if(window.bt_rc_map_primary[a]===undefined){_.closest("div").prev(".bt_rc_sc_mapper_item").addClass("bt_rc_sc_mapper_unmapped");delete window.bt_rc_map[a];window.bt_rc_action="refresh";bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")}else{window.bt_rc_map[a]=window.bt_rc_map_primary[a]}_.closest("div").prev(".bt_rc_sc_mapper_item").find("span").html(D(a))}}})})}t("#bt_rc_dialog .bt_rc_dialog_header span").html(r);t('.bt_rc_dialog_item input[type="text"]').keypress(function(t){if(t.which==13){t.preventDefault()}});if(e=="edit_content"){t(".bt_rc_dialog_tinymce").css("height","auto");window.switchEditors.go("bt_rc_tinymce","tmce");tinyMCE.get("bt_rc_tinymce").setContent(window.switchEditors.wpautop(window.bt_rc_content))}else{t("#bt_rc_dialog").css("visibility","visible")}if(e=="add"||e=="sc_mapper"){t(".bt_rc_filter").focus()}};window.bt_rc_dialog.hide=function(e){window.bt_rc_dialog.is_showing=false;window.bt_rc_dialog.is_mouseover=false;t(".wp-picker-open").click();t(".bt_rc_dialog_tinymce").hide();t("#bt_rc_dialog").data("hidden","");t("#bt_rc_dialog").removeClass("bt_rc_dialog_tinymce_container");t("#bt_rc_dialog").removeClass("bt_rc_dialog_sc_mapper_container");t("#bt_rc_dialog").removeClass("bt_rc_dialog_add_horizontal");var a=t("#bt_rc_dialog .bt_rc_dialog_content")[0];while(a.firstChild){a.removeChild(a.firstChild)}t("#bt_rc_dialog .bt_rc_dialog_header")[0].innerHTML='<div class="bt_rc_dialog_close"><i class="fa fa-close"></i></div><span></span>';t("#bt_rc_dialog .bt_rc_dialog_header_tools")[0].innerHTML="";t("#bt_rc_dialog > input").remove();t("#bt_rc_dialog > .bt_rc_dialog_inline_buttons").remove();t("#bt_rc_dialog").css("visibility","hidden")};t(document).ready(function(){t("#bt_rc_dialog").on("click",".bt_rc_dialog_close",function(t){window.bt_rc_dialog.hide()});t("#bt_rc_dialog").on("mousedown",".bt_rc_dialog_close",function(t){t.stopPropagation()});t("#bt_rc_dialog").on("mousedown",".bt_rc_dialog_header",function(t){window.bt_rc_dialog_header_mousedown(t)})});window.bt_rc_get_obj_by_id=function(t,e){var a=null;for(var _=0;_<t.children.length;_++){if(e.bt_ends_with(t.children[_].key)){a=t.children[_];break}a=bt_rc_get_obj_by_id(t.children[_],e);if(a!=null)break}return a};window.bt_rc_get_param=function(t,e){if(window.bt_rc_map[t]!==undefined){return window.bt_rc_map[t][e]}return undefined};window.bt_rc_state_callback=function(){bt_rc_horizontal_responsive();if(window.bt_rc_callback_action!==null){bt_rc_event(window.bt_rc_callback_action)}};window.bt_rc_horizontal_responsive=function(){t(".bt_rc_is_horizontal").each(function(){var e=t(this).closest(".bt_rc_item").width();var a=false;t(this).find(".bt_rc_is_width").each(function(){var _=bt_rc_get_obj_by_id(window.bt_rc_state_current,t(this).data("reactid"));var r=window.bt_rc_map[_.base].width_param;var i=attr_to_obj(_.attr);var n=i[r];n=n.split("/");n=12*n[0]/n[1];var c=t(this).find(".bt_rc_item").first();var o=-1;while(c.length>0){c=c.find(".bt_rc_item").first();o+=1}var s=(e-window.bt_rc.padding*2)*n/12-window.bt_rc.padding*2-o*window.bt_rc.padding*4;if(s<window.bt_rc.min_width){a=true;return false}});if(a){t(this).find(".bt_rc_is_width").removeClass("bt_rc_width");t(this).removeClass("bt_rc_horizontal");t(this).css("display","block")}else{t(this).find(".bt_rc_is_width").addClass("bt_rc_width");t(this).addClass("bt_rc_horizontal");t(this).css("display","table")}})};t(window).resize(function(){bt_rc_horizontal_responsive()});window.bt_rc_push_state=function(t){window.bt_rc_state_current=t;window.bt_rc_state.splice(window.bt_rc_state_pointer+1);window.bt_rc_state.push(JSON.stringify(t));window.bt_rc_state_pointer=window.bt_rc_state.length-1};window.bt_rc_undo=function(){window.bt_rc_state_pointer--;if(window.bt_rc_state_pointer>-1){window.bt_rc_state_current=JSON.parse(window.bt_rc_state[window.bt_rc_state_pointer]);window.bt_rc_action="update_state";bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")}else{window.bt_rc_state_pointer++}};window.bt_rc_redo=function(){window.bt_rc_state_pointer++;if(window.bt_rc_state_pointer<=window.bt_rc_state.length-1){window.bt_rc_state_current=JSON.parse(window.bt_rc_state[window.bt_rc_state_pointer]);window.bt_rc_action="update_state";bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")}else{window.bt_rc_state_pointer--}};window.bt_rc_sortable_background=function(e){if(window.bt_rc.cache[e]===undefined){var a=wp.media.attachment(e);a.fetch().done(function(e){var a="";if(e.sizes.thumbnail!==undefined){a=e.sizes.thumbnail.url}else{a=e.sizes.full.url}t('.bt_rc_sortable_item[data-id="'+e.id+'"]').css("background-image",'url("'+a+'")');t('.bt_rc_sortable_item[data-id="'+e.id+'"]').css("background-size","cover");window.bt_rc.cache[e.id]={};window.bt_rc.cache[e.id].url=a;window.bt_rc.cache[e.id].title=e.title})}else{t('.bt_rc_sortable_item[data-id="'+e+'"]').css("background-image",'url("'+window.bt_rc.cache[e].url+'")');t('.bt_rc_sortable_item[data-id="'+e+'"]').css("background-size","cover")}};String.prototype.bt_ends_with=function(t){return this.indexOf(t,this.length-t.length)!==-1};window.bt_rc_get_key=function(){var t="bt_rc_"+Math.random().toString();t=t.replace(".","");return t};window.bt_rc_dispatch=function(e,a){try{var _=new Event(a)}catch(t){var _=document.createEvent("Event");_.initEvent(a,false,false)}t(e)[0].dispatchEvent(_)};t(document).ready(function(){if(t("#bt_rc").length>0){window.bt_rc_element_list=React.render(React.createElement(a,{data:window.bt_rc_data}),t("#bt_rc")[0],function(){bt_rc_horizontal_responsive();bt_rc_resize_h(window.bt_rc_data);window.bt_rc_action="refresh_on_ready";bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")})}if(window.bt_rc_plugins_url!==undefined){var e=new Image;e.src=window.bt_rc_plugins_url+"/rapid_composer/img/ajax-loader.gif"}})})(jQuery);